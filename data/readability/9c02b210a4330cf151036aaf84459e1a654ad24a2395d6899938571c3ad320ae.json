{"title":"Getting Started with Ambassador and Consul Using Kubernetes Initializer","link":"https://www.hashicorp.com/blog/getting-started-with-ambassador-and-consul-using-kubernetes-initializer","date":1611075600000,"content":"<div id=\"readability-page-1\" class=\"page\"><div><section><p>HashiCorp Consul integrates with Ambassador to securely route ingress traffic into Consul service mesh when using Kubernetes. When onboarding applications onto a service mesh or when integrating with existing applications outside of the mesh, a north-south API gateway is typically required for communications with clients outside of the network. Ambassador is a Kubernetes API Gateway that allows you to route incoming traffic to your Consul service mesh proxies while also providing the ability to leverage advanced API Gateway functionalities such as rate limiting and authentication. In this blog post, we describe a new way to get started with both Ambassador and Consul service mesh using the Kubernetes Initializer built by Ambassador.</p><h2><a href=\"#overview\" aria-label=\"overview permalink\">»</a><a id=\"overview\" aria-hidden=\"\"></a>Overview</h2><p>Kubernetes Initializer is a tool built by Ambassador Labs that allows you to quickly deploy a sandbox environment of Ambassador along with other platforms such as Prometheus and Consul. Using Kubernetes Initializer you can deploy both Ambassador and Consul across various different Kubernetes distributions such as AKS, EKS, GKE, Minikube, and kind.</p></section><section><picture data-testid=\"image-root\"><source type=\"image/webp\" srcset=\"https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=webp&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=webp&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=webp&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=webp&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=webp&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=webp&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=webp&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" data-testid=\"webp-source\"><img src=\"https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=png&amp;q=80\" srcset=\"https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=png&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=png&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=png&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=png&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=png&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=png&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1611074354-ambassador-kube-image1.png?fit=max&amp;fm=png&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" alt=\"K8s Initializer home\" data-testid=\"img\"></picture></section><section><p>In this example let us walk through setting up Ambassador, Jaeger, Prometheus, and Consul together. First, let’s take a look at how the <a href=\"https://app.getambassador.io/initializer/\">K8s Initializer</a> can quickly provide a deployment descriptor for both Ambassador, Consul, Prometheus, and Jaeger.</p><p>The Kubernetes Initializer provides a quick way to select your desired infrastructure and specify how you would like to handle insecure traffic that enters your Kubernetes cluster. For Cloud Service Provider distributions of Kubernetes, the initializer also generates YAML to create a LoadBalancer using a load balancer type of your choosing (Layer 4 or Layer 7). We can also select kind for local installations which are perfect for sandbox environments.</p></section><section><picture data-testid=\"image-root\"><source type=\"image/webp\" srcset=\"https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=webp&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=webp&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=webp&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=webp&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=webp&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=webp&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=webp&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" data-testid=\"webp-source\"><img src=\"https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=png&amp;q=80\" srcset=\"https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=png&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=png&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=png&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=png&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=png&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=png&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1611074365-ambassador-kube-image2.png?fit=max&amp;fm=png&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" alt=\"Configure Ambassador Edge Stack for Ingress\" data-testid=\"img\"></picture></section><section><p>In addition, you can go setup Observability so that we can easily collect metrics via a Prometheus backend for both Consul and Ambassador. As part of the configuration, the initializer can also configure Consul to collect distributed traces to an installation of Jaeger that is deployed via the initializer YAML.</p></section><section><picture data-testid=\"image-root\"><source type=\"image/webp\" srcset=\"https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=webp&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=webp&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=webp&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=webp&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=webp&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=webp&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=webp&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" data-testid=\"webp-source\"><img src=\"https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=png&amp;q=80\" srcset=\"https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=png&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=png&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=png&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=png&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=png&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=png&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1611074369-ambassador-kube-image3.png?fit=max&amp;fm=png&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" alt=\"Configure Observability\" data-testid=\"img\"></picture></section><section><p>Finally, you can select Consul as the service mesh to integrate with Ambassador to easily deploy Consul with Ambassador via the YAML generated by Kubernetes Initializer.</p></section><section><picture data-testid=\"image-root\"><source type=\"image/webp\" srcset=\"https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=webp&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=webp&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=webp&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=webp&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=webp&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=webp&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=webp&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" data-testid=\"webp-source\"><img src=\"https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=png&amp;q=80\" srcset=\"https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=png&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=png&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=png&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=png&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=png&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=png&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1611074373-ambassador-kube-image4.png?fit=max&amp;fm=png&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" alt=\"Configure Consul Connect\" data-testid=\"img\"></picture></section><section><h2><a href=\"#conclusion\" aria-label=\"conclusion permalink\">»</a><a id=\"conclusion\" aria-hidden=\"\"></a>Conclusion</h2><p>Please join us for an <a href=\"https://www.hashicorp.com/events/webinars/ambassador-consul-webinar\">upcoming webinar</a> to get a deep dive on how to use Consul Kubernetes and Ambassador together with Kubernetes Initializer. For more information on how to deploy Consul in production with Ambassador please visit the <a href=\"https://www.getambassador.io/docs/latest/topics/concepts/architecture/\">documentation</a> we have available to describe the Ambassador integration with Consul.</p></section></div></div>","author":"David Yu","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"9c02b210a4330cf151036aaf84459e1a654ad24a2395d6899938571c3ad320ae","category":"Tech"}