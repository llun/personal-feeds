{"title":"จดบันทึกการทำ Load testing ด้วย Locust บน Kubernetes cluster","link":"https://www.somkiat.cc/load-testing-with-locust-on-kubernetes/","date":1618075732000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header><div><p><time>April 10, 2021</time> <span><a href=\"https://www.somkiat.cc/category/programming/\" rel=\"category tag\">Programming</a>, <a href=\"https://www.somkiat.cc/category/tools/\" rel=\"category tag\">Tools</a></span></p></div></header><div><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/04/locust-k8s.jpeg\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/04/locust-k8s.jpeg 650w, https://www.somkiat.cc/wp-content/uploads/2021/04/locust-k8s-300x169.jpeg 300w\" sizes=\"(max-width: 650px) 100vw, 650px\"></figure><p>ความต้องการของการทำงานสำหรับ Load testing ของระบบงาน ด้วย <a href=\"https://locust.io/\" target=\"_blank\" rel=\"noreferrer noopener\"><strong>Locust</strong></a><br>ซึ่งอยู่บน Kubernetes cluster เป็นดังนี้<br>ทำการ setup Locust แบบ Master-slave หรือ Manager-worker<br>เพื่อช่วยสร้าง virtual user จำนวนมากตามที่ต้องการ<br>มีขั้นตอนการเตรียมดังนี้</p><p><strong>สิ่งที่ต้องการคือ สร้าง Locust แบบ Master-slave</strong></p><p>เพื่อช่วยสร้าง virtual user จำนวนมาก ๆ<br>จากนั้นส่งผลการทดสอบจาก target system<br>กลับมายัง master node เพื่อมาแสดงผลสวย ๆ ต่อไป<br>แสดงดังภาพ</p><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/04/Locust-Master-slave-.png\" alt=\"\" width=\"443\" height=\"335\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/04/Locust-Master-slave-.png 500w, https://www.somkiat.cc/wp-content/uploads/2021/04/Locust-Master-slave--300x227.png 300w\" sizes=\"(max-width: 443px) 100vw, 443px\"></figure><p><strong>ขั้นตอนที่ 1 ทำการสร้าง test case หรือ task สำหรับการทดสอบ</strong></p><p>โดยเขียนด้วยภาษา Python<br>แสดงดังตัวอย่าง</p><div itemprop=\"text\" id=\"gist108932071\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-sample-py-L1\" data-line-number=\"1\"></td><td id=\"file-sample-py-LC1\"><span>from</span> <span>locust</span> <span>import</span> <span>HttpUser</span>, <span>task</span>, <span>between</span></td></tr><tr><td id=\"file-sample-py-L2\" data-line-number=\"2\"></td><td id=\"file-sample-py-LC2\"></td></tr><tr><td id=\"file-sample-py-L3\" data-line-number=\"3\"></td><td id=\"file-sample-py-LC3\"></td></tr><tr><td id=\"file-sample-py-L4\" data-line-number=\"4\"></td><td id=\"file-sample-py-LC4\"><span>class</span> <span>MyUser</span>(<span>HttpUser</span>):</td></tr><tr><td id=\"file-sample-py-L5\" data-line-number=\"5\"></td><td id=\"file-sample-py-LC5\"><span>wait_time</span> <span>=</span> <span>between</span>(<span>5</span>, <span>15</span>)</td></tr><tr><td id=\"file-sample-py-L6\" data-line-number=\"6\"></td><td id=\"file-sample-py-LC6\"></td></tr><tr><td id=\"file-sample-py-L7\" data-line-number=\"7\"></td><td id=\"file-sample-py-LC7\"><span>@<span>task</span></span></td></tr><tr><td id=\"file-sample-py-L8\" data-line-number=\"8\"></td><td id=\"file-sample-py-LC8\"><span>def</span> <span>index</span>(<span>self</span>):</td></tr><tr><td id=\"file-sample-py-L9\" data-line-number=\"9\"></td><td id=\"file-sample-py-LC9\"><span>self</span>.<span>client</span>.<span>get</span>(<span>\"/\"</span>)</td></tr><tr><td id=\"file-sample-py-L10\" data-line-number=\"10\"></td><td id=\"file-sample-py-LC10\"></td></tr><tr><td id=\"file-sample-py-L11\" data-line-number=\"11\"></td><td id=\"file-sample-py-LC11\"><span>@<span>task</span></span></td></tr><tr><td id=\"file-sample-py-L12\" data-line-number=\"12\"></td><td id=\"file-sample-py-LC12\"><span>def</span> <span>list_all_users</span>(<span>self</span>):</td></tr><tr><td id=\"file-sample-py-L13\" data-line-number=\"13\"></td><td id=\"file-sample-py-LC13\"><span>self</span>.<span>client</span>.<span>get</span>(<span>\"/users\"</span>)</td></tr></tbody></table></div><p><strong>คำอธิบาย</strong><br>ทำการทดสอบ 2 endpoint คือ</p><ul><li>/ สำหรับ index หรือ หน้าแรก</li><li>/users สำหรับดึงข้อมูล user ทั้งหมด</li></ul><p><strong>ขั้นตอนที่ 2 สร้าง Dockerfile สำหรับสร้าง Image ของ Locust</strong></p><p>ทำหน้าที่ run test case จากขั้นตอนที่ 1</p><div itemprop=\"text\" id=\"gist108932071\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-dockerfile-L1\" data-line-number=\"1\"></td><td id=\"file-dockerfile-LC1\"><span>FROM</span> locustio/locust:1.4.4</td></tr><tr><td id=\"file-dockerfile-L2\" data-line-number=\"2\"></td><td id=\"file-dockerfile-LC2\"><span>WORKDIR</span> /demo</td></tr><tr><td id=\"file-dockerfile-L3\" data-line-number=\"3\"></td><td id=\"file-dockerfile-LC3\"><span>COPY</span> requirements.txt .</td></tr><tr><td id=\"file-dockerfile-L4\" data-line-number=\"4\"></td><td id=\"file-dockerfile-LC4\"><span>RUN</span> pip install -r requirements.txt</td></tr><tr><td id=\"file-dockerfile-L5\" data-line-number=\"5\"></td><td id=\"file-dockerfile-LC5\"><span>COPY</span> . .</td></tr><tr><td id=\"file-dockerfile-L6\" data-line-number=\"6\"></td><td id=\"file-dockerfile-LC6\"></td></tr><tr><td id=\"file-dockerfile-L7\" data-line-number=\"7\"></td><td id=\"file-dockerfile-LC7\"><span><span>#</span> Start Locust using LOCUS_OPTS environment variable</span></td></tr><tr><td id=\"file-dockerfile-L8\" data-line-number=\"8\"></td><td id=\"file-dockerfile-LC8\"><span>ENTRYPOINT</span> [<span>\"bash\"</span>, <span>\"/demo/run.sh\"</span>]</td></tr></tbody></table></div><p><strong>โดยมีไฟล์ run.sh สำหรับกำหนด mode ของแต่ละ node</strong><br>หรือในแต่ละ container ว่าทำงานแบบใด</p><ul><li>standalone</li><li>master</li><li>worker</li></ul><div itemprop=\"text\" id=\"gist108932071\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-run-sh-L1\" data-line-number=\"1\"></td><td id=\"file-run-sh-LC1\">LOCUST=<span><span>\"</span>locust<span>\"</span></span></td></tr><tr><td id=\"file-run-sh-L2\" data-line-number=\"2\"></td><td id=\"file-run-sh-LC2\">LOCUS_OPTS=<span><span>\"</span>-f /demo/sample.py --host=<span>$TARGET_HOST</span><span>\"</span></span></td></tr><tr><td id=\"file-run-sh-L3\" data-line-number=\"3\"></td><td id=\"file-run-sh-LC3\"></td></tr><tr><td id=\"file-run-sh-L4\" data-line-number=\"4\"></td><td id=\"file-run-sh-LC4\"><span><span>#</span> Default = standalone</span></td></tr><tr><td id=\"file-run-sh-L5\" data-line-number=\"5\"></td><td id=\"file-run-sh-LC5\">LOCUST_MODE=<span>${LOCUST_MODE<span>:-</span>standalone}</span></td></tr><tr><td id=\"file-run-sh-L6\" data-line-number=\"6\"></td><td id=\"file-run-sh-LC6\"></td></tr><tr><td id=\"file-run-sh-L7\" data-line-number=\"7\"></td><td id=\"file-run-sh-LC7\"><span><span>#</span> Master node</span></td></tr><tr><td id=\"file-run-sh-L8\" data-line-number=\"8\"></td><td id=\"file-run-sh-LC8\"><span>if</span> [[ <span><span>\"</span><span>$LOCUST_MODE</span><span>\"</span></span> <span>=</span> <span><span>\"</span>master<span>\"</span></span> ]]<span>;</span> <span>then</span></td></tr><tr><td id=\"file-run-sh-L9\" data-line-number=\"9\"></td><td id=\"file-run-sh-LC9\">LOCUS_OPTS=<span><span>\"</span><span>$LOCUS_OPTS</span> --master --master-port=5557<span>\"</span></span></td></tr><tr><td id=\"file-run-sh-L10\" data-line-number=\"10\"></td><td id=\"file-run-sh-LC10\"></td></tr><tr><td id=\"file-run-sh-L11\" data-line-number=\"11\"></td><td id=\"file-run-sh-LC11\"><span><span>#</span> Worker/slave node</span></td></tr><tr><td id=\"file-run-sh-L12\" data-line-number=\"12\"></td><td id=\"file-run-sh-LC12\"><span>elif</span> [[ <span><span>\"</span><span>$LOCUST_MODE</span><span>\"</span></span> <span>=</span> <span><span>\"</span>worker<span>\"</span></span> ]]<span>;</span> <span>then</span></td></tr><tr><td id=\"file-run-sh-L13\" data-line-number=\"13\"></td><td id=\"file-run-sh-LC13\">LOCUS_OPTS=<span><span>\"</span><span>$LOCUS_OPTS</span> --worker --master-port=5557 --master-host=<span>$LOCUST_MASTER_URL</span><span>\"</span></span></td></tr><tr><td id=\"file-run-sh-L14\" data-line-number=\"14\"></td><td id=\"file-run-sh-LC14\"><span>fi</span></td></tr><tr><td id=\"file-run-sh-L15\" data-line-number=\"15\"></td><td id=\"file-run-sh-LC15\"></td></tr><tr><td id=\"file-run-sh-L16\" data-line-number=\"16\"></td><td id=\"file-run-sh-LC16\"><span>echo</span> <span><span>\"</span><span>$LOCUST</span> <span>$LOCUS_OPTS</span><span>\"</span></span></td></tr><tr><td id=\"file-run-sh-L17\" data-line-number=\"17\"></td><td id=\"file-run-sh-LC17\"><span>$LOCUST</span> <span>$LOCUS_OPTS</span></td></tr></tbody></table></div><p>ทำการสร้าง Docker image ให้เรียบร้อย<br>ซึ่งสามารถสร้างผ่าน Docker, Docker compose หรือ Swarm ได้เช่นเดียวกัน<br>แต่ในครั้งนี้จะทำการ deploy บน Kubernetes cluster</p><p><strong>ขั้นตอนที่ 3 สร้าง Manefest file สำหรับการ deploy Locust บน Kubernetes</strong></p><p>จะประกอบไปด้วยไฟล์ต่าง ๆ ดังนี้</p><ul><li>Deployment ของ master จำนวน 1 pod</li><li>Deployment ของ worker จำนวน 6 pod</li><li>Service สำหรับการ expose UI ของ Locust admin</li></ul><p><strong>Deployment ของ master จำนวน 1 pod</strong></p><div itemprop=\"text\" id=\"gist108932071\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-master-deploy-yml-L1\" data-line-number=\"1\"></td><td id=\"file-master-deploy-yml-LC1\"><span>apiVersion</span>: <span>apps/v1</span></td></tr><tr><td id=\"file-master-deploy-yml-L2\" data-line-number=\"2\"></td><td id=\"file-master-deploy-yml-LC2\"><span>kind</span>: <span>Deployment</span></td></tr><tr><td id=\"file-master-deploy-yml-L3\" data-line-number=\"3\"></td><td id=\"file-master-deploy-yml-LC3\"><span>metadata</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L4\" data-line-number=\"4\"></td><td id=\"file-master-deploy-yml-LC4\"><span>name</span>: <span>locust-master</span></td></tr><tr><td id=\"file-master-deploy-yml-L5\" data-line-number=\"5\"></td><td id=\"file-master-deploy-yml-LC5\"><span>labels</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L6\" data-line-number=\"6\"></td><td id=\"file-master-deploy-yml-LC6\"><span>name</span>: <span>locust-master</span></td></tr><tr><td id=\"file-master-deploy-yml-L7\" data-line-number=\"7\"></td><td id=\"file-master-deploy-yml-LC7\"><span>spec</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L8\" data-line-number=\"8\"></td><td id=\"file-master-deploy-yml-LC8\"><span>replicas</span>: <span>1</span></td></tr><tr><td id=\"file-master-deploy-yml-L9\" data-line-number=\"9\"></td><td id=\"file-master-deploy-yml-LC9\"><span>selector</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L10\" data-line-number=\"10\"></td><td id=\"file-master-deploy-yml-LC10\"><span>matchLabels</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L11\" data-line-number=\"11\"></td><td id=\"file-master-deploy-yml-LC11\"><span>app</span>: <span>locust-master</span></td></tr><tr><td id=\"file-master-deploy-yml-L12\" data-line-number=\"12\"></td><td id=\"file-master-deploy-yml-LC12\"><span>template</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L13\" data-line-number=\"13\"></td><td id=\"file-master-deploy-yml-LC13\"><span>metadata</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L14\" data-line-number=\"14\"></td><td id=\"file-master-deploy-yml-LC14\"><span>labels</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L15\" data-line-number=\"15\"></td><td id=\"file-master-deploy-yml-LC15\"><span>app</span>: <span>locust-master</span></td></tr><tr><td id=\"file-master-deploy-yml-L16\" data-line-number=\"16\"></td><td id=\"file-master-deploy-yml-LC16\"><span>spec</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L17\" data-line-number=\"17\"></td><td id=\"file-master-deploy-yml-LC17\"><span>containers</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L18\" data-line-number=\"18\"></td><td id=\"file-master-deploy-yml-LC18\">- <span>name</span>: <span>locust-master</span></td></tr><tr><td id=\"file-master-deploy-yml-L19\" data-line-number=\"19\"></td><td id=\"file-master-deploy-yml-LC19\"><span>image</span>: <span>sample:0.1</span></td></tr><tr><td id=\"file-master-deploy-yml-L20\" data-line-number=\"20\"></td><td id=\"file-master-deploy-yml-LC20\"><span>env</span>:</td></tr><tr><td id=\"file-master-deploy-yml-L21\" data-line-number=\"21\"></td><td id=\"file-master-deploy-yml-LC21\">- <span>name</span>: <span>LOCUST_MODE</span></td></tr><tr><td id=\"file-master-deploy-yml-L22\" data-line-number=\"22\"></td><td id=\"file-master-deploy-yml-LC22\"><span>value</span>: <span>master</span></td></tr><tr><td id=\"file-master-deploy-yml-L23\" data-line-number=\"23\"></td><td id=\"file-master-deploy-yml-LC23\">- <span>name</span>: <span>TARGET_HOST</span></td></tr><tr><td id=\"file-master-deploy-yml-L24\" data-line-number=\"24\"></td><td id=\"file-master-deploy-yml-LC24\"><span>value</span>: <span>http://&lt;target service&gt;</span></td></tr></tbody></table></div><p><strong>Deployment ของ worker จำนวน 6 pod</strong></p><div itemprop=\"text\" id=\"gist108932071\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-worker-deploy-yml-L1\" data-line-number=\"1\"></td><td id=\"file-worker-deploy-yml-LC1\"><span>apiVersion</span>: <span>apps/v1</span></td></tr><tr><td id=\"file-worker-deploy-yml-L2\" data-line-number=\"2\"></td><td id=\"file-worker-deploy-yml-LC2\"><span>kind</span>: <span>Deployment</span></td></tr><tr><td id=\"file-worker-deploy-yml-L3\" data-line-number=\"3\"></td><td id=\"file-worker-deploy-yml-LC3\"><span>metadata</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L4\" data-line-number=\"4\"></td><td id=\"file-worker-deploy-yml-LC4\"><span>name</span>: <span>locust-worker</span></td></tr><tr><td id=\"file-worker-deploy-yml-L5\" data-line-number=\"5\"></td><td id=\"file-worker-deploy-yml-LC5\"><span>labels</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L6\" data-line-number=\"6\"></td><td id=\"file-worker-deploy-yml-LC6\"><span>name</span>: <span>locust-worker</span></td></tr><tr><td id=\"file-worker-deploy-yml-L7\" data-line-number=\"7\"></td><td id=\"file-worker-deploy-yml-LC7\"><span>spec</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L8\" data-line-number=\"8\"></td><td id=\"file-worker-deploy-yml-LC8\"><span>replicas</span>: <span>6</span></td></tr><tr><td id=\"file-worker-deploy-yml-L9\" data-line-number=\"9\"></td><td id=\"file-worker-deploy-yml-LC9\"><span>selector</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L10\" data-line-number=\"10\"></td><td id=\"file-worker-deploy-yml-LC10\"><span>matchLabels</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L11\" data-line-number=\"11\"></td><td id=\"file-worker-deploy-yml-LC11\"><span>app</span>: <span>locust-worker</span></td></tr><tr><td id=\"file-worker-deploy-yml-L12\" data-line-number=\"12\"></td><td id=\"file-worker-deploy-yml-LC12\"><span>template</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L13\" data-line-number=\"13\"></td><td id=\"file-worker-deploy-yml-LC13\"><span>metadata</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L14\" data-line-number=\"14\"></td><td id=\"file-worker-deploy-yml-LC14\"><span>labels</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L15\" data-line-number=\"15\"></td><td id=\"file-worker-deploy-yml-LC15\"><span>app</span>: <span>locust-worker</span></td></tr><tr><td id=\"file-worker-deploy-yml-L16\" data-line-number=\"16\"></td><td id=\"file-worker-deploy-yml-LC16\"><span>spec</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L17\" data-line-number=\"17\"></td><td id=\"file-worker-deploy-yml-LC17\"><span>containers</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L18\" data-line-number=\"18\"></td><td id=\"file-worker-deploy-yml-LC18\">- <span>name</span>: <span>locust-worker</span></td></tr><tr><td id=\"file-worker-deploy-yml-L19\" data-line-number=\"19\"></td><td id=\"file-worker-deploy-yml-LC19\"><span>image</span>: <span>sample:0.1</span></td></tr><tr><td id=\"file-worker-deploy-yml-L20\" data-line-number=\"20\"></td><td id=\"file-worker-deploy-yml-LC20\"><span>env</span>:</td></tr><tr><td id=\"file-worker-deploy-yml-L21\" data-line-number=\"21\"></td><td id=\"file-worker-deploy-yml-LC21\">- <span>name</span>: <span>LOCUST_MODE</span></td></tr><tr><td id=\"file-worker-deploy-yml-L22\" data-line-number=\"22\"></td><td id=\"file-worker-deploy-yml-LC22\"><span>value</span>: <span>worker</span></td></tr><tr><td id=\"file-worker-deploy-yml-L23\" data-line-number=\"23\"></td><td id=\"file-worker-deploy-yml-LC23\">- <span>name</span>: <span>LOCUST_MASTER_URL</span></td></tr><tr><td id=\"file-worker-deploy-yml-L24\" data-line-number=\"24\"></td><td id=\"file-worker-deploy-yml-LC24\"><span>value</span>: <span>locust-master</span></td></tr><tr><td id=\"file-worker-deploy-yml-L25\" data-line-number=\"25\"></td><td id=\"file-worker-deploy-yml-LC25\">- <span>name</span>: <span>TARGET_HOST</span></td></tr><tr><td id=\"file-worker-deploy-yml-L26\" data-line-number=\"26\"></td><td id=\"file-worker-deploy-yml-LC26\"><span>value</span>: <span>http://&lt;target service&gt;</span></td></tr></tbody></table></div><p><strong>Service สำหรับการ expose UI ของ Locust admin</strong></p><div itemprop=\"text\" id=\"gist108932071\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-master-ui-service-yml-L1\" data-line-number=\"1\"></td><td id=\"file-master-ui-service-yml-LC1\"><span>kind</span>: <span>Service</span></td></tr><tr><td id=\"file-master-ui-service-yml-L2\" data-line-number=\"2\"></td><td id=\"file-master-ui-service-yml-LC2\"><span>apiVersion</span>: <span>v1</span></td></tr><tr><td id=\"file-master-ui-service-yml-L3\" data-line-number=\"3\"></td><td id=\"file-master-ui-service-yml-LC3\"><span>metadata</span>:</td></tr><tr><td id=\"file-master-ui-service-yml-L4\" data-line-number=\"4\"></td><td id=\"file-master-ui-service-yml-LC4\"><span>name</span>: <span>locust-master-ui</span></td></tr><tr><td id=\"file-master-ui-service-yml-L5\" data-line-number=\"5\"></td><td id=\"file-master-ui-service-yml-LC5\"><span>labels</span>:</td></tr><tr><td id=\"file-master-ui-service-yml-L6\" data-line-number=\"6\"></td><td id=\"file-master-ui-service-yml-LC6\"><span>app</span>: <span>locust-master</span></td></tr><tr><td id=\"file-master-ui-service-yml-L7\" data-line-number=\"7\"></td><td id=\"file-master-ui-service-yml-LC7\"><span>spec</span>:</td></tr><tr><td id=\"file-master-ui-service-yml-L8\" data-line-number=\"8\"></td><td id=\"file-master-ui-service-yml-LC8\"><span>ports</span>:</td></tr><tr><td id=\"file-master-ui-service-yml-L9\" data-line-number=\"9\"></td><td id=\"file-master-ui-service-yml-LC9\">- <span>port</span>: <span>8089</span></td></tr><tr><td id=\"file-master-ui-service-yml-L10\" data-line-number=\"10\"></td><td id=\"file-master-ui-service-yml-LC10\"><span>targetPort</span>: <span>loc-master-web</span></td></tr><tr><td id=\"file-master-ui-service-yml-L11\" data-line-number=\"11\"></td><td id=\"file-master-ui-service-yml-LC11\"><span>protocol</span>: <span>TCP</span></td></tr><tr><td id=\"file-master-ui-service-yml-L12\" data-line-number=\"12\"></td><td id=\"file-master-ui-service-yml-LC12\"><span>name</span>: <span>loc-master-web</span></td></tr><tr><td id=\"file-master-ui-service-yml-L13\" data-line-number=\"13\"></td><td id=\"file-master-ui-service-yml-LC13\"><span>nodePort</span>: <span>30627</span></td></tr><tr><td id=\"file-master-ui-service-yml-L14\" data-line-number=\"14\"></td><td id=\"file-master-ui-service-yml-LC14\"><span>selector</span>:</td></tr><tr><td id=\"file-master-ui-service-yml-L15\" data-line-number=\"15\"></td><td id=\"file-master-ui-service-yml-LC15\"><span>app</span>: <span>locust-master</span></td></tr><tr><td id=\"file-master-ui-service-yml-L16\" data-line-number=\"16\"></td><td id=\"file-master-ui-service-yml-LC16\"><span>type</span>: <span>NodePort</span></td></tr></tbody></table></div><p>จากนั้นทำการ deploy บน cluster เป็นอันเรียบร้อย<br>เข้าใช้งาน Locust ผ่าน Web user interface ที่ deploy</p><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/04/screenshot_0.12.1-1024x636.png\" alt=\"\" width=\"500\" height=\"310\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/04/screenshot_0.12.1-1024x636.png 1024w, https://www.somkiat.cc/wp-content/uploads/2021/04/screenshot_0.12.1-300x186.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/04/screenshot_0.12.1-768x477.png 768w, https://www.somkiat.cc/wp-content/uploads/2021/04/screenshot_0.12.1-1536x954.png 1536w, https://www.somkiat.cc/wp-content/uploads/2021/04/screenshot_0.12.1.png 2000w\" sizes=\"(max-width: 500px) 100vw, 500px\"></figure><p><br>ตัวอย่าง code เต็ม ๆ อยู่ที่ <a rel=\"noreferrer noopener\" href=\"https://github.com/up1/demo-locust-k8s\" target=\"_blank\">Github:Up1</a></p></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"3896353bf4b2c0aa3bfd9aec70573a3d4ebac08356610748a805fc7ea17df3a6","category":"Thai"}