{"title":"ทำความรู้จักกับ Dapr (Distributed application runtime)","link":"https://www.somkiat.cc/introduction-to-dapr/","date":1613725548000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header><div><p><time>February 19, 2021</time> <span><a href=\"https://www.somkiat.cc/category/architecture-2/\" rel=\"category tag\">Architecture</a></span></p></div></header><div><p>เห็นใน feed มีสิ่งที่น่าสนใจคือ <strong><a href=\"https://dapr.io/\" target=\"_blank\" rel=\"noreferrer noopener\">Dapr</a> (Distributed application runtime)<br></strong>คำถามแรกคือ มันคืออะไร<br>ถูกสร้างมาเพื่ออะไร<br>จึงทำการอ่านและสรุปไว้นิดหน่อย</p><p><strong>Distributed application runtime คืออะไร</strong></p><p>ระบบส่วนใหญ่จะทำงานแบบกระจายหรือ Distributed อยู่แล้ว<br>นั่นคือระบบต่าง ๆ กระจายทำงานของตนเองไป<br>แต่ว่าส่วนงานต่าง ๆ ต้องทำงานร่วมกัน<br>จึงจำเป็นต้องการตัวจัดการต่าง ๆ ดังนี้</p><ul><li><strong>State management</strong> ไม่ว่าจะอยู่ใน Data store ทั้ง RDBMS และ NoSQL เพื่อจัดการกับ state ต่าง ๆ ของระบบงาน</li><li><strong>การติดต่อสื่อสารระหว่าง system/service/component</strong> ซึ่งมีทั้งแบบ service-to-service และ event-driven (Pub/Sub)</li><li><strong>ในการติดต่อสื่อสารแบบ service-to-service</strong> จำเป็นต้องมีการจัดการเรื่อง retry, rate limit และ circuite breaking อีกด้วย เพื่อให้การทำงานของระบบน่าเชื่อถือมากขึ้น</li><li><strong>เรื่องของ Observability</strong> ทั้ง Distributed tracing, Health check, Logging และ Metrics</li><li><strong>จัดการ resource</strong> ต่าง ๆ เช่น Secret เป็นต้น</li></ul><p>นี่คือ สิ่งพื้นฐานสำหรับระบบที่ทำงานแบบกระจาย</p><p><strong>โดยท่ีทาง Microsoft ได้สร้าง open source project ชื่อว่า Dapr ออกมา</strong></p><p>เพื่อช่วยจัดการระบบงานตามความต้องการพื้นฐานที่อธิบายมา<br>เป็น implementation ของ Distributed application runtime นั่นเอง<br>ทำให้สามารถจัดการระบบงานในรูปแบบต่าง ๆ ใน runtime เดียวกันได้</p><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/02/building_blocks-1024x416.png\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/02/building_blocks-1024x416.png 1024w, https://www.somkiat.cc/wp-content/uploads/2021/02/building_blocks-300x122.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/02/building_blocks-768x312.png 768w, https://www.somkiat.cc/wp-content/uploads/2021/02/building_blocks-1536x624.png 1536w, https://www.somkiat.cc/wp-content/uploads/2021/02/building_blocks.png 1937w\" sizes=\"(max-width: 1024px) 100vw, 1024px\"></figure><p><strong>ในแต่ละส่วนการทำงานของ Dapr จะเป็นอิสระต่อกัน</strong></p><p>โดยที่ Dapr นั้นจะทำงานเหนือ infrastructure ซึ่งเป็นอะไรก็ได้<br>ทั้ง On-premise และ Cloud sytem<br>แสดงดังรูป</p><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/02/overview-1024x484.png\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/02/overview-1024x484.png 1024w, https://www.somkiat.cc/wp-content/uploads/2021/02/overview-300x142.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/02/overview-768x363.png 768w, https://www.somkiat.cc/wp-content/uploads/2021/02/overview.png 1222w\" sizes=\"(max-width: 1024px) 100vw, 1024px\"></figure><p><strong>อีกเรื่องคือ Dapr นั้นจะเน้นขึ้นไปใกล้ชิดกับ application มากกว่า Kubernetes</strong></p><p>ซึ่งสามารถนำ <strong>Dapr</strong> ไป run บน Kubernetes ได้<br>ด้วยการสร้าง sidecar container เข้ามาจัดการ Pods ต่าง ๆ<br>หรือจะ deploy แบบ standalone ก็ได้<br>ต่างจากกับพวก Service mesh เช่น Istio และ Linkerd<br>จะเน้นไปที่ <strong>network infrastructure layer </strong>มากกว่า<br>สำหรับการติดต่อสื่อสารระหว่าง service ผ่าน sidecar<br>แต่ก็ไม่ได้เพิ่ม feature ใด ๆ เข้ามาเลย</p><p><strong>ไปเจอรูปนี้มา น่าสนใจดี</strong></p><p>เกี่ยวกับ Dapr และ Service mesh</p><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/02/image-13-1024x377-1.png\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/02/image-13-1024x377-1.png 1024w, https://www.somkiat.cc/wp-content/uploads/2021/02/image-13-1024x377-1-300x110.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/02/image-13-1024x377-1-768x283.png 768w\" sizes=\"(max-width: 1024px) 100vw, 1024px\"><figcaption>https://blog.nillsf.com/index.php/2020/04/26/introduction-to-dapr/</figcaption></figure></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"e49d7b7293a89fe0cc722811344fb9132451d3364ba1474f0eb5a33fbfaffd99","category":"Thai"}