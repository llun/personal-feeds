{"title":"พื้นฐานของ YAML (101)","link":"https://www.somkiat.cc/basic-of-yaml-101/","date":1618025771000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header><div><p><time>April 10, 2021</time> <span><a href=\"https://www.somkiat.cc/category/programming/\" rel=\"category tag\">Programming</a>, <a href=\"https://www.somkiat.cc/category/tools/\" rel=\"category tag\">Tools</a></span></p></div></header><div><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/04/cat-yaml-1024x788.png\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/04/cat-yaml-1024x788.png 1024w, https://www.somkiat.cc/wp-content/uploads/2021/04/cat-yaml-300x231.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/04/cat-yaml-768x591.png 768w, https://www.somkiat.cc/wp-content/uploads/2021/04/cat-yaml.png 1238w\" sizes=\"(max-width: 1024px) 100vw, 1024px\"></figure><p><strong><a href=\"https://yaml.org/\" target=\"_blank\" rel=\"noreferrer noopener\">YAML</a></strong> เป็นอีกหนึ่งรูปแบบของข้อมูลที่ให้อ่านเข้าใจง่าย<br>ถูกใช้อย่างมากในโลกของ DevOps และ Container<br>ดังจะเห็นบ่อย ๆ ใน configuration ต่าง ๆ เช่น</p><ul><li>Docker compose</li><li>Manifest file ของ Kubernetes</li></ul><p>ดังนั้นมาทำความรู้จักและเข้าใจเกี่ยวกับ YAML กันหน่อย</p><p><strong>YAML (YAML Ain’t Markup Language) คืออะไร</strong></p><p>โดยเริ่มต้นย่อมาจาก Yet Another Markup Language<br>แต่เปลี่ยนมาเป็น <strong>YAML Ain’t Markup Language</strong><br>เพื่อทำให้ชัดเจนว่าแตกต่างจาก Markup Language นะ<br>เพราะว่ามันคือ <strong>Data Serialization</strong> Language</p><p>จะมีรูปแบบคล้ายกับ XML และ JSON แต่ใช้ syntax ที่น้อยหรือง่ายกว่า<br>เพื่อให้ใช้งานและดูแลได้ง่าย<br>และบอกว่าถูกออกแบบมาให้คนอ่านง่ายขึ้น<br><strong><em>จริงไหมนะ ?</em></strong></p><p><em>ปล. แต่ถ้าไม่ได้ใช้ Text Editor หรือ IDE ที่สนับสนุน YAML แล้ว<br>อาจจะทำให้คุณมีปัญหาได้ยกตัวอย่าง<br>เช่น เพียงแค่ผิด 1 space bar อาจจะใช้เวลาหาข้อผิดพลาดมากก็ได้</em></p><p><strong>ความสามารถของ YAML ที่แจ่ม ๆ คือ</strong></p><ul><li>มี Build-in data type มาให้</li><li>Multi-document support นั่นคือ สามารถรวมหลาย ๆ ไฟล์ อยู่ด้วยกัน โดยคั่นด้วย dash 3 ตัว (—) หรือ === ก็ได้</li><li>Build-in comment ด้วย # ได้เลย</li><li>มี Syntax ที่ผ่านเข้าใจง่าย โดยจะใช้ indentation เป็นหลัก เหมือนกับภาษา Python เลย โดยจะใช้ space แทน tab ไป เพื่อไม่ให้เกิดความสับสนต่อการใช้งาน</li><li>Auto data type หรือเราจะกำหนดเองก็ได้ สำหรับชนิดของข้อมูล</li></ul><p>ยกตัวอย่างเช่น</p><div itemprop=\"text\" id=\"gist108917103\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-1-yaml-L1\" data-line-number=\"1\"></td><td id=\"file-1-yaml-LC1\"><span>id</span>: <span>1</span></td></tr><tr><td id=\"file-1-yaml-L2\" data-line-number=\"2\"></td><td id=\"file-1-yaml-LC2\"><span>name</span>: <span>name 1</span></td></tr><tr><td id=\"file-1-yaml-L3\" data-line-number=\"3\"></td><td id=\"file-1-yaml-LC3\">---</td></tr><tr><td id=\"file-1-yaml-L4\" data-line-number=\"4\"></td><td id=\"file-1-yaml-LC4\"><span>id</span>: <span>2</span></td></tr><tr><td id=\"file-1-yaml-L5\" data-line-number=\"5\"></td><td id=\"file-1-yaml-LC5\"><span>name</span>: <span>name 2</span></td></tr><tr><td id=\"file-1-yaml-L6\" data-line-number=\"6\"></td><td id=\"file-1-yaml-LC6\"></td></tr><tr><td id=\"file-1-yaml-L7\" data-line-number=\"7\"></td><td id=\"file-1-yaml-LC7\"><span><span>#</span>comment</span></td></tr><tr><td id=\"file-1-yaml-L8\" data-line-number=\"8\"></td><td id=\"file-1-yaml-LC8\"></td></tr><tr><td id=\"file-1-yaml-L9\" data-line-number=\"9\"></td><td id=\"file-1-yaml-LC9\"><span>is-an-integer</span>: <span>!!int 11.11</span></td></tr><tr><td id=\"file-1-yaml-L10\" data-line-number=\"10\"></td><td id=\"file-1-yaml-LC10\"><span>is-a-string</span>: <span>!!str 12.3</span></td></tr><tr><td id=\"file-1-yaml-L11\" data-line-number=\"11\"></td><td id=\"file-1-yaml-LC11\"><span>is-a-boolean</span>: <span>!!bool yes</span></td></tr><tr><td id=\"file-1-yaml-L12\" data-line-number=\"12\"></td><td id=\"file-1-yaml-LC12\"></td></tr><tr><td id=\"file-1-yaml-L13\" data-line-number=\"13\"></td><td id=\"file-1-yaml-LC13\">---</td></tr><tr><td id=\"file-1-yaml-L14\" data-line-number=\"14\"></td><td id=\"file-1-yaml-LC14\"><span>integer</span>: <span>25</span></td></tr><tr><td id=\"file-1-yaml-L15\" data-line-number=\"15\"></td><td id=\"file-1-yaml-LC15\"><span>hex</span>: <span>0x12d4</span> <span><span>#</span>evaluates to 4820</span></td></tr><tr><td id=\"file-1-yaml-L16\" data-line-number=\"16\"></td><td id=\"file-1-yaml-LC16\"><span>octal</span>: <span>023332</span> <span><span>#</span>evaluates to 9946</span></td></tr><tr><td id=\"file-1-yaml-L17\" data-line-number=\"17\"></td><td id=\"file-1-yaml-LC17\"></td></tr><tr><td id=\"file-1-yaml-L18\" data-line-number=\"18\"></td><td id=\"file-1-yaml-LC18\"><span>float</span>: <span>25.0</span></td></tr><tr><td id=\"file-1-yaml-L19\" data-line-number=\"19\"></td><td id=\"file-1-yaml-LC19\"><span>exponent</span>: <span>12.3015e+05</span> <span><span>#</span>evaluates to 1230150.0</span></td></tr><tr><td id=\"file-1-yaml-L20\" data-line-number=\"20\"></td><td id=\"file-1-yaml-LC20\"></td></tr><tr><td id=\"file-1-yaml-L21\" data-line-number=\"21\"></td><td id=\"file-1-yaml-LC21\"><span>boolean</span>: <span>Yes</span></td></tr><tr><td id=\"file-1-yaml-L22\" data-line-number=\"22\"></td><td id=\"file-1-yaml-LC22\"><span>string</span>: <span><span>\"</span>25<span>\"</span></span></td></tr><tr><td id=\"file-1-yaml-L23\" data-line-number=\"23\"></td><td id=\"file-1-yaml-LC23\"></td></tr><tr><td id=\"file-1-yaml-L24\" data-line-number=\"24\"></td><td id=\"file-1-yaml-LC24\"><span>infinity</span>: <span>.inf</span> <span><span>#</span> evaluates to infinity</span></td></tr><tr><td id=\"file-1-yaml-L25\" data-line-number=\"25\"></td><td id=\"file-1-yaml-LC25\"><span>neginf</span>: <span>-.Inf</span> <span><span>#</span>evaluates to negative infinity</span></td></tr><tr><td id=\"file-1-yaml-L26\" data-line-number=\"26\"></td><td id=\"file-1-yaml-LC26\"><span>not</span>: <span>.NAN</span> <span><span>#</span> Not a Number</span></td></tr></tbody></table></div><p><strong>รูปแบบ หรือ symtax ของ YAML</strong></p><ul><li>เป็นข้อมูล key-value ซึ่งคั่นด้วย :</li><li>สำหรับ String data type ไม่ต้อง double quote</li><li>รูปแบบข้อมูลของ value แบบ string มีหลายรูปแบบ ทั้ง<ul><li>| สำหรับใส่บรรทัดใหม่ของแต่ละข้อมูล</li><li>&gt; สำหรับการแสดงเป็น paragraph หรือต่อเนื่องกัน</li></ul></li></ul><div itemprop=\"text\" id=\"gist108917103\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-2-yaml-L1\" data-line-number=\"1\"></td><td id=\"file-2-yaml-LC1\"><span>message_string</span>: <span>Hello World</span></td></tr><tr><td id=\"file-2-yaml-L2\" data-line-number=\"2\"></td><td id=\"file-2-yaml-LC2\"><span>data_01</span>: <span>|</span></td></tr><tr><td id=\"file-2-yaml-L3\" data-line-number=\"3\"></td><td id=\"file-2-yaml-LC3\"><span>These</span></td></tr><tr><td id=\"file-2-yaml-L4\" data-line-number=\"4\"></td><td id=\"file-2-yaml-LC4\"><span>Newlines</span></td></tr><tr><td id=\"file-2-yaml-L5\" data-line-number=\"5\"></td><td id=\"file-2-yaml-LC5\"><span></span><span>data_02</span>: <span>&gt;</span></td></tr><tr><td id=\"file-2-yaml-L6\" data-line-number=\"6\"></td><td id=\"file-2-yaml-LC6\"><span>This text is a</span></td></tr><tr><td id=\"file-2-yaml-L7\" data-line-number=\"7\"></td><td id=\"file-2-yaml-LC7\"><span>single paragraph</span></td></tr></tbody></table></div><p><strong>ต่อมาเก็บข้อมูลในรูปแบบของ sequence</strong></p><p>ซึ่งจะมีลักษณะคล้ายกับ array หรือ list<br>สำหรับเก็บหลาย ๆ ค่าใน key เดียว<br>ยกตัวอย่างเช่น</p><div itemprop=\"text\" id=\"gist108917103\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-3-yaml-L1\" data-line-number=\"1\"></td><td id=\"file-3-yaml-LC1\"><span>fruit</span>:</td></tr><tr><td id=\"file-3-yaml-L2\" data-line-number=\"2\"></td><td id=\"file-3-yaml-LC2\">- <span>apple</span></td></tr><tr><td id=\"file-3-yaml-L3\" data-line-number=\"3\"></td><td id=\"file-3-yaml-LC3\">- <span>banana</span></td></tr><tr><td id=\"file-3-yaml-L4\" data-line-number=\"4\"></td><td id=\"file-3-yaml-LC4\">- <span>orange</span></td></tr></tbody></table></div><p><strong>รูปแบบ dictionary ก็มี</strong></p><div itemprop=\"text\" id=\"gist108917103\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-4-yaml-L1\" data-line-number=\"1\"></td><td id=\"file-4-yaml-LC1\"><span>customers</span>:</td></tr><tr><td id=\"file-4-yaml-L2\" data-line-number=\"2\"></td><td id=\"file-4-yaml-LC2\">- <span>custome1</span>:</td></tr><tr><td id=\"file-4-yaml-L3\" data-line-number=\"3\"></td><td id=\"file-4-yaml-LC3\"><span>name</span>: <span>Cust 01</span></td></tr><tr><td id=\"file-4-yaml-L4\" data-line-number=\"4\"></td><td id=\"file-4-yaml-LC4\"><span>age</span>: <span>30</span></td></tr><tr><td id=\"file-4-yaml-L5\" data-line-number=\"5\"></td><td id=\"file-4-yaml-LC5\">- <span>custome2</span>:</td></tr><tr><td id=\"file-4-yaml-L6\" data-line-number=\"6\"></td><td id=\"file-4-yaml-LC6\"><span>name</span>: <span>Cust 02</span></td></tr><tr><td id=\"file-4-yaml-L7\" data-line-number=\"7\"></td><td id=\"file-4-yaml-LC7\"><span>age</span>: <span>25</span></td></tr></tbody></table></div><p><strong>แน่นอนว่ายังมีรูปแบบอื่น ๆ ให้ศึกษาและใช้งานอีก</strong><br>แต่นี่คือความรู้เบื้องต้นที่ควรต้องรู้จักไว้บ้าง<br>ยกตัวอย่างที่อาจจะเจอคือ Manifest file ของ Kubernetes เป็นต้น</p><div itemprop=\"text\" id=\"gist108917103\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-5-yaml-L1\" data-line-number=\"1\"></td><td id=\"file-5-yaml-LC1\"><span>kind</span>: <span>Service</span></td></tr><tr><td id=\"file-5-yaml-L2\" data-line-number=\"2\"></td><td id=\"file-5-yaml-LC2\"><span>metadata</span>:</td></tr><tr><td id=\"file-5-yaml-L3\" data-line-number=\"3\"></td><td id=\"file-5-yaml-LC3\"><span>name</span>: <span>web-app-svc</span></td></tr><tr><td id=\"file-5-yaml-L4\" data-line-number=\"4\"></td><td id=\"file-5-yaml-LC4\"><span>spec</span>:</td></tr><tr><td id=\"file-5-yaml-L5\" data-line-number=\"5\"></td><td id=\"file-5-yaml-LC5\"><span>type</span>: <span>NodePort</span></td></tr><tr><td id=\"file-5-yaml-L6\" data-line-number=\"6\"></td><td id=\"file-5-yaml-LC6\"><span>ports</span>:</td></tr><tr><td id=\"file-5-yaml-L7\" data-line-number=\"7\"></td><td id=\"file-5-yaml-LC7\">- <span>port</span>: <span>8080</span></td></tr><tr><td id=\"file-5-yaml-L8\" data-line-number=\"8\"></td><td id=\"file-5-yaml-LC8\"><span>targetPort</span>: <span>8080</span></td></tr><tr><td id=\"file-5-yaml-L9\" data-line-number=\"9\"></td><td id=\"file-5-yaml-LC9\"><span>nodePort</span>: <span>30012</span></td></tr><tr><td id=\"file-5-yaml-L10\" data-line-number=\"10\"></td><td id=\"file-5-yaml-LC10\"><span>selector</span>:</td></tr><tr><td id=\"file-5-yaml-L11\" data-line-number=\"11\"></td><td id=\"file-5-yaml-LC11\"><span>app</span>: <span>web-app</span></td></tr></tbody></table></div><p><strong><em>Keep learning ครับ</em></strong></p></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"b57d29dec77725678a70e6a1a95e2d95f398756ec81d2a06d75655152a978120","category":"Thai"}