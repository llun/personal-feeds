{"title":"ว่าง ๆ อ่านข้อมูลผู้ติดเชื้อ COVID-19 ของไทยจากภาพกันหน่อย","link":"https://www.somkiat.cc/working-with-pytesseract/","date":1622716401000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header></header><div><p>เนื่องจากปกติจะคอยดูและบันทึกข้อมูล<br>ของผู้ติดเชื้อ COVID 19 ของประเทศไทยรายวันไว้<br>ด้วยที่ข้อมูลเป็นรูปภาพเช่นจากไทย<a rel=\"noreferrer noopener\" href=\"https://www.facebook.com/thaimoph\" target=\"_blank\">รู้สู้โควิด</a><br>จึงต้องเก็บข้อมูลไว้แบบ manual<br>ทำไปทำมารู้สึกเบื่อและเหนื่อย<br>จึงลองเขียน program อ่านค่าข้อมูลจากรูปภาพด้วย Tesseract OCR กันหน่อย<br>มือใหม่หัดลองเขียนแบบมั่ว ๆ</p><p><strong>สิ่งที่ใช้ในการพัฒนาแบบง่าย ๆ</strong></p><ul><li>Python 3</li><li>Tesseract</li><li><a href=\"https://pypi.org/project/pytesseract/\" target=\"_blank\" rel=\"noreferrer noopener\">pytesseract</a> เป็น library สำหรับภาษา python ซึ่งเป็น wrapper นั่นเอง</li></ul><p>เพิ่มเติมคือ Tesseract เริ่มต้นไม่รู็จักภาษาไทย<br>จึงต้องทำการเพิ่มภาษาไทยเข้าไป โดย <a rel=\"noreferrer noopener\" href=\"https://tesseract-ocr.github.io/tessdoc/Data-Files\" target=\"_blank\">download ได้จากที่นี่</a><br>จากนั้นนำไปไว้ใน folder ที่เราต้องการ<br>ตัวอย่างผมทำการเก็บไว้ใน /testdata<br>จะมีทั้งภาษาไทยและภาษาอื่น ๆ ที่เราต้องการดึงออกมา</p><p><strong>ทดสอบการเพิ่มภาษาเข้าไปใน Tesseract</strong></p><p>ด้วยคำสั่งดังนี้</p><div itemprop=\"text\" id=\"gist109889924\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-1-txt-L1\" data-line-number=\"1\"></td><td id=\"file-1-txt-LC1\">$TESSDATA_PREFIX=$(pwd)/testdata tesseract --list-langs</td></tr><tr><td id=\"file-1-txt-L2\" data-line-number=\"2\"></td><td id=\"file-1-txt-LC2\">List of available languages (2):</td></tr><tr><td id=\"file-1-txt-L3\" data-line-number=\"3\"></td><td id=\"file-1-txt-LC3\">eng</td></tr><tr><td id=\"file-1-txt-L4\" data-line-number=\"4\"></td><td id=\"file-1-txt-LC4\">tha</td></tr></tbody></table></div><p><strong>จากนั้นเขียน code ง่าย ๆ เพื่ออ่านข้อมูล ด้วยภาษา Python</strong></p><div itemprop=\"text\" id=\"gist109889924\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-demo01-py-L1\" data-line-number=\"1\"></td><td id=\"file-demo01-py-LC1\"><span>//</span> อ่านข้อมูลจากไฟล์</td></tr><tr><td id=\"file-demo01-py-L2\" data-line-number=\"2\"></td><td id=\"file-demo01-py-LC2\"><span>res</span> <span>=</span> <span>pytesseract</span>.<span>image_to_string</span>(<span>Image</span>.<span>open</span>(<span>'image01.jpeg'</span>), <span>lang</span><span>=</span><span>'tha'</span>)</td></tr><tr><td id=\"file-demo01-py-L3\" data-line-number=\"3\"></td><td id=\"file-demo01-py-LC3\"></td></tr><tr><td id=\"file-demo01-py-L4\" data-line-number=\"4\"></td><td id=\"file-demo01-py-LC4\"><span>//</span> ลบค่าว่าง หรือ <span>space</span> ทิ้งไปจากข้อมูลที่ได้</td></tr><tr><td id=\"file-demo01-py-L5\" data-line-number=\"5\"></td><td id=\"file-demo01-py-LC5\"><span>new_res</span> <span>=</span> <span>\"\"</span>.<span>join</span>([<span>''</span> <span>if</span> <span>i</span> <span>==</span> <span>' '</span> <span>else</span> <span>i</span> <span>for</span> <span>i</span> <span>in</span> <span>res</span>])</td></tr><tr><td id=\"file-demo01-py-L6\" data-line-number=\"6\"></td><td id=\"file-demo01-py-LC6\"><span>print</span>(<span>new_res</span>)</td></tr></tbody></table></div><p>โดยข้อมูลรูปภาพที่ใช้คือ</p><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/06/196023411_321898309420079_608092567664541750_n-1024x1024.jpeg\" alt=\"\" width=\"471\" height=\"471\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/06/196023411_321898309420079_608092567664541750_n-1024x1024.jpeg 1024w, https://www.somkiat.cc/wp-content/uploads/2021/06/196023411_321898309420079_608092567664541750_n-300x300.jpeg 300w, https://www.somkiat.cc/wp-content/uploads/2021/06/196023411_321898309420079_608092567664541750_n-150x150.jpeg 150w, https://www.somkiat.cc/wp-content/uploads/2021/06/196023411_321898309420079_608092567664541750_n-768x768.jpeg 768w, https://www.somkiat.cc/wp-content/uploads/2021/06/196023411_321898309420079_608092567664541750_n-1536x1536.jpeg 1536w, https://www.somkiat.cc/wp-content/uploads/2021/06/196023411_321898309420079_608092567664541750_n.jpeg 2048w, https://www.somkiat.cc/wp-content/uploads/2021/06/196023411_321898309420079_608092567664541750_n-75x75.jpeg 75w\" sizes=\"(max-width: 471px) 100vw, 471px\"></figure><p><strong>ผลจากการ run program ได้ผลดังนี้</strong></p><div itemprop=\"text\" id=\"gist109889924\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-2-txt-L1\" data-line-number=\"1\"></td><td id=\"file-2-txt-LC1\">TESSDATA_PREFIX=$(pwd)/testdata python demo01.py</td></tr><tr><td id=\"file-2-txt-L2\" data-line-number=\"2\"></td><td id=\"file-2-txt-LC2\"></td></tr><tr><td id=\"file-2-txt-L3\" data-line-number=\"3\"></td><td id=\"file-2-txt-LC3\"></td></tr><tr><td id=\"file-2-txt-L4\" data-line-number=\"4\"></td><td id=\"file-2-txt-LC4\">©แารรรมนเชาวู่</td></tr><tr><td id=\"file-2-txt-L5\" data-line-number=\"5\"></td><td id=\"file-2-txt-LC5\">จา||๐9บ๒ตดชอตี้</td></tr><tr><td id=\"file-2-txt-L6\" data-line-number=\"6\"></td><td id=\"file-2-txt-LC6\">ปกนายน</td></tr><tr><td id=\"file-2-txt-L7\" data-line-number=\"7\"></td><td id=\"file-2-txt-LC7\"></td></tr><tr><td id=\"file-2-txt-L8\" data-line-number=\"8\"></td><td id=\"file-2-txt-LC8\">โลโลโ2นี2504</td></tr><tr><td id=\"file-2-txt-L9\" data-line-number=\"9\"></td><td id=\"file-2-txt-LC9\">เโรยน</td></tr><tr><td id=\"file-2-txt-L10\" data-line-number=\"10\"></td><td id=\"file-2-txt-LC10\"></td></tr><tr><td id=\"file-2-txt-L11\" data-line-number=\"11\"></td><td id=\"file-2-txt-LC11\"></td></tr><tr><td id=\"file-2-txt-L12\" data-line-number=\"12\"></td><td id=\"file-2-txt-LC12\"></td></tr><tr><td id=\"file-2-txt-L13\" data-line-number=\"13\"></td><td id=\"file-2-txt-LC13\">กรุงทพมหานคร680ราย|พชรบูรณ์2ราย</td></tr><tr><td id=\"file-2-txt-L14\" data-line-number=\"14\"></td><td id=\"file-2-txt-LC14\">กําแพง|พชร1รายลพบุรี10ราย</td></tr><tr><td id=\"file-2-txt-L15\" data-line-number=\"15\"></td><td id=\"file-2-txt-LC15\">ชัยนาท3รายสมุทรปราการ466ราย</td></tr><tr><td id=\"file-2-txt-L16\" data-line-number=\"16\"></td><td id=\"file-2-txt-LC16\">นครนายก4รายสมุทรสงคราม19ราย</td></tr><tr><td id=\"file-2-txt-L17\" data-line-number=\"17\"></td><td id=\"file-2-txt-LC17\">นครปฐม23รายสมุทรสาคร78ราย</td></tr><tr><td id=\"file-2-txt-L18\" data-line-number=\"18\"></td><td id=\"file-2-txt-LC18\">นครส๐รรค์14รายเ4ะา27ราย</td></tr><tr><td id=\"file-2-txt-L19\" data-line-number=\"19\"></td><td id=\"file-2-txt-LC19\">ชโข้1ข้โชะ62รายสิงห์บุรี0ราย</td></tr><tr><td id=\"file-2-txt-L20\" data-line-number=\"20\"></td><td id=\"file-2-txt-LC20\">ปทุมธานี่39รายสุโบกัย1ราย</td></tr><tr><td id=\"file-2-txt-L21\" data-line-number=\"21\"></td><td id=\"file-2-txt-LC21\">พระนครศรีอยุธยา33รายสุพรรณบุรี4§าย</td></tr><tr><td id=\"file-2-txt-L22\" data-line-number=\"22\"></td><td id=\"file-2-txt-LC22\">ปท้วะ]0รายอ่างทอง0ราย</td></tr><tr><td id=\"file-2-txt-L23\" data-line-number=\"23\"></td><td id=\"file-2-txt-LC23\">ป1แอ11รายอุทัยธานี1ราย</td></tr><tr><td id=\"file-2-txt-L24\" data-line-number=\"24\"></td><td id=\"file-2-txt-LC24\"></td></tr><tr><td id=\"file-2-txt-L25\" data-line-number=\"25\"></td><td id=\"file-2-txt-LC25\">เรือนจํา1.087ราย</td></tr><tr><td id=\"file-2-txt-L26\" data-line-number=\"26\"></td><td id=\"file-2-txt-LC26\"></td></tr><tr><td id=\"file-2-txt-L27\" data-line-number=\"27\"></td><td id=\"file-2-txt-LC27\">ที่มา:ะกรมคอบคุมโรคกระทรองสารารณนสุษง้อมูลณอันที่2มิกุนายน2564|วลา01:00น.@ศูนย์ง้อมูล6๐9ษ|๒-19@สายด่วน1111</td></tr></tbody></table></div><p>สังเกตได้ว่า ผลที่ได้ยังมีข้อผิดพลาดจาก font<br>ที่ไม่สามารถอ่านได้ แต่ก็ถือว่าลดงาน manual ไปได้พอสมควร<br>ไว้ต้องไปปรับปรุงเพิ่มเติม<br>แต่ก็ช่วยลดเวลาลงไปได้เยอะ<br>ลองดูครับ มือใหม่หัดเขียนไปเรื่อย ๆ</p></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"3663cbc6290d5999eb2fa15ff96f2a6b9abb5a230f21c8f03f35ccf665e93c8c","category":"Thai"}