{"title":"ทำความรู้จักกับ Spring Cloud Square","link":"https://www.somkiat.cc/spring-cloud-square/","date":1625551838000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header></header><div><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/07/spring-cloud-square.jpg\" alt=\"\" width=\"535\" height=\"332\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/07/spring-cloud-square.jpg 900w, https://www.somkiat.cc/wp-content/uploads/2021/07/spring-cloud-square-300x187.jpg 300w, https://www.somkiat.cc/wp-content/uploads/2021/07/spring-cloud-square-768x478.jpg 768w\" sizes=\"(max-width: 535px) 100vw, 535px\"></figure><p>ทางทีมพัฒนาจาก Spring.io เพิ่งปล่อย <strong><a rel=\"noreferrer noopener\" href=\"https://spring-cloud-incubator.github.io/spring-cloud-square/docs/current/reference/html/index.html\" target=\"_blank\">Spring Cloud Square M1 (Milestone 1)</a></strong><br>ออกมาให้ทดลองใช้งาน<br>โดยเป็นความสามารถใน project <a rel=\"noreferrer noopener\" href=\"https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#spring-cloud-loadbalancer\" target=\"_blank\"><strong>Spring Cloud LoadBalancer</strong> </a>(Client-side LoadBalancer )<br>ทำงานได้แบบทั้ง Round-Robin และ Random</p><p><strong>ซึ่งนำ library จาก square มา integrate ประกอบไปด้วย</strong></p><ul><li><a href=\"https://square.github.io/okhttp/\" target=\"_blank\" rel=\"noreferrer noopener\">OkHttp</a></li><li><a href=\"https://square.github.io/retrofit/\" target=\"_blank\" rel=\"noreferrer noopener\">Retrofit</a></li></ul><p>ทั้งคู่เป็น HTTP client library นั่นเอง<br>โดยสนับสนุนการทำงานแบบ non-blocking IO<br>นักพัฒนา Mobile app ด้วย Android น่าจะคุ้นเคยกันดี<br>ซึ่งลด code ที่ต้องเขียนมาเป็นแบบ declaration มากยิ่งขึ้น<br>อารมณ์คล้าย ๆ การใช้งาน Spring Data project</p><p><strong>แต่ก่อนหน้านี้ทางสาย Spring Developer น่าจะคุ้นเคยกับ</strong></p><ul><li>RestTeamplate</li><li>Feign หรือ OpenFeign</li></ul><p><strong>ตัวอย่างการใช้งานแบบง่าย ๆ</strong></p><div itemprop=\"text\" id=\"gist110502105\" translate=\"no\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-demo-java-L1\" data-line-number=\"1\"></td><td id=\"file-demo-java-LC1\"><span>@Configuration</span></td></tr><tr><td id=\"file-demo-java-L2\" data-line-number=\"2\"></td><td id=\"file-demo-java-LC2\"><span>@EnableRetrofitClients</span></td></tr><tr><td id=\"file-demo-java-L3\" data-line-number=\"3\"></td><td id=\"file-demo-java-LC3\"><span>class</span> <span>OkHttpClientConfig</span> {</td></tr><tr><td id=\"file-demo-java-L4\" data-line-number=\"4\"></td><td id=\"file-demo-java-LC4\"></td></tr><tr><td id=\"file-demo-java-L5\" data-line-number=\"5\"></td><td id=\"file-demo-java-LC5\"><span>@Bean</span></td></tr><tr><td id=\"file-demo-java-L6\" data-line-number=\"6\"></td><td id=\"file-demo-java-LC6\"><span>@LoadBalanced</span></td></tr><tr><td id=\"file-demo-java-L7\" data-line-number=\"7\"></td><td id=\"file-demo-java-LC7\"><span>public</span> <span>WebClient</span>.<span>Builder</span> <span>okHttpClientBuilder</span>() {</td></tr><tr><td id=\"file-demo-java-L8\" data-line-number=\"8\"></td><td id=\"file-demo-java-LC8\"><span>return</span> <span>WebClient</span><span>.</span>builder();</td></tr><tr><td id=\"file-demo-java-L9\" data-line-number=\"9\"></td><td id=\"file-demo-java-LC9\">}</td></tr><tr><td id=\"file-demo-java-L10\" data-line-number=\"10\"></td><td id=\"file-demo-java-LC10\">}</td></tr><tr><td id=\"file-demo-java-L11\" data-line-number=\"11\"></td><td id=\"file-demo-java-LC11\"></td></tr><tr><td id=\"file-demo-java-L12\" data-line-number=\"12\"></td><td id=\"file-demo-java-LC12\"></td></tr><tr><td id=\"file-demo-java-L13\" data-line-number=\"13\"></td><td id=\"file-demo-java-LC13\"><span>@RetrofitClient</span>(<span><span>\"</span>serviceId<span>\"</span></span>)</td></tr><tr><td id=\"file-demo-java-L14\" data-line-number=\"14\"></td><td id=\"file-demo-java-LC14\"><span>interface</span> <span>HelloClient</span> {</td></tr><tr><td id=\"file-demo-java-L15\" data-line-number=\"15\"></td><td id=\"file-demo-java-LC15\"><span>@GET</span>(<span><span>\"</span>/<span>\"</span></span>)</td></tr><tr><td id=\"file-demo-java-L16\" data-line-number=\"16\"></td><td id=\"file-demo-java-LC16\"><span>Mono&lt;<span>String</span>&gt;</span> <span>hello</span>();</td></tr><tr><td id=\"file-demo-java-L17\" data-line-number=\"17\"></td><td id=\"file-demo-java-LC17\">}</td></tr></tbody></table></div><p><strong>Reference Websites</strong></p><ul><li><a href=\"https://spring.io/blog/2021/04/13/introducing-spring-cloud-square\" target=\"_blank\" rel=\"noreferrer noopener\">Introduction to Spring Cloud Square</a></li></ul></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"a9643a9b2f5f6309596cde66fa096a9a106c2d553090698b6528e9d40d337b9e","category":"Thai"}