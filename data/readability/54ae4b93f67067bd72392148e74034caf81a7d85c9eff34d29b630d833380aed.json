{"title":"Announcing CDK for Terraform 0.1","link":"https://www.hashicorp.com/blog/announcing-cdk-for-terraform-0-1","date":1610726400000,"content":"<div id=\"readability-page-1\" class=\"page\"><div><section><p>In July 2020, we announced <a href=\"https://www.hashicorp.com/blog/cdk-for-terraform-enabling-python-and-typescript-support\">CDK for Terraform</a>, a project that allows users to define infrastructure using programming languages such as Python and TypeScript while leveraging the hundreds of providers and thousands of module definitions provided by HashiCorp Terraform and the Terraform ecosystem.</p><p>Today, we are pleased to announce the release of <a href=\"https://github.com/hashicorp/terraform-cdk/blob/master/CHANGELOG.md#010\">CDK for Terraform 0.1</a>. This release contains various enhancements and the addition of C# and Java programming language support from the previous releases. The additions also include features that make collaborating on CDK for Terraform projects easier using Terraform Cloud. This release brings us closer to a beta version of CDK for Terraform.</p><h2><a href=\"#support-for-c\" aria-label=\"support for c permalink\">»</a><a id=\"support-for-c\" aria-hidden=\"\"></a>Support for C#</h2><p>CDK for Terraform 0.1 includes C# support that allows users to write CDK constructs to define infrastructure in C# and generate Terraform JSON configuration to provision that infrastructure.</p><pre><code><span>using</span> <span>System</span><span>;</span>\n<span>using</span> <span>Constructs</span><span>;</span>\n<span>using</span> <span>Hashicorp<span>.</span>Cdktf</span><span>;</span>\n\n<span>using</span> <span>aws</span><span>;</span>\n\n\n<span>namespace</span> <span>MyCompany<span>.</span>MyApp</span>\n<span>{</span>\n    <span>class</span> <span>MyApp</span> <span>:</span> <span><span>TerraformStack</span></span>\n    <span>{</span>\n        <span>public</span> <span>MyApp</span><span>(</span><span>Construct</span> scope<span>,</span> <span><span>string</span></span> id<span>)</span> <span>:</span> <span>base</span><span>(</span>scope<span>,</span> id<span>)</span>\n        <span>{</span>\n            <span>new</span> <span>AwsProvider</span><span>(</span><span>this</span><span>,</span> <span>\"AWS\"</span><span>,</span> <span>new</span> <span>AwsProviderConfig</span> <span>{</span>\n              Region <span>=</span> <span>\"us-east-1\"</span>\n            <span>}</span><span>)</span><span>;</span>\n\n            <span>new</span> <span>Instance</span><span>(</span><span>this</span><span>,</span> <span>\"hello\"</span><span>,</span> <span>new</span> <span>InstanceConfig</span> <span>{</span>\n              Ami <span>=</span> <span>\"ami-2757f631\"</span><span>,</span>\n              InstanceType <span>=</span> <span>\"t2.micro\"</span>\n            <span>}</span><span>)</span><span>;</span>\n        <span>}</span>\n\n        <span>public</span> <span>static</span> <span><span>void</span></span> <span>Main</span><span>(</span><span><span>string</span><span>[</span><span>]</span></span> args<span>)</span>\n        <span>{</span>\n            <span>App</span> app <span>=</span> <span>new</span> <span>App</span><span>(</span><span>)</span><span>;</span>\n            <span>new</span> <span>MyApp</span><span>(</span>app<span>,</span> <span>\"hello-terraform\"</span><span>)</span><span>;</span>\n            app<span>.</span><span>Synth</span><span>(</span><span>)</span><span>;</span>\n            Console<span>.</span><span>WriteLine</span><span>(</span><span>\"App synth complete\"</span><span>)</span><span>;</span>\n        <span>}</span>\n    <span>}</span>\n<span>}</span>\n</code></pre><p>If you would like to use C# to generate Terraform configuration, check out the <a href=\"https://github.com/hashicorp/terraform-cdk/blob/master/docs/getting-started/csharp.md\">Getting Started guide for C#</a>.</p><h2><a href=\"#support-for-java\" aria-label=\"support for java permalink\">»</a><a id=\"support-for-java\" aria-hidden=\"\"></a>Support for Java</h2><p>Java support in CDK for Terraform allows users to write CDK constructs to define infrastructure in Java.</p><pre><code><span>package</span> <span>com<span>.</span>mycompany<span>.</span>app</span><span>;</span>\n\n<span>import</span> <span>software<span>.</span>constructs<span>.</span></span><span>Construct</span><span>;</span>\n\n<span>import</span> <span>com<span>.</span>hashicorp<span>.</span>cdktf<span>.</span></span><span>App</span><span>;</span>\n<span>import</span> <span>com<span>.</span>hashicorp<span>.</span>cdktf<span>.</span></span><span>TerraformStack</span><span>;</span>\n\n<span>import</span> <span>imports<span>.</span>aws<span>.</span></span><span>AwsProvider</span><span>;</span>\n<span>import</span> <span>imports<span>.</span>aws<span>.</span></span><span>Instance</span><span>;</span>\n\n<span>public</span> <span>class</span> <span>Main</span> <span>extends</span> <span>TerraformStack</span>\n<span>{</span>\n    <span>public</span> <span>Main</span><span>(</span><span>final</span> <span>Construct</span> scope<span>,</span> <span>final</span> <span>String</span> id<span>)</span> <span>{</span>\n        <span>super</span><span>(</span>scope<span>,</span> id<span>)</span><span>;</span>\n\n        <span>AwsProvider<span>.</span>Builder</span><span>.</span><span>create</span><span>(</span><span>this</span><span>,</span> <span>\"Aws\"</span><span>)</span>\n          <span>.</span><span>region</span><span>(</span><span>\"us-east-1\"</span><span>)</span>\n          <span>.</span><span>build</span><span>(</span><span>)</span><span>;</span>\n\n        <span>Instance<span>.</span>Builder</span><span>.</span><span>create</span><span>(</span><span>this</span><span>,</span> <span>\"hello\"</span><span>)</span>\n          <span>.</span><span>ami</span><span>(</span><span>\"ami-2757f631\"</span><span>)</span>\n          <span>.</span><span>instanceType</span><span>(</span><span>\"t2.micro\"</span><span>)</span>\n          <span>.</span><span>build</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>public</span> <span>static</span> <span>void</span> <span>main</span><span>(</span><span>String</span><span>[</span><span>]</span> args<span>)</span> <span>{</span>\n        <span>final</span> <span>App</span> app <span>=</span> <span>new</span> <span>App</span><span>(</span><span>)</span><span>;</span>\n        <span>new</span> <span>Main</span><span>(</span>app<span>,</span> <span>\"hello-terraform\"</span><span>)</span><span>;</span>\n        app<span>.</span><span>synth</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n</code></pre><p>If you would like to use Java to generate Terraform configuration, check out the <a href=\"https://github.com/hashicorp/terraform-cdk/blob/master/docs/getting-started/java.md\">Getting Started guide for Java</a>.</p><h2><a href=\"#enhanced-support-for-terraform-cloud\" aria-label=\"enhanced support for terraform cloud permalink\">»</a><a id=\"enhanced-support-for-terraform-cloud\" aria-hidden=\"\"></a>Enhanced Support for Terraform Cloud</h2><p>CDK for Terraform 0.1 adds enhanced support for <a href=\"https://terraform.io/cloud\">Terraform Cloud</a> that goes beyond the Terraform <a href=\"https://github.com/hashicorp/terraform-cdk/blob/master/docs/working-with-cdk-for-terraform/remote-backend.md#terraform-remote-backend\">Remote State</a> management features released as part of the project announcement in July. The project now supports <a href=\"https://www.terraform.io/docs/cloud/run/index.html\">Terraform Runs and Remote Operations</a> in Terraform Cloud. This is enabled by using the Terraform Cloud APIs and follows the workflow-enabled by the <a href=\"https://www.terraform.io/docs/cloud/run/api.html\">API-driven Runs</a> in Terraform Cloud.</p><p>The example uses a TypeScript CDK for Terraform project to showcase the remote operations in Terraform Cloud.</p><p>Let’s take a look at a CDK for Terraform application written in TypeScript that uses the <code>null</code> provider to create a <code>null</code> resource.</p><pre><code><span>import</span> <span><span>{</span> <span>Construct</span> <span>}</span></span> <span>from</span> <span>'constructs'</span><span>;</span>\n<span>import</span> <span><span>{</span> <span>App</span><span>,</span> <span>TerraformStack</span> <span>}</span></span> <span>from</span> <span>'cdktf'</span><span>;</span>\n<span>import</span> <span><span>*</span> <span>as</span> <span>NullProvider</span></span> <span>from</span> <span>'./.gen/providers/null'</span><span>;</span>\n\n<span>export</span> <span>class</span> <span><span>HelloTerraform</span></span> <span>extends</span> <span><span>TerraformStack</span></span> <span>{</span>\n <span>constructor</span><span>(</span>scope<span>:</span> <span>Construct</span><span>,</span> id<span>:</span> <span>string</span><span>)</span> <span>{</span>\n   <span>super</span><span>(</span>scope<span>,</span> id<span>)</span><span>;</span>\n\n   <span>new</span> <span><span>NullProvider</span></span><span>.</span><span><span>Resource</span></span><span>(</span><span>this</span><span>,</span> <span>'test'</span><span>,</span> <span>{</span><span>}</span><span>)</span>\n\n <span>}</span>\n<span>}</span>\n\n<span>const</span> app <span>=</span> <span>new</span> <span><span>App</span></span><span>(</span><span>)</span><span>;</span>\n<span>new</span> <span><span>HelloTerraform</span></span><span>(</span>app<span>,</span> <span>'hello-terraform'</span><span>)</span><span>;</span>\napp<span>.</span><span>synth</span><span>(</span><span>)</span><span>;</span>\n</code></pre><p>Currently, the application uses a local file to store Terraform state and all operations such as <code>cdktf diff</code>, <code>cdktf deploy</code>, and <code>cdktf destroy</code> run locally.</p><p>Let’s add the remote state backend to allow Terraform state storage and run operations remotely in Terraform Cloud. Note that the Terraform Cloud workspace will need to be created and configured by the user using the console, Terraform CLI, or the Terraform Cloud APIs.</p><pre><code><span>import</span> <span><span>{</span> <span>Construct</span> <span>}</span></span> <span>from</span> <span>'constructs'</span><span>;</span>\n<span>import</span> <span><span>{</span> <span>App</span><span>,</span> <span>TerraformStack</span><span>,</span> <span>RemoteBackend</span> <span>}</span></span> <span>from</span> <span>'cdktf'</span><span>;</span>\n<span>import</span> <span><span>*</span> <span>as</span> <span>NullProvider</span></span> <span>from</span> <span>'./.gen/providers/null'</span><span>;</span>\n\n<span>export</span> <span>class</span> <span><span>HelloTerraform</span></span> <span>extends</span> <span><span>TerraformStack</span></span> <span>{</span>\n <span>constructor</span><span>(</span>scope<span>:</span> <span>Construct</span><span>,</span> id<span>:</span> <span>string</span><span>)</span> <span>{</span>\n   <span>super</span><span>(</span>scope<span>,</span> id<span>)</span><span>;</span>\n\n   <span>new</span> <span><span>NullProvider</span></span><span>.</span><span><span>Resource</span></span><span>(</span><span>this</span><span>,</span> <span>'test'</span><span>,</span> <span>{</span><span>}</span><span>)</span>\n\n <span>}</span>\n<span>}</span>\n\n<span>const</span> app <span>=</span> <span>new</span> <span><span>App</span></span><span>(</span><span>)</span><span>;</span>\n<span>const</span> stack <span>=</span> <span>new</span> <span><span>HelloTerraform</span></span><span>(</span>app<span>,</span> <span>'hello-terraform'</span><span>)</span><span>;</span>\n<span>new</span> <span><span>RemoteBackend</span></span><span>(</span>stack<span>,</span> <span>{</span>\n hostname<span>:</span> <span>'app.terraform.io'</span><span>,</span>\n organization<span>:</span> <span>'mishra-tf-cloud-demo'</span><span>,</span>\n workspaces<span>:</span> <span>{</span>\n   name<span>:</span> <span>'hello-terraform'</span>\n <span>}</span>\n<span>}</span><span>)</span><span>;</span>\napp<span>.</span><span>synth</span><span>(</span><span>)</span><span>;</span>\n</code></pre><p>Run the <code>cdktf diff</code> command locally. That will run a <code>terraform plan</code> and generate a speculative plan using Terraform Cloud.</p><pre><code>$ cdktf <span>diff</span>\n</code></pre></section><section><picture data-testid=\"image-root\"><source type=\"image/webp\" srcset=\"https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" data-testid=\"webp-source\"><img src=\"https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=gif&amp;q=80\" srcset=\"https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1610668703-tfc-remote-backend-cdktf-diff.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" alt=\"Terraform Cloud remote backend CDK for Terraform Diff\" data-testid=\"img\"></picture></section><section><p>Next, deploy the application using <code>cdktf deploy</code>. That will run a <code>terraform apply</code> remotely using Terraform Cloud.</p><pre><code>$ cdktf deploy\n</code></pre></section><section><picture data-testid=\"image-root\"><source type=\"image/webp\" srcset=\"https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=webp&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" data-testid=\"webp-source\"><img src=\"https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=gif&amp;q=80\" srcset=\"https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=250 250w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=500 500w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=750 750w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=1000 1000w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=1500 1500w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=2000 2000w,https://www.datocms-assets.com/2885/1610668722-tfc-remote-backend-cdktf-deploy.gif?fit=max&amp;fm=gif&amp;q=80&amp;w=2500 2500w\" sizes=\"100vw\" alt=\"Terraform Cloud remote backend CDK for Terraform Deploy\" data-testid=\"img\"></picture></section><section><p>Using the remote state backend, you can run all Terraform operations that are run by CDK for Terraform remotely in Terraform Cloud.</p><h2><a href=\"#sebastian-korfmann-joins-hashicorp\" aria-label=\"sebastian korfmann joins hashicorp permalink\">»</a><a id=\"sebastian-korfmann-joins-hashicorp\" aria-hidden=\"\"></a>Sebastian Korfmann Joins HashiCorp</h2><p>Today we are pleased to announce that <a href=\"https://twitter.com/skorfmann\">Sebastian Korfmann</a>, maintainer of CDK for Terraform, has joined HashiCorp as an employee. Sebastian will continue to focus on building CDK for Terraform and collaborating with the community on various features, reviewing pull requests and interacting in the <a href=\"https://discuss.hashicorp.com/c/terraform-core/cdk-for-terraform/47\">HashiCorp Discuss forum</a>.</p><p>Having Sebastian work on the project full-time will give us an opportunity to keep moving towards our goal of releasing beta and stable versions of the project.</p><p>Interested in working on CDK for Terraform, we are <a href=\"https://www.hashicorp.com/job/2548521\">hiring</a>!</p><h2><a href=\"#available-now\" aria-label=\"available now permalink\">»</a><a id=\"available-now\" aria-hidden=\"\"></a>Available Now</h2><p>The 0.1 release is available for download today! Try it yourself with our step-by-step examples using <a href=\"https://learn.hashicorp.com/terraform/cdktf/cdktf-install\">a Docker quick start tutorial</a>, <a href=\"https://learn.hashicorp.com/terraform/cdktf/cdktf-build-ts\">AWS</a>, and <a href=\"https://github.com/hashicorp/terraform-cdk#examples\">other examples in Python, TypeScript, Java, and C#</a>.</p><p>Since CDK for Terraform is still in alpha, we would like to ask the community for feedback. If you would like to see a feature for the CDK for Terraform, please review existing GitHub <a href=\"https://github.com/hashicorp/terraform-cdk/issues\">issues</a> and upvote. If a feature does not exist in a GitHub issue, feel free to open a new issue. In addition to opening issues, you can contribute to the project by opening a pull request. Also, use the HashiCorp <a href=\"https://discuss.hashicorp.com/c/terraform-core/cdk-for-terraform/\">Discuss</a> forum to ask questions and share your feedback.</p></section></div></div>","author":"Anubhav Mishra","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"54ae4b93f67067bd72392148e74034caf81a7d85c9eff34d29b630d833380aed","category":"Tech"}