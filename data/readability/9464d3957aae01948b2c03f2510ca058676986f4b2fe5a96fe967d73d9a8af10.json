{"title":"สวัสดี Selenium Grid 4","link":"https://www.somkiat.cc/changes-from-selenium-grid-4/","date":1615549685000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header></header><div><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/03/selenium-4-banner-2000x1136-1-1024x582.png\" alt=\"\" width=\"548\" height=\"311\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/03/selenium-4-banner-2000x1136-1-1024x582.png 1024w, https://www.somkiat.cc/wp-content/uploads/2021/03/selenium-4-banner-2000x1136-1-300x170.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/03/selenium-4-banner-2000x1136-1-768x436.png 768w, https://www.somkiat.cc/wp-content/uploads/2021/03/selenium-4-banner-2000x1136-1-1536x872.png 1536w, https://www.somkiat.cc/wp-content/uploads/2021/03/selenium-4-banner-2000x1136-1.png 2000w\" sizes=\"(max-width: 548px) 100vw, 548px\"></figure><p><strong>Selenium Grid 4</strong> ใช้ W3C WebDriver protocol<br>จากเดิมที่ยังใช้งาน JSONWire protocol ไป<br>และยังได้เพิ่มเรื่องของการสนับสนุน DevTools protocol อีกด้วย<br>แต่ยังอยู่ในช่วงของ experiment feature เท่านั้น</p><p><strong>เรื่องที่น่ายินดีมาก ๆ คือ การปรับปรุงเอกสารให้อ่านง่าย เข้าใจได้ง่ายขึ้น</strong></p><p>แน่นอนว่า ชัดเจนและทำตามได้ดีกว่าเดิมเยอะ<br>ลองไปอ่านกัน <strong><a rel=\"noreferrer noopener\" href=\"https://www.selenium.dev/documentation/en/grid/grid_4/\" target=\"_blank\">Selenium Grid 4 Documentation</a></strong></p><p><strong>ใน version นี้แบ่ง component ออกจากกันชัดเจน</strong></p><p>ซึ่งประกอบไปด้วยดังนี้ (แต่ก็เพิ่มความซับซ้อนขึ้น)</p><ul><li>Router</li><li>Session queue</li><li>Session map</li><li>Distributor</li><li>Event bus</li><li>Nodes</li></ul><p><strong>แสดงดังรูป</strong></p><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/03/grid_4-1024x615.png\" alt=\"\" width=\"522\" height=\"313\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/03/grid_4-1024x615.png 1024w, https://www.somkiat.cc/wp-content/uploads/2021/03/grid_4-300x180.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/03/grid_4-768x461.png 768w, https://www.somkiat.cc/wp-content/uploads/2021/03/grid_4.png 1208w\" sizes=\"(max-width: 522px) 100vw, 522px\"></figure><p><strong>ในเรื่องของการติดตั้งทำได้ 4 แบบคือ</strong></p><ul><li><strong>แบบที่ 1</strong> คือ แยก Hub และ Node ตาม role ปกติ</li><li><strong>แบบที่ 2</strong> คือ standaone ซึ่งทำงานได้ทุก role ใน instance เดียว</li><li><strong>แบบที่ 3</strong> คือ distributed mode ซึ่งจะต้องสร้างแต่ละส่วนงานขึ้นมาตามลำดับ ก่อนที่จะทำการเพิ่ม node ดังนี้ Event bus, Session map, Session queue, distributor และ router นี่มันแนวคิด Microservices ชัด ๆ</li><li><strong>แบบที่ 4</strong> คือ การใช้งานผ่าน Docker</li></ul><p><strong>เปลี่ยนจาก Jetty มาเป็น Netty</strong></p><p>ส่งผลให้การทำงานรวดเร็วขึ้นแต่ก็ยังต้องการใช้ Memory 1 GB ต่อ 1 process เช่นเดิม<br>นั่นหมายความว่า ยังคงกิน resource เยอะเช่นเดิม</p><p><strong>เมื่อมี request ต่าง ๆ เข้ามา ยังคงเก็บเข้า queue ใน memory เช่นเดิม</strong></p><p>ดังนั้นถ้ามีปัญหาก็หายหมดทันที<br>ซึ่งเป็นอีกหนึ่งส่วนงานที่ยังทำให้ไม่เสถียรอย่างมาก<br>ถ้ามีการใช้งานพวก database หรือ messaging server เข้ามาช่วยจะทำให้เสถียรขึ้น<br>แต่ก็เพิ่มความซับซ้อนเช่นเดียวกัน</p><p><strong><em>เมื่อทำการเปลี่ยนแปลง configuration แล้ว จำเป็นต้อง restart เช่นเดิม</em></strong></p><p><strong>ถ้าต้องจัดการจำนวน instance เยอะ ๆ</strong></p><p>แนะนำให้ไปใช้ <strong><a rel=\"noreferrer noopener\" href=\"https://github.com/aerokube/selenoid\" target=\"_blank\">Selenoid (Selenium + Docker)</a></strong> เลยดีกว่า</p><p><strong>ไปดูอีก project ที่น่าสนใจคือ <a href=\"https://aerokube.com/moon/\" target=\"_blank\" rel=\"noreferrer noopener\">Moon</a></strong></p><p>มันคือ Selenium in Kubernetes<br>น่าจะเป็นอีกทางเลือกที่น่าสนใจ</p><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/03/Screen-Shot-2564-03-12-at-13.28.34-1024x463.png\" alt=\"\" width=\"485\" height=\"219\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/03/Screen-Shot-2564-03-12-at-13.28.34-1024x463.png 1024w, https://www.somkiat.cc/wp-content/uploads/2021/03/Screen-Shot-2564-03-12-at-13.28.34-300x136.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/03/Screen-Shot-2564-03-12-at-13.28.34-768x347.png 768w, https://www.somkiat.cc/wp-content/uploads/2021/03/Screen-Shot-2564-03-12-at-13.28.34-1536x694.png 1536w, https://www.somkiat.cc/wp-content/uploads/2021/03/Screen-Shot-2564-03-12-at-13.28.34-2048x926.png 2048w\" sizes=\"(max-width: 485px) 100vw, 485px\"><figcaption><a href=\"https://aerokube.com/\" target=\"_blank\" rel=\"noreferrer noopener\">https://aerokube.com/https://aerokube.com/</a></figcaption></figure></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"9464d3957aae01948b2c03f2510ca058676986f4b2fe5a96fe967d73d9a8af10","category":"Thai"}