{"title":"Release Notes for Safari Technology Preview 121","link":"https://webkit.org/blog/11555/release-notes-for-safari-technology-preview-121/","date":1614288397000,"content":"<div id=\"readability-page-1\" class=\"page\"><article id=\"post-11555\"><div><p><a href=\"https://webkit.org/blog/6017/introducing-safari-technology-preview/\">Safari Technology Preview</a> Release 121 is now <a href=\"https://webkit.org/downloads/\">available for download</a> for macOS Big Sur and macOS Catalina. If you already have Safari Technology Preview installed, you can update in the Software Update pane of System Preferences on macOS.</p><p>This release covers WebKit revisions <a href=\"https://trac.webkit.org/log?stop_rev=271794&amp;rev=272845&amp;limit=999\">271794-272845</a>.</p><h3>Web Inspector</h3><ul><li>Sources<ul><li>Collapsed blackboxed call frames in the Call Stack section (<a href=\"https://trac.webkit.org/changeset/272371/webkit/\">r272371</a>)</li></ul></li></ul><h3>CSS</h3><ul><li>Added support for <code>aspect-ratio</code> on grid items (<a href=\"https://trac.webkit.org/changeset/272307/webkit/\">r272307</a>)</li><li>Added support for logical variants of <code>scroll-padding</code> and <code>scroll-margin</code> (<a href=\"https://trac.webkit.org/changeset/272035/webkit/\">r272035</a>)</li><li>Added support for <code>color(a98-rgb ...)</code>, <code>color(prophoto-rgb ...)</code>, <code>color(rec2020 ...)</code>, <code>color(xyz ...)</code>, <code>hwb()</code> as part of CSS Color 4 (<a href=\"https://trac.webkit.org/changeset/271992/webkit/\">r271992</a>, <a href=\"https://trac.webkit.org/changeset/272125/webkit/\">r272125</a>, <a href=\"https://trac.webkit.org/changeset/272123/webkit/\">r272123</a>, <a href=\"https://trac.webkit.org/changeset/272311/webkit/\">r272311</a>, <a href=\"https://trac.webkit.org/changeset/272344/webkit/\">r272344</a>)</li><li>Added support for percentages when parsing <code>color(srgb ...)</code> and <code>color(display-p3 ...)</code> per-spec (<a href=\"https://trac.webkit.org/changeset/271866/webkit/\">r271866</a>)</li><li>Changed <code>sRGB</code> to <code>XYZ</code> conversion matrix values to match values in the latest spec (<a href=\"https://trac.webkit.org/changeset/272498/webkit/\">r272498</a>)</li><li>Fixed <code>max-height</code> percentages that are wrongly resolved for replaced grid items (<a href=\"https://trac.webkit.org/changeset/272309/webkit/\">r272309</a>)</li><li>Fixed grid item to fill the grid area for <code>stretch</code> or <code>normal</code> self alignment (<a href=\"https://trac.webkit.org/changeset/272308/webkit/\">r272308</a>)</li><li>Fixed animation of <code>rotate</code> or <code>scale</code> property to correctly account for static <code>translate</code> property (<a href=\"https://trac.webkit.org/changeset/272201/webkit/\">r272201</a>)</li><li>Fixed <code>font-stretch</code> to apply to <code>system-ui</code> (<a href=\"https://trac.webkit.org/changeset/272073/webkit/\">r272073</a>)</li><li>Fixed the nested grid container which has a replaced item with <code>max-height</code> incorrectly getting <code>width(0px)</code> (<a href=\"https://trac.webkit.org/changeset/272338/webkit/\">r272338</a>, <a href=\"https://trac.webkit.org/changeset/272711/webkit/\">r272711</a>)</li><li>Implemented <code>scroll-snap-stop</code> for scroll snapping (<a href=\"https://trac.webkit.org/changeset/272610/webkit/\">r272610</a>)</li><li>Handled <code>aspect-ratio: auto m/n</code> for replaced elements (<a href=\"https://trac.webkit.org/changeset/272360/webkit/\">r272360</a>)</li><li>Handled <code>min-width: auto</code> or <code>min-height: auto</code> for <code>aspect-ratio</code> (<a href=\"https://trac.webkit.org/changeset/272718/webkit/\">r272718</a>)</li><li>Handled zero <code>aspect-ratio</code> width or height (<a href=\"https://trac.webkit.org/changeset/271948/webkit/\">r271948</a>)</li><li>Made <code>auto &amp;&amp; &lt;ratio&gt;</code> use content <code>box-sizing</code> (<a href=\"https://trac.webkit.org/changeset/272569/webkit/\">r272569</a>)</li></ul><h3>GPU Process</h3><ul><li>Enabled audio capture in GPUProcess by default (<a href=\"https://trac.webkit.org/changeset/272735/webkit/\">r272735</a>)</li><li>Enabled audio capture for speech recognition in GPUProcess (<a href=\"https://trac.webkit.org/changeset/272434/webkit/\">r272434</a>)</li><li>Enabled GPU WebRTC codecs in GPUProcess by default on macOS (<a href=\"https://trac.webkit.org/changeset/272496/webkit/\">r272496</a>)</li><li>Enabled video capture in GPUProcess by default on macOS (<a href=\"https://trac.webkit.org/changeset/272810/webkit/\">r272810</a>)</li><li>Fixed <code>&lt;audio&gt;</code> not loading when the URL ends with <code>.php</code> causing some tests to time out (<a href=\"https://trac.webkit.org/changeset/272750/webkit/\">r272750</a>)</li><li>Fixed implementation of WebGL power preference and discrete/internal GPU selection with ANGLE (<a href=\"https://trac.webkit.org/changeset/271880/webkit/\">r271880</a>)</li></ul><h3>Media</h3><ul><li>Added intermediate volume icon states between “mute” and “max” (<a href=\"https://trac.webkit.org/changeset/272375/webkit/\">r272375</a>)</li><li>Changed media controls to show the total duration, only switching to time remaining when clicked (<a href=\"https://trac.webkit.org/changeset/272373/webkit/\">r272373</a>)</li><li>Changed MediaStream-backed video elements to not compute the mediaType based on track muted states (<a href=\"https://trac.webkit.org/changeset/272583/webkit/\">r272583</a>)</li><li>Connected MediaSession with MediaRemote and NowPlaying (<a href=\"https://trac.webkit.org/changeset/272445/webkit/\">r272445</a>, <a href=\"https://trac.webkit.org/changeset/272589/webkit/\">r272589</a>)</li><li>Fixed sound on YouTube after switching back to foreground (<a href=\"https://trac.webkit.org/changeset/272829/webkit/\">r272829</a>)</li><li>Fixed playback of WebM/Opus generated from Chrome MediaRecorder (<a href=\"https://trac.webkit.org/changeset/272822/webkit/\">r272822</a>)</li><li>Fixed Picture-in-Picture video pauses when scrolling on Twitter (<a href=\"https://trac.webkit.org/changeset/271870/webkit/\">r271870</a>)</li><li>Updated media controls time scrubber styles (<a href=\"https://trac.webkit.org/changeset/272352/webkit/\">r272352</a>, <a href=\"https://trac.webkit.org/r272438\">r272438</a>)</li><li>Updated media controls to use new SF Symbols (<a href=\"https://trac.webkit.org/changeset/272339/webkit/\">r272339</a>)</li></ul><h3>Web API</h3><ul><li>Fixed the return key binding for date inputs conflicting with pressing return to submit a form (<a href=\"https://trac.webkit.org/changeset/272495/webkit/\">r272495</a></li><li>Fixed selecting a date on <code>datetime-local</code> inputs unexpectedly adding second and millisecond fields (<a href=\"https://trac.webkit.org/changeset/272368/webkit/\">r272368</a>)</li><li>Fixed rendering a pattern with an SVG image (<a href=\"https://trac.webkit.org/changeset/272549/webkit/\">r272549</a>)</li><li>Forbid “|” in URL hosts (<a href=\"https://trac.webkit.org/changeset/271899/webkit/\">r271899</a>)</li><li>Reduced the overhead of HTMLDocumentParser in <code>innerHTML</code> setter (<a href=\"https://trac.webkit.org/changeset/272622/webkit/\">r272622</a>)</li></ul><h3>JavaScript</h3><ul><li>Added <code>@</code> in <code>Error#stack</code> even if function name does not exist (<a href=\"https://trac.webkit.org/changeset/272139/webkit/\">r272139</a>)</li><li>Added <code>Atomics</code> support for <code>BigInt64Array</code> and <code>BigUint64Array</code> behind a runtime flag (<code>JSC_useSharedArrayBuffer=1</code>) (<a href=\"https://trac.webkit.org/changeset/272341/webkit/\">r272341</a>)</li><li>Adjusted properties order of host JS functions (<a href=\"https://trac.webkit.org/changeset/272099/webkit/\">r272099</a>)</li><li>Changed <code>Object.assign</code> to throw for property creation on non-extensible <code>target</code> (<a href=\"https://trac.webkit.org/changeset/272411/webkit/\">r272411</a>)</li><li>Handled milliseconds in Date’s timezone without floating point rounding (<a href=\"https://trac.webkit.org/changeset/272127/webkit/\">r272127</a>)</li><li>Implemented <code>BigInt64Array</code> and <code>BigUint64Array</code> (<a href=\"https://trac.webkit.org/changeset/272170/webkit/\">r272170</a>, <a href=\"https://trac.webkit.org/changeset/272215/webkit/\">r272215</a>)</li><li>Implemented private methods behind flag (<code>JSC_usePrivateMethods=1</code>)(<a href=\"https://trac.webkit.org/changeset/272580/webkit/\">r272580</a>)</li><li>Made <code>JSON.parse</code> faster by using table for fast string parsing (<a href=\"https://trac.webkit.org/changeset/272570/webkit/\">r272570</a>)</li></ul><h3>WebAssembly</h3><ul><li>Implemented <code>WebAssembly.instantiateStreaming</code> and <code>WebAssembly.compileStreaming</code> (<a href=\"https://trac.webkit.org/changeset/271993/webkit/\">r271993</a>)</li><li>Implemented streaming compilation/instantiation for the Blob type (<a href=\"https://trac.webkit.org/changeset/272221/webkit/\">r272221</a>)</li><li>Updated <code>WebAssembly.Global</code> to support <code>Funcref</code> and <code>Externref</code> (<a href=\"https://trac.webkit.org/changeset/272071/webkit/\">r272071</a>, <a href=\"https://trac.webkit.org/changeset/272081/webkit/\">r272081</a>, <a href=\"https://trac.webkit.org/changeset/272119/webkit\">r272119</a>)</li><li>Enabled Wasm bulk-memory and reference-types (<a href=\"https://trac.webkit.org/changeset/272074/webkit/\">r272074</a>)</li></ul><h3>Accessibility</h3><ul><li>Exposed focusable elements even if the element or ancestor has <code>aria-hidden=true</code> (<a href=\"https://trac.webkit.org/changeset/272390/webkit/\">r272390</a>)</li><li>Fixed long narrow tables to not be made into data tables unnecessarily (<a href=\"https://trac.webkit.org/changeset/272024/webkit/\">r272024</a>)</li></ul><h3>Speech Recognition</h3><ul><li>Used the user media permission prompt for Speech Recognition (<a href=\"https://trac.webkit.org/changeset/272165/webkit/\">r272165</a>)</li></ul></div></article></div>","author":"","siteTitle":"Blog – WebKit","siteHash":"7f8dbea0b8f53db2e11a2faa08c6dca9954c01638d09a2ce585b77a60d10f7a1","entryHash":"3da48f7033059e1edc66bc0e109d4ec02e0c00a57d9a45663002d45b7cb481d2","category":"Tech"}