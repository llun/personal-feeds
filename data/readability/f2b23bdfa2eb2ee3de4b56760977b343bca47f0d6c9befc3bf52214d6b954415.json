{"title":"Puppeteer ต่างจาก Puppeteer-core อย่างไร ?","link":"https://www.somkiat.cc/puppeteer-vs-puppeteer-core/","date":1616998530000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header><div><p><time>March 29, 2021</time> <span><a href=\"https://www.somkiat.cc/category/programming/\" rel=\"category tag\">Programming</a>, <a href=\"https://www.somkiat.cc/category/tools/\" rel=\"category tag\">Tools</a></span></p></div></header><div><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/03/puppeteer-core.png\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/03/puppeteer-core.png 1000w, https://www.somkiat.cc/wp-content/uploads/2021/03/puppeteer-core-300x150.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/03/puppeteer-core-768x384.png 768w\" sizes=\"(max-width: 1000px) 100vw, 1000px\"></figure><p><strong>คำถาม</strong><br>ได้รับคำถามว่า <strong><a href=\"https://pptr.dev/#?product=Puppeteer&amp;version=main&amp;show=api-puppeteer-vs-puppeteer-core\">puppeteer กับ puppeteer-core</a></strong> มันต่างกันอย่างไร ?<br>เราควรใช้อะไรดี ?</p><p><strong>คำตอบ ผมก็ไม่รู้ ปกติใช้แต่ puppeteer !!</strong></p><p>ถ้าใครใช้ puppeteer ตั้งแต่ version แรก ๆ จนมาถึง 1.6.x นั้น<br>พบว่าทุกครั้งที่ใช้งาน จะทำการ download ทั้ง library และ Chromium ลงมาด้วย<br>ซึ่งมีขนาดใหญ่มาก ๆ<br>เป้าหมายเพื่อทำการควบคุมการทำงานของ browser ผ่าน DevTools Protocol<br>และทำงานแบบ Headless คือ<br>ไม่ทำการเปิดหน้า UI ของ browser ขึ้นมากวนใจ หรือ ขัดจังหวะการทำงาน<br></p><p><strong>ดังนั้นตั้งแต่ใน puppeteer 1.7 ขึ้นมา</strong></p><p>จึงทำการแยก <strong>puppeteer-core</strong> ออกมา เพื่อไม่ต้อง download พวก Chromium ลงมา<br>ทำให้มีเฉพาะ library ที่จำเป็นเท่านั้น<br>และไปใช้งาน browser ที่ทำการติดตั้งไว้แล้ว<br>ไม่ว่าจะเป็น Google Chrome หรือพวก Microsoft Edge เป็นต้น</p><p>การใช้งานก็เพียงติดตั้ง <strong>puppeteer-core</strong> แล้วใช้งานเลย<br>และเขียน code ดังนี้</p><div itemprop=\"text\" id=\"gist108711259\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-1-js-L1\" data-line-number=\"1\"></td><td id=\"file-1-js-LC1\"><span>const</span> <span>puppeteer</span> <span>=</span> <span>require</span><span>(</span><span>'puppeteer-core'</span><span>)</span><span>;</span></td></tr><tr><td id=\"file-1-js-L2\" data-line-number=\"2\"></td><td id=\"file-1-js-LC2\"></td></tr><tr><td id=\"file-1-js-L3\" data-line-number=\"3\"></td><td id=\"file-1-js-LC3\"><span>(</span><span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span></td></tr><tr><td id=\"file-1-js-L4\" data-line-number=\"4\"></td><td id=\"file-1-js-LC4\"><span>const</span> <span>browser</span> <span>=</span> <span>await</span> <span>puppeteer</span><span>.</span><span>launch</span><span>(</span><span>{</span></td></tr><tr><td id=\"file-1-js-L5\" data-line-number=\"5\"></td><td id=\"file-1-js-LC5\"><span>executablePath</span>: <span>'path to browser program'</span></td></tr><tr><td id=\"file-1-js-L6\" data-line-number=\"6\"></td><td id=\"file-1-js-LC6\"><span>}</span><span>)</span><span>;</span></td></tr><tr><td id=\"file-1-js-L7\" data-line-number=\"7\"></td><td id=\"file-1-js-LC7\"><span>const</span> <span>page</span> <span>=</span> <span>await</span> <span>browser</span><span>.</span><span>newPage</span><span>(</span><span>)</span><span>;</span></td></tr><tr><td id=\"file-1-js-L8\" data-line-number=\"8\"></td><td id=\"file-1-js-LC8\"><span>await</span> <span>page</span><span>.</span><span>goto</span><span>(</span><span>'https://www.google.com'</span><span>)</span><span>;</span></td></tr><tr><td id=\"file-1-js-L9\" data-line-number=\"9\"></td><td id=\"file-1-js-LC9\"><span>await</span> <span>page</span><span>.</span><span>screenshot</span><span>(</span><span>{</span><span>path</span>: <span>'image.png'</span><span>}</span><span>)</span><span>;</span></td></tr><tr><td id=\"file-1-js-L10\" data-line-number=\"10\"></td><td id=\"file-1-js-LC10\"></td></tr><tr><td id=\"file-1-js-L11\" data-line-number=\"11\"></td><td id=\"file-1-js-LC11\"><span>await</span> <span>browser</span><span>.</span><span>close</span><span>(</span><span>)</span><span>;</span></td></tr><tr><td id=\"file-1-js-L12\" data-line-number=\"12\"></td><td id=\"file-1-js-LC12\"><span>}</span><span>)</span><span>(</span><span>)</span><span>;</span></td></tr></tbody></table></div><p><strong>Reference Website</strong></p><ul><li><a href=\"https://docs.microsoft.com/en-us/microsoft-edge/puppeteer/\" target=\"_blank\" rel=\"noreferrer noopener\">Microsoft Edge</a></li></ul></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"f2b23bdfa2eb2ee3de4b56760977b343bca47f0d6c9befc3bf52214d6b954415","category":"Thai"}