{"title":"Release Notes for Safari Technology Preview 117","link":"https://webkit.org/blog/11364/release-notes-for-safari-technology-preview-117/","date":1607634959000,"content":"<div id=\"readability-page-1\" class=\"page\"><article id=\"post-11364\"><div><p><a href=\"https://webkit.org/blog/6017/introducing-safari-technology-preview/\">Safari Technology Preview</a> Release 117 is now <a href=\"https://webkit.org/downloads/\">available for download</a> for macOS Big Sur and macOS Catalina. If you already have Safari Technology Preview installed, you can update in the Software Update pane of System Preferences on macOS.</p><p>This release covers WebKit revisions <a href=\"https://trac.webkit.org/log?stop_rev=268651&amp;rev=270230&amp;limit=1579\">268651-270230</a>.</p><h3>Web Inspector</h3><ul><li>Elements<ul><li>Added the option to “Edit Breakpoint…” or “Reveal Breakpoint” in Sources Tab (<a href=\"https://trac.webkit.org/changeset/269337/webkit/\">r269337</a>)</li><li>Extra closing parenthesis added after var in styles panel (<a href=\"https://trac.webkit.org/changeset/269201/webkit/\">r269201</a>)</li></ul></li><li>Network<ul><li>Fixed background color of rows from previous session (<a href=\"https://trac.webkit.org/changeset/269127/webkit/\">r269127</a>)</li><li>Truncated data URLs in the Resources sidebar and Headers panel (<a href=\"https://trac.webkit.org/changeset/269075/webkit/\">r269075</a>)</li></ul></li><li>Search<ul><li>Prevented stealing focus from the search field when shown (<a href=\"https://trac.webkit.org/changeset/269074/webkit/\">r269074</a>)</li></ul></li><li>Sources<ul><li>Changed the default breakpoint action to be evaluate (<a href=\"https://trac.webkit.org/changeset/269547/webkit/\">r269547</a>)</li></ul></li><li>Console<ul><li>Exposed console command line API to breakpoint conditions and actions (<a href=\"https://trac.webkit.org/changeset/269023/webkit/\">r269023</a>, <a href=\"https://trac.webkit.org/changeset/269044/webkit/\">r269044</a>)</li><li>Fixed using Show JavaScript Console in an empty tab in Safari Technology Preview (<a href=\"https://trac.webkit.org/changeset/270060/webkit/\">r270060</a>)</li></ul></li><li>Other Changes<ul><li>Updated styles to use CSS properties with neutral directionality (<a href=\"https://trac.webkit.org/changeset/269166/webkit/\">r269166</a>)</li></ul></li></ul><h3>CSS</h3><ul><li>Added support for discrete animations of many CSS properties (<a href=\"https://trac.webkit.org/changeset/269812/webkit/\">r269812</a>, <a href=\"https://trac.webkit.org/changeset/269333/webkit/\">r269333</a>, <a href=\"https://trac.webkit.org/changeset/269357/webkit/\">r269357</a>, <a href=\"https://trac.webkit.org/changeset/268792/webkit/\">r268792</a>, <a href=\"https://trac.webkit.org/changeset/268718/webkit/\">r268718</a>, <a href=\"https://trac.webkit.org/changeset/268726/webkit/\">r268726</a>)</li><li>Added support for animations on more pseudo-elements (such as <code>:marker</code>) (<a href=\"https://trac.webkit.org/changeset/269813/webkit/\">r269813</a>)</li><li>Added support for more properties on <code>::marker</code> (<a href=\"https://trac.webkit.org/changeset/269774/webkit/\">r269774</a>)</li><li>Added parse support for <code>aspect-ratio</code> CSS property (<a href=\"https://trac.webkit.org/changeset/269641/webkit/\">r269641</a>)</li><li>Made CSS font shorthands parsable within a worker (<a href=\"https://trac.webkit.org/changeset/269957/webkit/\">r269957</a>)</li><li>Changed images as flex items to use the overridingLogicalHeight when defined to compute the logical width (<a href=\"https://trac.webkit.org/changeset/270073/webkit/\">r270073</a>)</li><li>Changed images as flex items to use the overridingLogicalWidth when defined to compute the logical height (<a href=\"https://trac.webkit.org/changeset/270116/webkit/\">r270116</a>)</li><li>Changed <code>background-size</code> to not accept negative values (<a href=\"https://trac.webkit.org/changeset/269237/webkit/\">r269237</a>)</li><li>Fixed issues with percentage height on grid item replaced children when the grid item has a scrollbar (<a href=\"https://trac.webkit.org/changeset/269717/webkit/\">r269717</a>)</li><li>Serialized aspect ratio with spaces around the slash (<a href=\"https://trac.webkit.org/changeset/268659/webkit/\">r268659</a>)</li></ul><h3>JavaScript</h3><ul><li>Enabled static public class fields (<a href=\"https://trac.webkit.org/changeset/269922/webkit/\">r269922</a>, <a href=\"https://trac.webkit.org/changeset/269939/webkit/\">r269939</a>)</li><li>Enabled static and instance private class fields (<a href=\"https://trac.webkit.org/changeset/270066/webkit/\">r270066</a>)</li><li>Implemented <code>Intl.DateTimeFormat.formatRangeToParts</code> (<a href=\"https://trac.webkit.org/changeset/269706/webkit/\">r269706</a>)</li><li>Implemented <code>Intl.ListFormat</code> (<a href=\"https://trac.webkit.org/changeset/268956/webkit/\">r268956</a>)</li><li>Aligned <code>%TypedArray%</code> behavior with recent spec adjustments (<a href=\"https://trac.webkit.org/changeset/269670/webkit/\">r269670</a>)</li><li>Implemented <code>@@species</code> support in <code>ArrayBuffer#slice</code> (<a href=\"https://trac.webkit.org/changeset/269574/webkit/\">r269574</a>)</li><li>Fixed <code>toLocaleDateString()</code> resolving incorrect date for some old dates (<a href=\"https://trac.webkit.org/changeset/269502/webkit/\">r269502</a>)</li><li>Resurrected <code>SharedArrayBuffer</code> and <code>Atomics</code> behind a flag (<code>JSC_useSharedArrayBuffer=1</code>) (<a href=\"https://trac.webkit.org/changeset/269531/webkit/\">r269531</a>)</li></ul><h3>WebAssembly</h3><ul><li>Added wasm atomics instructions, partially behind a flag (<code>JSC_useSharedArrayBuffer=1</code>) (<a href=\"https://trac.webkit.org/changeset/270208/webkit/\">r270208</a>)</li><li>Fixed opcodes for <code>table.grow</code> and <code>table.size</code> (<a href=\"https://trac.webkit.org/changeset/269790/webkit/\">r269790</a>)</li><li>Implemented shared <code>WebAssembly.Memory</code> behind a flag (<code>JSC_useSharedArrayBuffer=1</code>) (<a href=\"https://trac.webkit.org/changeset/269940/webkit/\">r269940</a>)</li><li>Implemented i32 <code>sign-extension-ops</code> (<a href=\"https://trac.webkit.org/changeset/269929/webkit/\">r269929</a>)</li></ul><h3>Web API</h3><ul><li>Added proper garbage collection to ResizeObserver (<a href=\"https://trac.webkit.org/changeset/268860/webkit/\">r268860</a>)</li><li>Changed <code>Worklet.addModule()</code> to reject promise with an AbortError when the network load fails (<a href=\"https://trac.webkit.org/changeset/270033/webkit/\">r270033</a>)</li><li>Changed event targets to be cleared after dispatch if the target pointed to a shadow tree (<a href=\"https://trac.webkit.org/changeset/269546/webkit/\">r269546</a>)</li><li>Changed WebSocket constructor to not throw when the port is blocked (<a href=\"https://trac.webkit.org/changeset/269459/webkit/\">r269459</a>)</li><li>Fixed toggling dark mode to update the scrollbar appearance in <code>overflow: scroll</code> elements (<a href=\"https://trac.webkit.org/changeset/269437/webkit/\">r269437</a>)</li><li>Fixed <code>navigator.clipboard</code> to be exposed on *.localhost pages (<a href=\"https://trac.webkit.org/changeset/269960/webkit/\">r269960</a>)</li><li>Fixed auto-focus of text input to not select text (<a href=\"https://trac.webkit.org/changeset/269587/webkit/\">r269587</a>)</li><li>Fixed Canvas <code>drawImage</code> to not raise an IndexSizeError on empty sources (<a href=\"https://trac.webkit.org/changeset/270126/webkit/\">r270126</a>)</li><li>Fixed <code>getIndexedParameter</code> indexing crash (<a href=\"https://trac.webkit.org/changeset/270160/webkit/\">r270160</a>)</li><li>Fixed text getting clobbered when assigning to <code>input.defaultValue</code> (<a href=\"https://trac.webkit.org/changeset/269528/webkit/\">r269528</a>)</li><li>Fixed <code>&lt;input disabled&gt;</code> to fire click events after dispatchEvent (<a href=\"https://trac.webkit.org/changeset/269452/webkit/\">r269452</a>)</li><li>Fixed the space between minute and meridiem fields in time inputs being too large (<a href=\"https://trac.webkit.org/changeset/270148/webkit/\">r270148</a>)</li><li>Fixed <code>window.event</code> to not be affected by nodes moving post-dispatch (<a href=\"https://trac.webkit.org/changeset/269500/webkit/\">r269500</a>)</li><li>Improved exception messages when <code>AudioContext.suspend()</code> / <code>resume()</code> promises are rejected (<a href=\"https://trac.webkit.org/changeset/268999/webkit/\">r268999</a>)</li><li>Promises returned by our DOM API have the caller’s global instead of the callee’s (<a href=\"https://trac.webkit.org/changeset/269227/webkit/\">r269227</a>)</li><li>Removed unneeded whitespace between content and <code>&lt;br&gt;</code> (<a href=\"https://trac.webkit.org/changeset/268958/webkit/\">r268958</a>, <a href=\"https://trac.webkit.org/changeset/269036/webkit/\">r269036</a>)</li></ul><h3>Speech Recognition</h3><ul><li>Added audio capture for SpeechRecognition (<a href=\"https://trac.webkit.org/changeset/270158/webkit/\">r270158</a>)</li><li>Added a default action for SpeechRecognition permission request (<a href=\"https://trac.webkit.org/changeset/269918/webkit/\">r269918</a>)</li><li>Implemented basic permission check for SpeechRecognition (<a href=\"https://trac.webkit.org/changeset/269810/webkit/\">r269810</a>)</li></ul><h3>WebRTC</h3><ul><li>Added WebRTC <code>SFrame</code> transform (<a href=\"https://trac.webkit.org/changeset/269830/webkit/\">r269830</a>)</li><li>Added infrastructure for WebRTC transforms (<a href=\"https://trac.webkit.org/changeset/269764/webkit/\">r269764</a>)</li><li>Added support for <code>RTCPeerConnection.onicecandidateerror</code> event (<a href=\"https://trac.webkit.org/changeset/270101/webkit/\">r270101</a>)</li><li>Added support for RTCRtpScriptTransform (<a href=\"https://trac.webkit.org/changeset/270107/webkit/\">r270107</a>)</li><li>Added support for VP9 Profile 2 (10-bit color) in WebRTC (<a href=\"https://trac.webkit.org/changeset/268971/webkit/\">r268971</a>)</li><li>Increased camera failing timer to 30 seconds (<a href=\"https://trac.webkit.org/changeset/269190/webkit/\">r269190</a>)</li></ul><h3>Media</h3><ul><li>A video element may fail to enter picture-in-picture from fullscreen (<a href=\"https://trac.webkit.org/changeset/268816/webkit/\">r268816</a>)</li><li>Added handling trackId changes across Initialization Segments in MSE (<a href=\"https://trac.webkit.org/changeset/269121/webkit/\">r269121</a>)</li><li>Added <code>addOutput()</code> and <code>removeOutput()</code> utility functions to AudioSummingJunction (<a href=\"https://trac.webkit.org/changeset/268820/webkit/\">r268820</a>)</li><li>Added skeleton implementation of Media Session API (<a href=\"https://trac.webkit.org/changeset/268735/webkit/\">r268735</a>)</li><li>Changed to ensure WebAudio API throws exceptions with useful error messages (<a href=\"https://trac.webkit.org/changeset/268812/webkit/\">r268812</a>)</li><li>Changed AudioBuffer channels to be neuterable and detachable (<a href=\"https://trac.webkit.org/changeset/269108/webkit/\">r269108</a>)</li><li>Fixed an infinite loop in sample eviction when duration is NaN in MSE (<a href=\"https://trac.webkit.org/changeset/270106/webkit/\">r270106</a>)</li><li>Fixed Web Audio continuing to play when navigating off the web page via an iframe (<a href=\"https://trac.webkit.org/changeset/268893/webkit/\">r268893</a>)</li><li>Fixed poor resampling quality when using AudioContext sampleRate parameter (<a href=\"https://trac.webkit.org/changeset/270141/webkit/\">r270141</a>, <a href=\"https://trac.webkit.org/changeset/270157/webkit/\">r270157</a>)</li><li>Fixed <code>AudioBuffer.getChannelData(x)</code> to keep returning the same JavaScript wrapper for a given channel (<a href=\"https://trac.webkit.org/changeset/269081/webkit/\">r269081</a>)</li><li>Fixed <code>AudioContext.suspend()</code> to not reject promise when the audio session is interrupted (<a href=\"https://trac.webkit.org/changeset/269039/webkit/\">r269039</a>)</li><li>Fixed transparent video poster image to keep element transparent once the first frame is preloaded (<a href=\"https://trac.webkit.org/changeset/269407/webkit/\">r269407</a>)</li><li>Fixed fetching an audio worklet module using a data URL (<a href=\"https://trac.webkit.org/changeset/270046/webkit/\">r270046</a>)</li><li>Improved the speed of audio and video element creation up to 50x faster (<a href=\"https://trac.webkit.org/changeset/269077/webkit/\">r269077</a>)</li></ul><h3>Web Animations</h3><ul><li>Ensured animation updates are not scheduled when there are no styles to update (<a href=\"https://trac.webkit.org/changeset/269963/webkit/\">r269963</a>)</li><li>Fixed <code>KeyframeEffect.pseudoElement</code> to return a valid string when targeting <code>::marker</code> or <code>::first-letter</code> (<a href=\"https://trac.webkit.org/changeset/269623/webkit/\">r269623</a>)</li><li>Fixed accelerated animations of individual transform properties to apply rotate before scale (<a href=\"https://trac.webkit.org/changeset/269527/webkit/\">r269527</a>)</li></ul><h3>Scrolling</h3><ul><li>Changed programmatic scroll to stop rubberbanding (<a href=\"https://trac.webkit.org/changeset/269373/webkit/\">r269373</a>, <a href=\"https://trac.webkit.org/changeset/269559/webkit/\">r269559</a>)</li><li></li><li>Changed to update scrolling geometry immediately for programmatic scrolls (<a href=\"https://trac.webkit.org/changeset/269558/webkit/\">r269558</a>)</li></ul><h3>Scroll Snap</h3><ul><li>Fixed scroll snap specified on <code>:root</code> (<a href=\"https://trac.webkit.org/changeset/269506/webkit/\">r269506</a>)</li><li>Fixed <code>scroll-snap</code> on root aligning to the body margin edge, not the viewport edge (<a href=\"https://trac.webkit.org/changeset/269622/webkit/\">r269622</a>)</li><li>Made axis in <code>scroll-snap-type</code> required (<a href=\"https://trac.webkit.org/changeset/268665/webkit/\">r268665</a>)</li><li>Made <code>scroll-margin</code> independent of scroll snapping and applied it when scrolling to anchors (<a href=\"https://trac.webkit.org/changeset/269144/webkit/\">r269144</a>)</li><li>Made <code>scroll-padding</code> independent of <code>scroll-snap</code> and have it affect scrollIntoView (<a href=\"https://trac.webkit.org/changeset/270023/webkit/\">r270023</a>)</li><li>Stopped creating implicit snap points at <code>scrollmin</code> and <code>scrollmax</code> (<a href=\"https://trac.webkit.org/changeset/268856/webkit/\">r268856</a>)</li></ul><h3>Private Click Measurement</h3><ul><li>Added persistence for pending ad clicks and attributions so they survive browser restart (<a href=\"https://trac.webkit.org/changeset/270136/webkit/\">r270136</a>)</li><li>Changed to accept ad click data when the link opens a new window (<a href=\"https://trac.webkit.org/changeset/269129/webkit/\">r269129</a>)</li><li>Changed attribute and JSON key names according to the W3C conversation (<a href=\"https://trac.webkit.org/changeset/269886/webkit/\">r269886</a>)</li><li>Switched to JSON report format (<a href=\"https://trac.webkit.org/changeset/269489/webkit/\">r269489</a>)</li></ul><h3>Web Driver</h3><ul><li>Added handling for surrogate pairs in keyboard actions (<a href=\"https://trac.webkit.org/changeset/269421/webkit/\">r269421</a>)</li><li>Added support for a sequence of character key presses (<a href=\"https://trac.webkit.org/changeset/269035/webkit/\">r269035</a>)</li><li>Added handling HTTPS configuration for WebDriver tests (<a href=\"https://trac.webkit.org/changeset/268723/webkit/\">r268723</a>)</li><li>Fixed elements in Shadow DOM incorrectly marked as stale (<a href=\"https://trac.webkit.org/changeset/268867/webkit/\">r268867</a>)</li></ul></div></article></div>","author":"","siteTitle":"Blog – WebKit","siteHash":"7f8dbea0b8f53db2e11a2faa08c6dca9954c01638d09a2ce585b77a60d10f7a1","entryHash":"da493a13d31ee156cdca6efff59c3f8ccab9b428aa3a08559f092e88f6aa1a2d","category":"Tech"}