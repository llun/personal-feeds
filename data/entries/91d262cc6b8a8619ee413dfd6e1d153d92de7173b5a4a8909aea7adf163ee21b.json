{"title":"มาใช้งาน Telepresence 2 กัน","link":"https://www.somkiat.cc/use-telepresence-2/","date":1615896235000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2021/03/telepresence-150x150.png\" class=\"attachment-post-thumbnail size-post-thumbnail wp-post-image\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/03/telepresence-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2021/03/telepresence-75x75.png 75w\" sizes=\"(max-width: 150px) 100vw, 150px\" /></p><!-- wp:paragraph -->\n<p>Telepresence คือเครื่องมือที่ช่วยให้ developer สามารถพัฒนาระบบงาน<br>ที่ deploy บน Kubernetes ได้ง่ายและสะดวกขึ้น<br>ตามแนวคิดคือ <strong>Fast Local development in Kubernetes</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph -->\n<p>นั่นคือ developer พัฒนาได้รวดเร็วยิ่งขึ้น<br>โดยไม่ต้องรอการ build, push image และสร้าง container เลย<br>ใช้งานร่วมกับ IDE ต่าง ๆ ได้ดี</p>\n<!-- /wp:paragraph -->\n\n\n<span id=\"more-21635\"></span>\n\n\n<!-- wp:paragraph -->\n<p><strong>ก่อนอื่น Telepresence 2.0 นั้น ทำการเขียนใหม่ด้วยภาษา Go</strong><br>นำความรู้ที่ได้จาก version 1 มาปรับปรุงให้ดีขึ้น<br>ทั้งการใช้งานที่ง่าย และประสิทธิภาพที่ดีขึ้น</p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>โครงสร้างของ Telepresence 2 เป็นดังภาพ</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:image {\"id\":21637,\"width\":544,\"height\":458,\"sizeSlug\":\"large\"} -->\n<figure class=\"wp-block-image size-large is-resized\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/03/telepresence-1024x863.png\" alt=\"\" class=\"wp-image-21637\" width=\"544\" height=\"458\"/></figure>\n<!-- /wp:image -->\n\n<!-- wp:paragraph {\"customFontSize\":25} -->\n<p style=\"font-size:25px\"><strong>เพื่อความเข้าใจที่ดีขึ้น มาลองใช้กันดีกว่า</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>ขั้นตอนที่ 1</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph -->\n<p>ทำการสร้างและ connect ไปยัง Kubernetes Cluster จริง ๆ <br>จากเครื่อง Local ของ developer ให้ได้<br>และทำการ deploy ระบบงานไปยัง Kubernetes Cluster แบบปกติก่อน</p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>ขั้นตอนที่ 2</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph -->\n<p>ทำการติดตั้ง <a rel=\"noreferrer noopener\" href=\"https://www.getambassador.io/docs/latest/telepresence/install/\" target=\"_blank\">TelePresence</a> บนเครื่อง<br>จากนั้นทำการ connect จาก TelePresence ไปยัง Kubernetes Cluster</p>\n<!-- /wp:paragraph -->\n\n<!-- wp:shortcode -->\n[gist id=\"b36dd4b75f86e53f07a715e9ee5d31da\" file=\"1.txt\"]\n<!-- /wp:shortcode -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>ขั้นตอนที่ 3</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph -->\n<p>จาก service ที่ทำงาน deploy Kubernetes Cluster แล้วนั้น<br>สามารถเข้าถึงได้โดยตรงด้วยชื่อและ port ของ service ต่าง ๆ จาก Local ของเราแล้ว</p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>ขั้นตอนที่ 4</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph -->\n<p>ทำการ intercept request ต่าง ๆ ที่จะส่งเข้ามายัง service ใน Kubernetes Cluster<br>โดยจะส่ง request นั้นมายัง Local ของเรานั่นเอง<br>ดังนั้นถ้าเราแก้ไข code ที่ Local ก็จะเห็นการเปลี่ยนแปลงนั้น ๆ เลย<br>ช่วยให้เราทดสอบได้ง่ายขึ้น <br>ก่อนจะไปเข้าสู่ขั้นตอน build, push และ deploy ต่อไป ถ้าทุกอย่างเรียบร้อย<br>ด้วยการใช้คำสั่งดังนี้</p>\n<!-- /wp:paragraph -->\n\n<!-- wp:shortcode -->\n[gist id=\"b36dd4b75f86e53f07a715e9ee5d31da\" file=\"2.txt\"]\n<!-- /wp:shortcode -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>ขั้นตอนที่ 5</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph -->\n<p>อีกอย่างเราสามารถเลือกที่จะ intercept เฉพาะบาง URL ที่เรียกใช้งานมาอีกด้วย<br>หรือเรียกว่า <strong>การ intercept จาก Preview URL</strong><br>โดยที่เราต้อง clear สิ่งที่ intercept ทั้งหมดก่อน<br>จากนั้นก็ intercept แบบปกติดังนี้</p>\n<!-- /wp:paragraph -->\n\n<!-- wp:shortcode -->\n[gist id=\"b36dd4b75f86e53f07a715e9ee5d31da\" file=\"3.txt\"]\n<!-- /wp:shortcode -->\n\n<!-- wp:paragraph -->\n<p>จากนั้นเรียกใช้งานผ่าน service ที่ทำการกำหนดไป<br>จะไปใช้งาน service ปลายทางจาก Local นั่นเอง</p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>จากการใช้งานพบว่า </strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph -->\n<p>ช่วยให้การพัฒนาระบบงาน<br>และ deploy บน Kubernetes มีความยืดหยุ่นมากขึ้น<br>ที่สำคัญสามารถทดสอบการทำงานระหว่าง service ได้ง่ายและรวดเร็วขึ้น<br>เพื่อให้เรารู้ผลการทำงานได้รวดเร็วขึ้น<br>มีผลดีต่อ productivity อย่างมาก</p>\n<!-- /wp:paragraph -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>มีตัวอย่างของ Application ที่พัฒนาด้วยภาษาต่าง ๆ ให้ลองใช้งาน</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:list -->\n<ul><li><a href=\"https://www.getambassador.io/docs/latest/telepresence/quick-start/qs-go/\" target=\"_blank\" rel=\"noreferrer noopener\">Go</a></li><li><a href=\"https://www.getambassador.io/docs/latest/telepresence/quick-start/qs-node/\" target=\"_blank\" rel=\"noreferrer noopener\">NodeJS</a></li><li><a href=\"https://www.getambassador.io/docs/latest/telepresence/quick-start/qs-python/\" target=\"_blank\" rel=\"noreferrer noopener\">Python with Flask</a></li><li><a href=\"https://www.getambassador.io/docs/latest/telepresence/quick-start/qs-python-fastapi/\" target=\"_blank\" rel=\"noreferrer noopener\">Python with FastAPI</a></li><li><a href=\"https://www.getambassador.io/docs/latest/telepresence/quick-start/qs-java/\" target=\"_blank\" rel=\"noreferrer noopener\">Java</a></li></ul>\n<!-- /wp:list -->\n\n<!-- wp:paragraph {\"fontSize\":\"medium\"} -->\n<p class=\"has-medium-font-size\"><strong>Reference Websites</strong></p>\n<!-- /wp:paragraph -->\n\n<!-- wp:list -->\n<ul><li><a href=\"https://blog.getambassador.io/whats-new-in-telepresence-2-dbdff62b82d5\" target=\"_blank\" rel=\"noreferrer noopener\">What's new in TelePresence 2 ?</a></li></ul>\n<!-- /wp:list -->\n\n<!-- wp:paragraph -->\n<p></p>\n<!-- /wp:paragraph -->","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"91d262cc6b8a8619ee413dfd6e1d153d92de7173b5a4a8909aea7adf163ee21b","category":"Thai"}