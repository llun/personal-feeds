{"title":"Dashboard as a Code ด้วย Grafonnet","link":"https://www.somkiat.cc/grafana-dashboard-as-a-code/","date":1626021119000,"content":"<p><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/07/grafana-dashboard-demo-150x150.png\" /></p>\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/07/grafana-dashboard-demo-1024x487.png\" /></figure>\n\n\n\n<p>ในการสร้าง Dashboard ใน Grafana นั้นต้องสร้างในรูปแบบของ JSON<br />ซึ่งมีตัวอย่าง และ community ให้เยอะมาก ๆ<br />แต่ปัญหาคือ การสร้าง ทดสอบ และดูแลไม่ง่ายเลย</p>\n\n\n\n<span></span>\n\n\n\n<p>จัดการ version ของ dashboard น่าจะอยู่ใน version control ด้วย<br />ควรต้องมีการ review code ของการสร้าง dashboard <br />สามารถ integrate กับระบบ CI/CDได้ง่าย<br />สามารถ reuse ในรูปแบบ component ได้</p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/07/GrafanaAsCode1-1024x576.jpg\" /><figcaption><a href=\"https://grafana.com/blog/2020/02/26/how-to-configure-grafana-as-code/\">https://grafana.com/blog/2020/02/26/how-to-configure-grafana-as-code/</a></figcaption></figure>\n\n\n\n<p><strong>แนวทางแก้ไขปัญหาของ Grafana dashboard ที่น่าสนใจ</strong>คือ </p>\n\n\n\n<p>Dashboard as a Code ด้วย <strong><a href=\"https://grafana.github.io/grafonnet-lib/\" target=\"_blank\">Grafonnet</a></strong><br />ซึ่งใช้งานร่วมกับ</p>\n\n\n\n<ul><li><strong>jsonnet</strong> คือ JSON template language</li><li><strong>grafonnet</strong> คือ Grafana jsonnet library</li></ul>\n\n\n\n<p>ทำการ<a href=\"https://grafana.github.io/grafonnet-lib/getting-started/\" target=\"_blank\">ติดตั้งตามเอกสาร</a><br />จากนั้นทำการสร้าง project ของ dashboard ดังนี้</p>\n\n\n\n<p><strong>ขั้นตอนที่ 1 สร้าง project</strong></p>\n\n\n\n[gist id=\"440da29b8e2dc31c3611398a9d02d61f\" file=\"1.txt\"]\n\n\n\n<p><strong>ขั้นตอนที่ 2 สร้างไฟล์ run.sh สำหรับส่งไฟล์ JSON ของ dashboard ไปยัง Grafana server</strong></p>\n\n\n\n[gist id=\"440da29b8e2dc31c3611398a9d02d61f\" file=\"run.sh\"]\n\n\n\n<p><strong>ขั้นตอนที่ 3 ทำการสร้างไฟล์ JSON จาก grafannet</strong></p>\n\n\n\n[gist id=\"440da29b8e2dc31c3611398a9d02d61f\" file=\"2.txt\"]\n\n\n\n<p><strong>จากนั้นไปดูผลการทำงานที่ Grafana server </strong><br />จะเจอ Dashboard ที่เราสร้างขึ้นมา ดังรูป</p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/07/Screen-Shot-2564-07-11-at-23.24.10-1024x564.png\" /></figure>\n\n\n\n<p>น่าจะสนกับ Dashboard as a Code มาก ๆ</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"73c95408f99599e9924095648620fb6a366e547ba47099a85c0fe8e1a562b5ce","category":"Thai"}