{"title":"[Docker] บันทึกการใช้งาน extra hosts และ fix ip ของ container","link":"https://www.somkiat.cc/docker-with-extra-hosts-and-fix-ip/","date":1621265952000,"content":"<p><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/Screen-Shot-2564-05-17-at-22.26.07-150x150.png\" /></p>\n<p><strong>ปัญหา</strong></p>\n\n\n\n<p>มี requirement น่าสนใจ เกี่ยวกับการใช้งาน Docker<br />เพื่อใช้ในการพัฒนาระบบงาน<br />โดยต้องการให้แต่ละ container มี IP ตามที่ต้องการ (Fix IP)<br />จากนั้นแต่ละ container จะติดต่อกันผ่าน domain ที่เรากำหนด<br />การทำงานแสดงดังรูป</p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/Screen-Shot-2564-05-17-at-22.26.07-1024x546.png\" /></figure>\n\n\n\n<span></span>\n\n\n\n<p><strong>วิธีการแก้ไขปัญหาตามที่ต้องการด้วย Docker + Docker compose</strong></p>\n\n\n\n<p>โดยใน docker และ docker compose นั้น<br />จะมีความสามารถในการกำหนด</p>\n\n\n\n<ul><li>Networks ทั้ง subnet mask และ ช่วงของ IP ที่ต้องการ</li><li>แต่ละ container ต้องกำหนด IP ที่ต้องการได้</li><li>พร้องกับเพิ่ม extra_hosts ของแต่ละ container มันคือการเพิ่ม mapping ในไฟล์ /etc/hosts ให้นั่นเอง</li></ul>\n\n\n\n<p><strong>ตัวอย่างของ Docker compose file ที่ใช้งานแบบง่าย ๆ เป็นดังนี้</strong></p>\n\n\n\n<p>โดยใช้งานร่วมกับ NGINX ไปด้วย</p>\n\n\n\n[gist id=\"ce9e104ee867d913f46ecb1bbb546dac\" file=\"docker-compose.yml\"]\n\n\n\n<p>เพียงเท่านี้ก็สามารถทำงานตามที่ต้องการได้แล้ว</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"fcd1082ea9555f1239920119e196e77ad932eafc03079f1ae9ce6a571d2b3fc1","category":"Thai"}