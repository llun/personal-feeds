{"title":"New – Amazon EMR on Amazon Elastic Kubernetes Service (EKS)","link":"https://aws.amazon.com/blogs/aws/new-amazon-emr-on-amazon-elastic-kubernetes-service-eks/","date":1607530617000,"content":"<p>Tens of thousands of customers use <a href=\"https://aws.amazon.com/emr\" title=\"\">Amazon EMR</a> to run big data analytics applications on frameworks such as <a href=\"https://aws.amazon.com/emr/features/spark/\">Apache Spark</a>, <a href=\"https://aws.amazon.com/emr/features/hive/\"> Hive</a>, <a href=\"https://aws.amazon.com/emr/features/hbase/\">HBase</a>, <a href=\"https://aws.amazon.com/blogs/big-data/use-apache-flink-on-amazon-emr/\">Flink</a>, <a href=\"https://aws.amazon.com/emr/features/hudi/\">Hudi</a>, and <a href=\"https://aws.amazon.com/emr/features/presto/\">Presto</a> at scale. EMR automates the provisioning and scaling of these frameworks and optimizes performance with a wide range of EC2 instance types to meet price and performance requirements. Customer are now consolidating compute pools across organizations using Kubernetes. Some customers who manage <a href=\"https://aws.amazon.com/emr/features/spark/\">Apache Spark</a> on <a href=\"https://aws.amazon.com/eks/\" title=\"\">Amazon Elastic Kubernetes Service (EKS)</a> themselves want to use EMR to eliminate the heavy lifting of installing and managing their frameworks and integrations with AWS services. In addition, they want to take advantage of the faster runtimes and development and debugging tools that EMR provides.</p> \n<p>Today, we are announcing the general availability of <a href=\"https://aws.amazon.com/emr/features/eks\">Amazon EMR on Amazon EKS</a>, a new deployment option in EMR that allows customers to automate the provisioning and management of open-source big data frameworks on EKS. With EMR on EKS, customers can now run Spark applications alongside other types of applications on the same EKS cluster to improve resource utilization and simplify infrastructure management.</p> \n<p>Customers can deploy EMR applications on the same EKS cluster as other types of applications, which allows them to share resources and standardize on a single solution for operating and managing all their applications. Customers get all the same EMR capabilities on EKS that they use on <a href=\"https://aws.amazon.com/ec2/\" title=\"\">EC2</a> today, such as access to the latest frameworks, performance optimized runtimes, EMR Notebooks for application development, and Spark user interface for debugging.</p> \n<p><img class=\"aligncenter size-full wp-image-45080\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2020/12/02/2020-emr-on-eks-diagram-1.png\" alt=\"\" width=\"2052\" height=\"658\" /></p> \n<p>Amazon EMR automatically packages the application into a container with the big data framework and provides pre-built connectors for integrating with other AWS services. EMR then deploys the application on the EKS cluster and manages logging and monitoring. With EMR on EKS, you can get <a href=\"https://aws.amazon.com/blogs/big-data/amazon-emr-introduces-emr-runtime-for-apache-spark/\">3x faster performance</a> using the performance-optimized Spark runtime included with EMR compared to standard Apache Spark on EKS.</p> \n<p><strong><u>Amazon EMR on EKS – Getting Started</u></strong><br /> After you have setup a EKS cluster using <a href=\"https://docs.aws.amazon.com/emr/latest/EMR-on-EKS-DevelopmentGuide/setting-up.html\">steps outlined in the development guide</a>, you simply register your existing EKS cluster with EMR using <a href=\"https://aws.amazon.com/cli/\">AWS Command Line Interface (CLI)</a>&nbsp;or <a href=\"https://aws.amazon.com/getting-started/tools-sdks/\">AWS SDK</a> to deploy your Spark application.</p> \n<p>For an example, here is a simple CLI command to register your EKS cluster.</p> \n<pre><code class=\"lang-bash\">$ aws emr-containers create-virtual-cluster \\\n          --name &lt;virtual_cluster_name&gt; \\\n          --container-provider '{\n             &quot;id&quot;: &quot;&lt;eks_cluster_name&gt;&quot;,\n             &quot;type&quot;: &quot;EKS&quot;,\n             &quot;info&quot;: {\n                 &quot;eksInfo&quot;: {\n                     &quot;namespace&quot;: &quot;&lt;namespace_name&gt;&quot;\n                 }\n             } \n         }'</code></pre> \n<p>In the <a href=\"https://console.aws.amazon.com/elasticmapreduce/home?#virtual-cluster-list:\">EMR Management console</a>, you can see it in the list of virtual clusters.</p> \n<p><img class=\"aligncenter size-full wp-image-45332\" style=\"border: 1px solid #000\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2020/12/05/2020-emr-on-eks-virtual-clusters.png\" alt=\"\" width=\"2618\" height=\"1351\" /></p> \n<p>When Amazon EKS clusters are registered, EMR workloads are deployed to Kubernetes nodes and pods to manage application execution and auto-scaling, and sets up managed endpoints so that you can connect notebooks and SQL clients. EMR builds and deploys a performance-optimized runtime for the open source frameworks used in analytics applications.</p> \n<p>You can simply start your Spark jobs.</p> \n<pre><code class=\"lang-bash\">$ aws emr-containers start-job-run \\\n          --name &lt;job_name&gt; \\\n          --virtual-cluster-id &lt;cluster_id&gt; \\\n          --execution-role-arn &lt;IAM_role_arn&gt; \\\n          --virtual-cluster-id &lt;cluster_id&gt; \\\n          --release-label &lt;&lt;emr_release_label&gt; \\\n          --job-driver '{\n            &quot;sparkSubmitJobDriver&quot;: {\n              &quot;entryPoint&quot;: &lt;entry_point_location&gt;,\n              &quot;entryPointArguments&quot;: [&quot;&lt;arguments_list&gt;&quot;],\n              &quot;sparkSubmitParameters&quot;: &lt;spark_parameters&gt;\n            }\n       }'</code></pre> \n<p>For example, you can run the <code>pi.py</code> Spark Python application as shown in the <a href=\"https://docs.aws.amazon.com/emr/latest/EMR-on-EKS-DevelopmentGuide/getting-started.html\">getting started guide</a>.</p> \n<p>To monitor and debug jobs, you can use inspect logs uploaded to your <a href=\"https://aws.amazon.com/cloudwatch/\" title=\"\">Amazon CloudWatch</a> and <a href=\"https://aws.amazon.com/s3/\" title=\"\">Amazon Simple Storage Service (S3)</a> location configured as part of <a href=\"https://docs.aws.amazon.com/emr/latest/EMR-on-EKS-DevelopmentGuide/monitoring.html\">monitoring and configuration</a>. You can also use the one-click experience from the console to launch the Spark History Server.</p> \n<p><strong><u>Integration with Amazon EMR Studio</u></strong><br /> Now you can submit analytics applications using <a href=\"https://aws.amazon.com/tools/\" title=\"\">AWS SDKs</a> and AWS CLI, Amazon EMR Studio notebooks, and workflow orchestration services like <a href=\"https://airflow.apache.org\">Apache Airflow</a>. We have developed a new Airflow Operator for Amazon EMR on EKS. You can use this connector with self-managed Airflow or by adding it to the Plugin Location with <a href=\"https://aws.amazon.com/blogs/aws/introducing-amazon-managed-workflows-for-apache-airflow-mwaa/\">Amazon Managed Workflows for Apache Airflow</a>.</p> \n<p>You can also use newly previewed <a href=\"https://aws.amazon.com/emr/features/studio/\">Amazon EMR Studio</a> to perform data analysis and data engineering tasks in a web-based integrated development environment (IDE). Amazon EMR Studio lets you submit notebook code to EMR clusters deployed on EKS using the Studio interface. After seting up one or more managed endpoints to which Studio users can attach a Workspace, EMR Studio can communicate with your virtual cluster.</p> \n<p><img class=\"aligncenter size-full wp-image-45338\" style=\"border: 1px solid #000\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2020/12/06/2020-emr-on-eks-emr-studio.png\" alt=\"\" width=\"2259\" height=\"1386\" /></p> \n<p>For EMR Studio preview, there is no additional cost when you create managed endpoints for virtual clusters. To learn more, visit a <a href=\"https://aws.amazon.com/blogs/big-data/amazon-emr-studio-preview-a-new-notebook-first-ide-experience-with-amazon-emr/\">blog post</a> and the <a href=\"https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-studio-create-eks-cluster.html\">guide document</a>.</p> \n<p><strong><u>Now Available</u></strong><br /> <a href=\"https://aws.amazon.com/emr/features/eks\">Amazon EMR on Amazon EKS</a> is available in <span title=\"\">US East (N. Virginia)</span>, <span title=\"\">US West (Oregon)</span>, and <span title=\"\">Europe (Ireland)</span> Regions. You can run EMR workloads in <a href=\"https://aws.amazon.com/fargate/\" title=\"AWS Fargate\">AWS Fargate</a> for EKS removing the need to provision and manage infrastructure for pods as a serverless option.</p> \n<p>To learn more, visit the <a href=\"https://docs.aws.amazon.com/emr/latest/EMR-on-EKS-DevelopmentGuide/emr-eks.html\">documentation</a>. Please send feedback to the <a href=\"https://forums.aws.amazon.com/forum.jspa?forumID=52\">AWS forum</a> for Amazon EMR or through your usual AWS support contacts.</p> \n<p><strong>Learn all the details about Amazon EMR on Amazon EKS and <a href=\"https://aws.amazon.com/emr/features/eks/?sc_detail=blog_cta1\">get started today</a>.</strong></p> \n<p>— <a href=\"https://twitter.com/channyun\">Channy</a>;</p>","author":"Channy Yun","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"088dd48d3934afb1b6c9f6ad12f42b24f88fa31aa9a9ceec7c3e0cb34a8130ef","category":"Tech"}