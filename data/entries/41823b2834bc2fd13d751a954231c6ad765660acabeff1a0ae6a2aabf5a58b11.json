{"title":"Default Tags in the Terraform AWS Provider","link":"https://www.hashicorp.com/blog/default-tags-in-the-terraform-aws-provider","date":1620835200000,"content":"<p>The HashiCorp <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest\">Terraform AWS Provider</a> contains over 700 resources to standardize your AWS infrastructure for configuration in accordance with best practices. One of the most common requests we’ve heard is for the ability to define default tags at the provider level of your Terraform configuration. We’re pleased to announce that as of <a href=\"https://github.com/hashicorp/terraform-provider-aws/blob/main/CHANGELOG.md#3380-april-30-2021\">v3.38.0</a> of the Terraform AWS provider, you are able to define default tags for all resources except Auto Scaling Groups.</p>\n<h2><a href=\"#using-default-tags\">»</a><a></a>Using Default Tags</h2>\n<p>You can set default tags in the provider block of your Terraform configuration. Any tags set here will also be inherited by dependent Terraform modules. Setting default tags at the provider level will not supersede tags set on individual resources as resource tags take precedence.</p>\n<p>In order to configure default tags you will need:</p>\n<ul>\n<li>Terraform 0.12 or later</li>\n<li>Terraform AWS Provider v3.38.0 or later</li>\n</ul><pre><code>provider \"aws\" {\n default_tags {\n   tags = {\n     Environment = \"Test\"\n     Owner       = \"TFProviders\"\n     Project     = \"Test\"\n   }\n }\n}\nresource \"aws_vpc\" \"example\" {\n cidr_block = \"10.1.0.0/16\"\n tags = {\n   Name = \"my-vpc-resource\"\n }\n}\nresource \"aws_subnet\" \"example\" {\n cidr_block = \"10.1.1.0/24\"\n vpc_id     = aws_vpc.test.id\n tags = {\n   Name = \"my-subnet-resource\"\n }\n}</code></pre><h2><a href=\"#default-tags-for-auto-scaling-groups\">»</a><a></a>Default Tags for Auto Scaling Groups</h2>\n<p>Due to the dynamic nature of Auto Scaling Groups, they behave differently than other AWS resources. In order to set default tags for AWS Auto Scaling Groups, we recommend a standard workaround: Set locals with the default tag and then merge that into the Auto Scaling group.</p><pre><code>variable \"default_tags\" {\n  default     = {\n\n     Environment = \"Test\"\n     Owner       = \"TFProviders\"\n     Project     = \"Test\"\n\n}\n  description = \"Default Tags for Auto Scaling Group\"\n  type        = map(string)\n}\n\nresource “aws_autoscaling_group”  \"example\" {\n  # ... other configuration ...\n  # This configuration combines some \"default\" tags with optionally provided additional tags\n\n  tags = merge(\n    var.default_tags,\n    {\n     Name = \"MyASG\"\n    },\n  )\n}</code></pre><h2><a href=\"#summary\">»</a><a></a>Summary</h2>\n<p>Default Tags are an easy way to standardize your Terraform Configuration in accordance with <a href=\"https://d1.awsstatic.com/whitepapers/aws-tagging-best-practices.pdf\">AWS’s recommended best practices</a>. Additionally, simplifying tag management throughout your configuration allows for more readable infrastructure as code.</p>\n<p>To learn more about the Terraform AWS provider visit the <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs\">provider documentation on the Terraform Registry</a>. For more information on this feature consult the <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs/guides/resource-tagging#propagating-tags-to-all-resources\">Terraform AWS Provider Tagging Guide</a> and the <a href=\"https://www.google.com/url?q=https://registry.terraform.io/providers/hashicorp/aws/latest/docs%23default_tags&amp;sa=D&amp;source=editors&amp;ust=1620675630876000&amp;usg=AOvVaw26EnQHkMXAMlqNuw0alQUY\">Default Tags feature documentation</a>.</p>\n<p>To report bugs and request enhancements for this feature, open an issue on the<a href=\"https://github.com/hashicorp/terraform-provider-aws\"> Terraform AWS Provider repository on GitHub</a>. We would love to hear your feedback.</p>","author":"Mary Cutrali","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"41823b2834bc2fd13d751a954231c6ad765660acabeff1a0ae6a2aabf5a58b11","category":"Tech"}