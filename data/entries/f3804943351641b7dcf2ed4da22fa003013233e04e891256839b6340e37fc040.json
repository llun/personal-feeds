{"title":"Setting Up A Currency Convertor With ExchangeRatesApi.io","link":"https://smashingmagazine.com/2021/06/currency-convertor-exchangeratesapi/","date":1622538000000,"content":"<p>Products and services are increasingly accessed and bought online. As we live in a global village, if we have an online shop, many of our visitors will quite likely be based on a different country than our own, and use a different currency than our own.</p>\n<p>If we want to provide a great user experience for them, to increase the chances of them buying our product, and coming back to the site, there is something very simple we can do: Display the price of the shopping items in their own currency. To achieve that, we can convert the price of the item from a base currency (say, EUR) to the visitor’s currency (say, CNY) using the exchange rate between the two currencies at that specific time.</p>\n<p>Currency exchange rates change constantly, on an hourly basis (and even faster). This means that we can’t have a pre-defined list of exchange rates stored in our application; these must be gathered in real-time. However, this is not a problem nowadays. Thanks to APIs providing currency exchange data, we can add a currency convertor to our online shops rather effortlessly.</p>\n<p>In this article, we will introduce <a href=\"https://exchangeratesapi.io/?utm_source=SmashingMagazine&amp;utm_medium=ThirdParties&amp;utm_content=Article-exchangerateapi\">ExchangeRatesApi.io</a>, a popular API solution providing data for current and historical exchange rates for 168 currencies.</p>\n<h3>What We Want To Achieve</h3>\n<p>Simply said, we want to do what Amazon is doing: Give the option to the user in our online shop to display the prices in a currency of their own choosing.</p>\n<p>When visiting a product page in <a href=\"https://www.amazon.co.uk\">amazon.co.uk</a>, we are presented the price in British pounds:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/95f0d5aa-70a0-4070-8bfc-f5442250e344/1-exchange-rate-api-bsa.png\" /></p>\n<p>But we can also see the price in a different currency, if we wish to. In the country/region settings, there is the option to change the currency:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/86ca0824-5fd4-419e-b61f-7f6c592bc47e/2-exchange-rate-api-bsa.png\" /></p>\n<p>After clicking on \"Change\", we are presented a select input, containing several pre-defined currencies. From among them, I’ve chosen the Euro:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b8b5a6b3-7d64-4407-8020-d7d333579141/3-exchange-rate-api-bsa.png\" /></p>\n<p>Finally, back on the product page, the price is displayed in euros:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/3ce4b3b1-3ae6-4371-8aaf-d72da3b69fc5/4-exchange-rate-api-bsa.png\" /></p>\n<p>Having access to exchange rate data via an API, we can implement this same functionality for our own online shops.</p>\n<h3>How Do We Do It</h3>\n<p>ExchangeRatesApi.io provides a REST API, offering the latest forex data for 168 currencies. It is always up-to-date, compiling the data from a broad base of commercial sources and banks around the world.</p>\n<p>After <a href=\"https://exchangeratesapi.io/pricing/\">signing up on their service</a> (<strong>tip:</strong> they have a <a href=\"https://manage.exchangeratesapi.io/signup/free\">free tier</a>), we will be assigned an API access key:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/8a322f1d-d9d2-40ec-8916-469c7da7b8f9/5-exchange-rate-api-bsa.png\" /></p>\n<p>We grab our API access key, and <a href=\"https://exchangeratesapi.io/documentation/#apikey\">append it to the endpoint</a>:</p>\n<pre><code>https://api.exchangeratesapi.io/v1/latest\n ?access_key=YOUR_API_KEY\n</code></pre>\n\n<p>To visualize the response, copy/paste the endpoint in your browser:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/19fddcd5-4ea2-4d69-9ff5-5e0d8b5e436e/6-exchange-rate-api-bsa.png\" /></p>\n<p>As can be possibly appreciated in the image above, the data for all 168 currencies has been retrieved. To narrow down the results to just a few of them, we <a href=\"https://exchangeratesapi.io/documentation/#specifysymbols\">indicate the currency codes via param</a> <a href=\"https://exchangeratesapi.io/documentation/#specifysymbols\"><code>symbols</code></a>.</p>\n<p>For instance, to retrieve data for the USD, British pound, Australian dollar, Japanese Yen and Chinese Yuan (compared against the Euro, which is the base currency by default), we execute this endpoint:</p>\n<pre><code>https://api.exchangeratesapi.io/v1/latest\n ?access_key=YOUR_API_KEY\n &amp;symbols=USD,GBP,AUD,JPY,CNY\n</code></pre>\n\n<p>The response is the following:</p>\n<pre><code>{\n \"success\": true,\n \"timestamp\": 1620904263,\n \"base\": \"EUR\",\n \"date\": \"2021-05-13\",\n \"rates\": {\n   \"USD\": 1.207197,\n   \"GBP\": 0.860689,\n   \"AUD\": 1.568196,\n   \"JPY\": 132.334216,\n   \"CNY\": 7.793428\n }\n}\n</code></pre>\n\n\n\n<h3>What Data Can We Retrieve</h3>\n<p>ExchangeRatesApi.io provides several REST endpoints, to fetch different sets of data. Depending on the subscribed plan, endpoints may or may not be available (their <a href=\"https://exchangeratesapi.io/pricing/\">pricing page</a> explains what features are covered by each tier).</p>\n<p>The endpoints indicated below must be attached to <code>https://api.exchangeratesapi.io/v1/</code> (eg: <code>latest</code> becomes <code>https://api.exchangeratesapi.io/v1/latest</code>), and added the <code>access_key</code> param with your API access key.</p>\n<h5>Latest rates</h5>\n<p>The <a href=\"https://exchangeratesapi.io/documentation/#latestrates\"><code>latest</code></a> <a href=\"https://exchangeratesapi.io/documentation/#latestrates\">endpoint</a> returns exchange rate data in real-time for all available currencies or for a specific set.</p>\n<h5>Currency Conversion</h5>\n<p>The <a href=\"https://exchangeratesapi.io/documentation/#convertcurrency\"><code>convert</code></a> <a href=\"https://exchangeratesapi.io/documentation/#convertcurrency\">endpoint</a> enables to convert an amount, from any currency to any other one within the supported 168 currencies.</p>\n<h5>Historical Rates</h5>\n<p>This endpoint <a href=\"https://exchangeratesapi.io/documentation/#historicalrates\">has the shape</a> <a href=\"https://exchangeratesapi.io/documentation/#historicalrates\"><code>YYYY-MM-DD</code></a> (such as <code>2021-03-20</code>), corresponding to the date for which we want to retrieve historical exchange rate information.</p>\n<h5>Time-Series Data</h5>\n<p>The <a href=\"https://exchangeratesapi.io/documentation/#timeseries\"><code>timeseries</code></a> <a href=\"https://exchangeratesapi.io/documentation/#timeseries\">endpoint</a> returns the daily historical data for exchange rates between two specified dates, for a maximum timeframe of 365 days.</p>\n<h5>Fluctuation Data</h5>\n<p>The <a href=\"https://exchangeratesapi.io/documentation/#fluctuation\"><code>fluctuation</code></a> <a href=\"https://exchangeratesapi.io/documentation/#fluctuation\">endpoint</a> returns the fluctuation data between specified dates, for a maximum timeframe of 365 days.</p>\n<h3>Fetching Data From The API</h3>\n<p>In order to implement the currency convertor, we can use the <code>convert</code> endpoint (for which we need be subscribed to the Basic tier):</p>\n<pre><code>https://api.exchangeratesapi.io/v1/convert\n ?access_key=YOUR_API_KEY\n &amp;from=GBP\n &amp;to=JPY\n &amp;amount=25\n</code></pre>\n\n<p>The response we will obtain looks like this:</p>\n<pre><code>{\n \"success\": true,\n \"query\": {\n   \"from\": \"GBP\",\n   \"to\": \"JPY\",\n   \"amount\": 25\n },\n \"info\": {\n   \"timestamp\": 1620904845,\n   \"rate\": 154.245331\n },\n \"historical\": \"\",\n \"date\": \"2021-05-14\",\n \"result\": 3856.079212\n}\n</code></pre>\n\n<p>Because the data is exposed via a REST API, we can conveniently retrieve it for any application based on any stack, whether it runs on the client-side or server-side, without having to install any additional library.</p>\n<h4>Client-Side</h4>\n<p>The following JavaScript code connects to the API, and prints the converted amount and exchange rate in the console:</p>\n<div>\n<pre><code>// Set endpoint and your access key\nconst access_key = 'YOUR_API_KEY';\nconst from = 'GPB';\nconst to = 'JPY';\nconst amount = 25;\nconst url = <code>https://api.exchangeratesapi.io/v1/convert?access_key=${ access_key }&amp;from=${ from }&amp;to=${ to }&amp;amount=${ amount }</code>;\n\n// Get the most recent exchange rates via the \"latest\" endpoint:\nfetch(url)\n .then(response =&gt; response.json())\n .then(data =&gt; {\n   // If our tier does not support the requested endpoint, we will get an error\n   if (data.error) {\n     console.log('Error:', data.error);\n     return;\n   }\n\n   // We got the data\n   console.log('Success:', data);\n   console.log('Converted amount: ' + data.result);\n   console.log('(Exchange rate: ' + data.info.rate + ')');\n })\n .catch((error) =&gt; {\n   console.error('Error:', error);\n });\n</code></pre>\n</div>\n\n<h4>Server-Side</h4>\n<p>The following code demonstrates how to connect to the REST API, and print the converted result, <a href=\"https://exchangeratesapi.io/documentation/#phpcurl\">within a PHP application</a>.</p>\n<p>The same procedure can be implemented for other languages:</p>\n<ul>\n<li>Define the endpoint URL, attach your API access key.</li>\n<li>Connect to the endpoint, retrieve its response in JSON format.</li>\n<li>Decode the JSON data into an object/array.</li>\n<li>Obtain the converted amount from under the <code>result</code> property.</li>\n</ul>\n<div>\n<pre><code>// Set endpoint and your access key\n$access_key = 'YOUR_API_KEY';\n$from = 'GBP';\n$to = 'JPY';\n$amount = 25;\n\n// Initialize CURL:\n$ch = curl_init(\"<a href=\"https://api.exchangeratesapi.io/v1/convert?access_key=${access_key}&amp;from=${from}&amp;to=${to}&amp;amount=${amount}&quot;)\">https://api.exchangeratesapi.io/v1/convert?access_key=${access_key}&amp;from=${from}&amp;to=${to}&amp;amount=${amount}\")</a>;\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n\n// Get the JSON data:\n$json = curl_exec($ch);\ncurl_close($ch);\n\n// Decode JSON response:\n$conversionResult = json_decode($json, true);\n\n// Access the converted amount\necho $conversionResult['result'];\n</code></pre>\n</div>\n\n<h3>Conclusion</h3>\n<p><a href=\"https://exchangeratesapi.io/?utm_source=SmashingMagazine&amp;utm_medium=ThirdParties&amp;utm_content=Article-exchangerateapi\">ExchangeRatesApi.io</a> was born as an <a href=\"https://github.com/exchangeratesapi/exchangeratesapi\">open-source project</a>, with the intention to provide current and historical foreign exchange rates published by the European Central Bank, and written in Python.</p>\n<p>If you’d like to incorporate currency conversion for your online shop, to emulate Amazon and provide a compelling user experience for your visitors, then you can download and install the open-source project.</p>\n<p>And you can also make it much easier: If you’d like to have your currency convertor working in no time, for any programming language, accessing always up-to-date data which includes a wide array of commercial sources, and from a super-fast API with uptime of nearly 100% (99.9% in the last 12 months), then check out <a href=\"https://exchangeratesapi.io/?utm_source=SmashingMagazine&amp;utm_medium=ThirdParties&amp;utm_content=Article-exchangerateapi\">ExchangeRatesApi.io</a>.</p>","author":"","siteTitle":"Articles on Smashing Magazine — For Web Designers And Developers","siteHash":"ab069ca35bf300e9db0da36f49701f66485a5b0d2db0471dfeee07cef6204939","entryHash":"f3804943351641b7dcf2ed4da22fa003013233e04e891256839b6340e37fc040","category":"Tech"}