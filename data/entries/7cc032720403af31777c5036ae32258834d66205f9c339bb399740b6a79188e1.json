{"title":"New – AWS Transfer Family support for Amazon Elastic File System","link":"https://aws.amazon.com/blogs/aws/new-aws-transfer-family-support-for-amazon-elastic-file-system/","date":1610038216000,"content":"<p><a href=\"https://aws.amazon.com/aws-transfer-family\" title=\"\">AWS Transfer Family</a> provides fully managed Secure File Transfer Protocol (SFTP), File Transfer Protocol (FTP) over TLS, and FTP support for <a href=\"https://aws.amazon.com/s3/\" title=\"\">Amazon Simple Storage Service (S3)</a>, enabling you to seamlessly migrate your file transfer workflows to AWS.</p> \n<p>Today I am happy to announce <span title=\"\">AWS Transfer Family</span> now also supports file transfers to <a href=\"https://aws.amazon.com/efs\" title=\"\">Amazon Elastic File System (Amazon EFS)</a> file systems as well as Amazon S3. This feature enables you to easily and securely provide your business partners access to files stored in Amazon EFS file systems. With this launch, you now have the option to store the transferred files in a fully managed file system and reduce your operational burden, while preserving your existing workflows that use SFTP, FTPS, or FTP protocols.</p> \n<p>Amazon EFS file systems are accessible within your <a href=\"https://aws.amazon.com/vpc/\" title=\"\">Amazon Virtual Private Cloud (VPC)</a> and VPC connected environments. With this launch, you can securely enable third parties such as your vendors, partners, or customers to access your files over the supported protocols at scale globally, without needing to manage any infrastructure. When you select Amazon EFS as the data store for your <span title=\"\">AWS Transfer Family</span> server, the transferred files are readily available to your business-critical applications running on <a href=\"https://aws.amazon.com/ec2/\" title=\"\">Amazon Elastic Compute Cloud (EC2)</a>, as well as to containerized and serverless applications run using AWS services such as <a href=\"https://aws.amazon.com/ecs/\" title=\"\">Amazon Elastic Container Service (ECS)</a>, <a href=\"https://aws.amazon.com/eks/\" title=\"\">Amazon Elastic Kubernetes Service (EKS)</a>, <a href=\"https://aws.amazon.com/fargate/\" title=\"AWS Fargate\">AWS Fargate</a>, and <a href=\"https://aws.amazon.com/lambda/\" title=\"\">AWS Lambda</a>.</p> \n<p><strong><u>Using Amazon EFS – Getting Started</u></strong><br /> To get started in your existing Amazon EFS file system, make sure the POSIX identities you assign for your SFTP/FTPS/FTP users are owners of the files and directories you want to provide access to. You will provide access to that Amazon EFS file system through a <a href=\"https://docs.aws.amazon.com/transfer/latest/userguide/requirements-roles.html\">resource-based policy</a>. Your role also needs to establish a trust relationship. This trust relationship allows <span title=\"\">AWS Transfer Family</span> to assume the <a href=\"https://aws.amazon.com/iam/\" title=\"\">AWS Identity and Access Management (IAM)</a> role to access your file systems so that it can service your users’ file transfer requests.</p> \n<p>You will also need to make sure you have created a mount target for your file system. In the example below, the home directory is owned by <code>userid</code> 1234 and <code>groupid</code> 5678.</p> \n<pre><code class=\"lang-bash\">$ mkdir home/myname\n$ chown 1234:5678 home/myname</code></pre> \n<p>When you <a href=\"https://console.aws.amazon.com/transfer/home\">create a server</a> in the <span title=\"\">AWS Transfer Family</span> console, select Amazon EFS as your storage service in the Step 4 section <strong>Choose a domain</strong>.</p> \n<p><img class=\"aligncenter size-full wp-image-46130\" style=\"border: solid 1px #ccc;width: 100%\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/01/03/2021-aws-transfer-family-efs-1.png\" alt=\"\" width=\"1962\" height=\"880\" /></p> \n<p>When the server is enabled and in an online state, you can add users to your server. On the <strong>Servers</strong> page, select the check box of the server that you want to add a user to and choose <strong>Add user</strong>.</p> \n<p><img class=\"aligncenter size-full wp-image-46131\" style=\"border: solid 1px #ccc;width: 90%\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/01/03/2021-aws-transfer-family-efs-2.png\" alt=\"\" width=\"2134\" height=\"600\" /></p> \n<p>In the <strong>User configuration</strong> section, you can specify the username, <code>uid</code> (e.g. 1234), <code>gid</code> (e.g 5678), IAM role, and Amazon EFS file system as user’s home directory. You can optionally specify a directory within the file system which will be the user’s landing directory. You use a service-managed identity type – SSH keys. If you want to use password type, you can use a <a href=\"https://aws.amazon.com/blogs/storage/enable-password-authentication-for-aws-transfer-for-sftp-using-aws-secrets-manager/\">custom option</a> with <a href=\"https://aws.amazon.com/secrets-manager/\" title=\"\">AWS Secrets Manager</a>.</p> \n<p>Amazon EFS uses POSIX IDs which consist of an operating system user id, group id, and secondary group id to control access to a file system. When setting up your user, you can specify the username, user’s POSIX configuration, and an IAM role to access the EFS file system. To learn more about configuring ownership of sub-directories in EFS, <a href=\"https://docs.aws.amazon.com/efs/latest/ug/accessing-fs-nfs-permissions-per-user-subdirs.html\">visit the documentation</a>.</p> \n<p><img class=\"aligncenter size-full wp-image-46527\" style=\"border: solid 1px #ccc;width: 90%\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/01/12/2021-aws-transfer-family-efs-3-new2.png\" alt=\"\" width=\"1338\" height=\"2111\" /></p> \n<p>Once the users have been configured, you can transfer files using the <span title=\"\">AWS Transfer Family</span> service by specifying the transfer operation in a client. When your user authenticates successfully using their file transfer client, it will be placed directly within the specified home directory, or root of the specified EFS file system.</p> \n<pre><code class=\"lang-bash\">$ sftp myname@my-efs-server.example.com\n\nsftp&gt; cd /fs-23456789/home/myname\nsftp&gt; ls -l\n-rw-r--r-- 1 3486 1234 5678 Jan 04 14:59 my-file.txt\nsftp&gt; put my-newfile.txt\nsftp&gt; ls -l\n-rw-r--r-- 1 3486 1234 5678 Jan 04 14:59 my-file.txt\n-rw-r--r-- 1 1002 1234 5678 Jan 04 15:22 my-newfile.txt</code></pre> \n<p>Most of SFTP/FTPS/FTP commands are supported in the new EFS file system. You can refer to a list of available commands for FTP and FTPS clients in the <a href=\"https://docs.aws.amazon.com/transfer/latest/userguide/getting-started-use-the-service.html\">documentation</a>.</p> \n<table style=\"margin-left: auto;margin-right: auto;border: 1px solid black;border-collapse: collapse\" width=\"80%\" cellpadding=\"4\"> \n <tbody> \n  <tr style=\"background-color: #e0e0e0\"> \n   <td style=\"border-bottom: 1px solid black;text-align: center\" width=\"114\"><strong><strong>Command</strong></strong></td> \n   <td style=\"border-bottom: 1px solid black;text-align: center\" width=\"156\"><strong>Amazon S3</strong></td> \n   <td style=\"border-bottom: 1px solid black;text-align: center\" width=\"156\"><strong>Amazon EFS</strong></td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>cd</code></td> \n   <td width=\"156\">Supported</td> \n   <td width=\"156\">Supported</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>ls/dir</code></td> \n   <td width=\"156\">Supported</td> \n   <td width=\"156\">Supported</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>pwd</code></td> \n   <td width=\"156\">Supported</td> \n   <td width=\"156\">Supported</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>put</code></td> \n   <td width=\"156\">Supported</td> \n   <td width=\"156\">Supported</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>get</code></td> \n   <td width=\"156\">Supported</td> \n   <td width=\"156\">Supported including resolving symlinks</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>rename</code></td> \n   <td width=\"156\">Supported (only file)</td> \n   <td width=\"156\">Supported (file or folder)</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>chown</code></td> \n   <td width=\"156\">Not supported</td> \n   <td width=\"156\">Supported (<code>root</code> only)</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>chmod</code></td> \n   <td width=\"156\">Not supported</td> \n   <td width=\"156\">Supported (<code>root</code> only)</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>chgrp</code></td> \n   <td width=\"156\">Not supported</td> \n   <td width=\"156\">Supported (<code>root</code> or <code>owner</code> only)</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>ln -s</code></td> \n   <td width=\"156\">Not supported</td> \n   <td width=\"156\">Supported</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>mkdir</code></td> \n   <td width=\"156\">Supported</td> \n   <td width=\"156\">Supported</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>rm</code></td> \n   <td width=\"156\">Supported</td> \n   <td width=\"156\">Supported</td> \n  </tr> \n  <tr style=\"border-bottom: 1px solid #ddd\"> \n   <td width=\"114\"><code>rmdir</code></td> \n   <td width=\"156\">Supported (non-empty folders only)</td> \n   <td width=\"156\">Supported</td> \n  </tr> \n  <tr> \n   <td width=\"114\"><code>chmtime</code></td> \n   <td width=\"156\">Not Supported</td> \n   <td width=\"156\">Supported</td> \n  </tr> \n </tbody> \n</table> \n<p>You can use <a href=\"https://aws.amazon.com/cloudwatch/\" title=\"\">Amazon CloudWatch</a> to track your users’ activity for file creation, update, delete, read operations, and metrics for data uploaded and downloaded using your server. To learn more on how to enable CloudWatch logging, <a href=\"https://docs.aws.amazon.com/transfer/latest/userguide/monitoring.html\">visit the documentation</a>.</p> \n<p><strong><u>Available Now</u></strong><br /> <a href=\"https://aws.amazon.com/aws-transfer-family\" title=\"\">AWS Transfer Family</a> support for Amazon EFS file systems is available in <a href=\"https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/\">all AWS Regions where <span title=\"\">AWS Transfer Family</span> is available</a>. There are no additional <span title=\"\">AWS Transfer Family</span> charges for using Amazon EFS as the storage backend. With Amazon EFS storage, you pay only for what you use. There is no need to provision storage in advance and there are no minimum commitments or up-front fees.</p> \n<p>To learn more, take a look at the <a href=\"https://aws.amazon.com/aws-transfer-family/faqs/#efs\">FAQs</a> and the <a href=\"https://docs.aws.amazon.com/transfer/latest/userguide/what-is-aws-transfer-family.html\">documentation</a>. Please send feedback to the <a href=\"https://forums.aws.amazon.com/forum.jspa?forumID=323\">AWS forum</a> for <span title=\"\">AWS Transfer Family</span> or through your usual AWS support contacts.</p> \n<p><strong>Learn all the details about <a href=\"https://aws.amazon.com/aws-transfer-family/?sc_detail=blog_cta1\"></a><a href=\"https://aws.amazon.com/aws-transfer-family\" title=\"\">AWS Transfer Family</a> to access Amazon EFS file systems and get started today.</strong></p> \n<p>— <a href=\"https://twitter.com/channyun\">Channy</a>;</p>","author":"Channy Yun","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"7cc032720403af31777c5036ae32258834d66205f9c339bb399740b6a79188e1","category":"Tech"}