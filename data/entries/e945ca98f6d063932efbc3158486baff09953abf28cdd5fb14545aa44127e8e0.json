{"title":"Getting Started with Your Favorite Operational Tools on AWS Lambda – Extensions Are Now Generally Available","link":"https://aws.amazon.com/blogs/aws/getting-started-with-using-your-favorite-operational-tools-on-aws-lambda-extensions-are-now-generally-available/","date":1621873475000,"content":"<p>In October 2020, we announced <a href=\"https://aws.amazon.com/blogs/compute/introducing-aws-lambda-extensions-in-preview/\">the preview of AWS Lambda extensions</a>, which you can use to easily integrate Lambda functions with your favorite tools for monitoring, observability, security, and governance.</p> \n<p>Today, I’m happy to announce the general availability of AWS Lambda Extensions which comes with new performance improvements and an expanded set of partners. As part of the GA release, we have enabled functions to send responses as soon as the function code is complete without waiting for the included extensions to finish. This enables extensions to perform activities like sending telemetry to a preferred destination after the function’s response has been returned. We also welcome extensions from new partners: Imperva, Instana, Sentry, Site24x7, and the AWS Distro for OpenTelemetry.</p> \n<p>You can use Lambda extensions for use cases such as capturing diagnostic information before, during, and after function invocation; automatically instrumenting your code without needing code changes; fetching configuration settings or secrets before the function invocation; detecting and alerting on function activity through security agents; and sending telemetry to custom destinations such as <a href=\"https://aws.amazon.com/s3/\">Amazon Simple Storage Service (Amazon S3)</a>, <a href=\"https://aws.amazon.com/kinesis/\">Amazon Kinesis</a>, <a href=\"https://aws.amazon.com/elasticsearch-service/\">Amazon Elasticsearch Service</a> directly and asynchronously from your Lambda functions.</p> \n<p>Customers are drawn to the vision of <a href=\"https://aws.amazon.com/serverless\">Serverless</a>. The reduced operational responsibility frees them up to focus on their business problems. To help customers monitor, observe, secure, and govern their functions, AWS Lambda provides native integrations for logs and metrics through <a href=\"https://aws.amazon.com/cloudwatch/\">Amazon CloudWatch</a>, tracing through <a href=\"https://aws.amazon.com/x-ray/\">AWS X-Ray</a>, tracking configuration changes through <a href=\"https://aws.amazon.com/config/\">AWS Config</a>, and recording API calls through <a href=\"https://aws.amazon.com/cloudtrail/\">AWS CloudTrail</a> In addition, <a href=\"https://aws.amazon.com/lambda/partners/\">AWS Lambda partners</a> provide tools for application management, API integration, deployment, monitoring, and security.</p> \n<p>AWS Lambda extensions provide a simple way to extend the <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/runtimes-context.html\">Lambda execution environment</a>, which is where your function code is executed. AWS customers, partners, and the open source community can use the new <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/runtimes-extensions-api.html\">Lambda Extensions API</a> to build their own extensions, which are companion processes that augment the capabilities of Lambda functions. To learn how to build your own extensions, see the <a href=\"https://aws.amazon.com/blogs/compute/building-extensions-for-aws-lambda-in-preview/\">Building Extensions for AWS Lambda – In preview</a> blog post. The post also includes information about changes to the Lambda lifecycle.</p> \n<p><strong><u>How AWS Lambda Extensions Works</u></strong><br /> AWS Lambda extensions are designed to be the easiest way to plug in the tools you use today without complex installation or configuration management. You can add tools to your functions using <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html\">Lambda layers</a> or include them in the image for <a href=\"https://aws.amazon.com/blogs/compute/working-with-lambda-layers-and-extensions-in-container-images/\">functions deployed as container images</a>.</p> \n<p><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/05/03/logs-api-concept-diagram.png\" /></p> \n<p>Lambda extensions use the <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/runtimes-extensions-api.html\">Extensions API</a> to register for function and execution environment lifecycle events. In response to these events, extensions can start new processes or run logic. Lambda extensions can also use the <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/runtimes-logs-api.html\">Runtime Logs API</a> to subscribe to a stream of the same logs that the Lambda service sends to <a href=\"https://aws.amazon.com/cloudwatch/\">Amazon CloudWatch</a> directly from the Lambda execution environment. Lambda streams the logs to the extension, and the extension can then process, filter, and send the logs to any preferred destination.</p> \n<p>Most customers will use Lambda extensions without needing to know about the capabilities of the Extensions API. You can just consume capabilities of an extension by configuring the options in your Lambda functions.</p> \n<p><strong><u>How to Use Lambda Extensions</u></strong><br /> You can install and manage extensions using the <a href=\"https://console.aws.amazon.com/lambda/\">Lambda console</a>, the <a href=\"https://aws.amazon.com/cli/\">AWS Command Line Interface (CLI)</a>, or infrastructure as code (IaC) services and tools such as <a href=\"https://aws.amazon.com/cloudformation/\">AWS CloudFormation</a>, <a href=\"https://aws.amazon.com/serverless/sam/\" target=\"_blank\">AWS Serverless Application Model</a> (AWS SAM), and <a href=\"https://www.terraform.io/\" target=\"_blank\">Terraform</a>.</p> \n<p>To use Lambda extensions to integrate existing tools with your Lambda functions, choose your a Lambda function and on the <strong>Configuration</strong> tab, choose <strong>Monitoring and Operations tools</strong>.</p> \n<p><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/05/20/202105-aws-lambda-extension-console.png\" /></p> \n<p>On the <strong>Extensions</strong> page, you can find available extensions from <a href=\"https://aws.amazon.com/lambda/partners/\">AWS Lambda partners</a>. Choose an extension to view its installation instructions.</p> \n<p><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/05/22/202105-aws-lambda-extension-console-3.png\" /></p> \n<p><strong><u>AWS Lambda Extensions Partners</u></strong><br /> At this launch, Lambda extensions integrate with these AWS Lambda partners who have provided the following information to introduce their extensions. <em>(I am updating this article with links as they are published.)</em></p> \n<ul> \n <li><a href=\"https://docs.appdynamics.com/display/PRO21/Use+the+AppDynamics+AWS+Lambda+Extension+to+Instrument+Serverless+APM+at+Runtime\">AppDynamics</a> provides end-to-end transaction tracing for AWS Lambda. With the AppDynamics extension, it is no longer mandatory for developers to include the AppDynamics tracer as a dependency in their function code, making tracing transactions across hybrid architectures even simpler.</li> \n <li><a href=\"https://coralogix.com/integrations/coralogix-extensions-for-aws-lambda/\">Coralogix</a> is a log analytics and cloud security platform that empowers thousands of companies to improve security and accelerate software delivery, allowing you to get deep insights without paying for the noise. Coralogix can now read Lambda function logs and metrics directly, without using CloudWatch or Amazon S3, reducing the latency, and cost of observability.</li> \n <li>The <a href=\"https://docs.datadoghq.com/serverless/datadog_lambda_library/extension/\">Datadog extension</a> brings comprehensive, real-time visibility to your serverless applications. Combined with Datadog’s integration with AWS, you get metrics, traces, and logs to help you monitor, detect, and resolve issues at any scale. The Datadog extension makes it easier than ever to get telemetry from your serverless workloads.</li> \n <li>The <a href=\"https://www.dynatrace.com/news/blog/dynatrace-extends-distributed-tracing-for-serverless-on-aws-lambda/\">Dynatrace extension</a> makes it even easier to bring AWS Lambda metrics and traces into the Dynatrace platform for intelligent observability and automatic root cause detection. Get comprehensive, end-to-end observability with the flip of a switch and no code changes.</li> \n <li><a href=\"https://epsagon.com/development/aws-lambda-extension/\">Epsagon</a> helps you monitor, troubleshoot, and lower the cost of your Lambda functions. Epsagon’s extension reduces the overhead of sending traces to the Epsagon service, with minimal performance impact to your function.</li> \n <li><a href=\"https://github.com/hashicorp/vault-lambda-extension\">HashiCorp Vault</a> allows you to secure, store, and tightly control access to your application’s secrets and sensitive data. With the Vault extension, you can now authenticate and securely retrieve dynamic secrets before your Lambda function is invoked.</li> \n <li><a href=\"https://www.honeycomb.io/blog/announcing-honeycombs-extension-for-the-aws-lambda-runtime-logs-api/\">Honeycomb</a> is a powerful observability tool that helps you debug your entire production app stack. Honeycomb’s extension decreases the overhead, latency, and cost of sending events to the Honeycomb service, while increasing reliability.</li> \n <li><a href=\"https://www.instana.com/\">Instana Enterprise Observability Platform</a> ingests performance metrics, traces requests, and profiles processes to make observability work for the enterprise. The Instana Lambda extension offers modification-free, low latency tracing of Lambda functions backed by their real-time Enterprise Observability Platform.</li> \n <li><a href=\"https://www.imperva.com/\">Imperva Serverless Protection</a> protects organizations from vulnerabilities created by misconfigured apps and code-level security risks in serverless computing environments. The Imperva extension enables customers to easily embed additional security in their DevOps processes for serverless applications without requiring any code changes, leading to faster time to market.</li> \n <li><a href=\"https://docs.lumigo.io/docs/lambda-extensions\">Lumigo</a> provides a monitoring and observability platform for serverless and microservices applications. The Lumigo extension enables the new Lumigo Lambda Profiler to see a breakdown of function resources, including CPU, memory, and network metrics. Use the extension to receive actionable insights to reduce Lambda runtime duration and cost, fix bottlenecks, and increase efficiency.</li> \n <li><a href=\"https://www.checkpoint.com/cloudguard/serverless-security/\">Check Point CloudGuard</a> provides full lifecycle security for serverless applications. The CloudGuard extension enables Function Self Protection data aggregation as an out-of-process extension, providing detection and alerting on application layer attacks.</li> \n <li><a href=\"https://blog.newrelic.com/product-news/aws-lambda-logs-api-integrations/\">New Relic</a> enables you to efficiently monitor, troubleshoot, and optimize your Lambda functions. New Relic’s extension allows you send your Lambda service platform logs directly to New Relic’s unified observability platform, allowing you to quickly visualize data with minimal latency and cost.</li> \n <li><a href=\"https://apm.docs.thundra.io/performance/zero-overhead-with-lambda-extensions\">Thundra</a> provides an application debugging, observability and security platform for serverless, container and virtual machine (VM) workloads. The Thundra extension adds asynchronous telemetry reporting functionality to the Thundra agents, getting rid of network latency.</li> \n <li><a href=\"https://www.splunk.com/en_us/blog/platform/splunk-extensions-for-aws-lambda.html\">Splunk</a> offers an enterprise-grade cloud monitoring solution for real-time full-stack visibility at scale. The Splunk extension provides a simplified runtime-independent interface to collect high-resolution observability data with minimal overhead. Monitor, manage, and optimize the performance and cost of your serverless applications with Splunk Observability solutions.</li> \n <li><a href=\"https://docs.sentry.io/product/integrations/aws-lambda/\">Sentry’s</a> extension enables developers to monitor code health. From error tracking to performance monitoring, developers can see issues more clearly, solve them quicker, and continuously stay informed about the health of their applications, all without making code changes.</li> \n <li><a href=\"https://www.site24x7.com/help/aws/lambda-execution-logs.html\">Site24x7</a> provides a performance monitoring solution for DevOps and IT operations. The Site24x7 extension enables real-time observability into your Lambda functions. It enables you to monitor critical Lambda metrics and function executions logs and optimize execution time and performance.</li> \n <li>The <a href=\"https://www.sumologic.com/blog/lambda-extensions/\">Sumo Logic</a> extension enables you to get instant visibility into the health and performance of your mission-critical applications using AWS Lambda. With this extension and Sumo Logic’s continuous intelligence platform, you can now ensure that all your Lambda functions are running as expected by analyzing function, platform, and extension logs to quickly identify and remediate errors and exceptions.</li> \n</ul> \n<p>Here are Lambda extensions from AWS services:</p> \n<ul> \n <li><a href=\"https://docs.aws.amazon.com/appconfig/latest/userguide/appconfig-integration-lambda-extensions.html\">AWS AppConfig</a> helps you manage, store, and safely deploy application configurations to your hosts at runtime. The AWS AppConfig extension integrates Lambda and AWS AppConfig seamlessly. Lambda functions have simple access to external configuration settings quickly and easily. Developers can now dynamically change their Lambda function’s configuration safely using robust validation features.</li> \n <li><a href=\"https://docs.aws.amazon.com/codeguru/latest/profiler-ug/python-lambda-layers.html\">Amazon CodeGuru Profiler</a> helps developers improve application performance and reduce costs by pinpointing an application’s most expensive line of code. It provides recommendations for improving code to save money. The Lambda integration removes the need to change any code or redeploy packages.</li> \n <li><a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/Lambda-Insights.html\">Amazon CloudWatch Lambda Insights</a> enables you to efficiently monitor, troubleshoot, and optimize Lambda functions. The Lambda Insights extension simplifies the collection, visualization, and investigation of detailed compute performance metrics, errors, and logs. You can more easily isolate and correlate performance problems to optimize your Lambda environments.</li> \n <li><a href=\"https://aws-otel.github.io/docs/getting-started/lambda\">AWS Distro for OpenTelemetry</a> is a secure, production-ready, AWS-supported distribution of the OpenTelemetry project. The Lambda extension runs the OpenTelemetry collector and enables functions to send trace data to AWS monitoring services such as AWS X-Ray and to any destination such as Honeycomb and Lightstep that supports OpenTelemetry Protocol (OTLP) using the OTLP exporter.</li> \n</ul> \n<p>To get started with Lambda extensions, use the links provided to install these extensions.</p> \n<p><strong><u>Things to Know</u></strong><br /> Here are a couple of things to keep in mind:</p> \n<p><strong>Pricing</strong>: Extensions share the same billing model as Lambda functions and you are charged for compute time used in all phases of the Lambda lifecycle. For function invocations, you pay for requests served and the compute time used to run your code and all extensions, together, in 1ms increments. To learn more about billing for extensions, visit the <a href=\"https://aws.amazon.com/lambda/faqs/\">Lambda FAQs page</a>.</p> \n<p><strong>Performance</strong>: Lambda extensions might impact the performance of your function because they share resources such as CPU, memory, and storage with the function, and because extensions are initialized before function code. For example, if an extension performs compute-intensive operations, you might see your function’s execution duration increase because the extension and your function code share the same CPU resources.</p> \n<p>Because Lambda uses allocates proportional CPU power based on the memory setting, you might see increased execution and initialization duration at lower memory settings as more processes compete for the same CPU resources. You can use CloudWatch metrics such as <code>PostRuntimeExecutionDuration</code> to measure the extra time the extension takes after the function execution and <code>MaxMemoryUsed</code> to measure the increase in memory used.</p> \n<p><strong><u>Available Now</u></strong><br /> The performance improvements announced as part of GA are currently in <span>US East (N. Virginia)</span>, <span>Europe (Ireland)</span>, and <span>Europe (Milan)</span> Regions.</p> \n<p>You can also build your own extensions. To learn how to build extensions, see the <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/runtimes-extensions-api.html\">Lambda Extensions API</a> in the AWS Lambda Developer Guide. You can send feedback through the <a href=\"https://forums.aws.amazon.com/forum.jspa?forumID=186&amp;start=0\">AWS forum</a> for AWS Lambda or through your usual AWS Support contacts.</p> \n<p>— <a href=\"https://twitter.com/channyun\">Channy</a></p>","author":"Channy Yun","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"e945ca98f6d063932efbc3158486baff09953abf28cdd5fb14545aa44127e8e0","category":"Tech"}