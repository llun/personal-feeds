{"title":"Reduce Unwanted Traffic on Your Website with New AWS WAF Bot Control","link":"https://aws.amazon.com/blogs/aws/reduce-unwanted-traffic-on-your-web-site-with-aws-bot-control/","date":1617311006000,"content":"<p>According to research done by the <a href=\"https://aws.amazon.com/shield/\" title=\"\">AWS Shield</a> Threat Research Team, up to 51% of traﬃc heading into typical web applications originates from scripts running on machines, also known as bots. A wide variety of bots – some wanted, some unwanted – are hitting your endpoints.</p> \n<p>Wanted bots are crawling your sites to index them and make them discoverable by your customers; others are monitoring your site availability or performance. But most of the bot traffic is generated by unwanted bots: scripts probing for vulnerabilities, or copying your content to replicate it somewhere else without your consent. In addition to the security risk, serving this traffic causes unnecessary pressure on, and costs for, your infrastructure.</p> \n<p>Protecting your website from this unwanted traffic is time-consuming and error-prone. Managing a set of rules is complex, with risks of blocking good traffic or authorizing traffic that should be blocked.</p> \n<p><strong><span style=\"text-decoration: underline;\">Introducing <span title=\"AWS WAF Bot Control\">AWS WAF Bot Control</span></span><br /> </strong>Today, we are introducing <a href=\"https://aws.amazon.com/waf/features/bot-control/\" title=\"AWS WAF Bot Control\">AWS WAF Bot Control</a> to identify, raise visibility of, and take action against common bot traffic. <span title=\"AWS WAF Bot Control\">AWS WAF Bot Control</span> is integrated into <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS Web Application Firewall</a> and can be managed centrally using <a href=\"https://aws.amazon.com/firewall-manager/\" title=\"\">AWS Firewall Manager</a> for large enterprise use cases.</p> \n<p><span title=\"Bot Control\">Bot Control</span> analyzes request metadata such as TLS handshakes, HTTP attributes, and IP addresses to identify the source and purpose of a bot. It categorizes bot types such as scraper, SEO, crawler, or site monitor.</p> \n<p>Once <span title=\"Bot Control\">Bot Control</span> recognizes the bot, you can block traffic coming from unwanted bots. You can simply accept the default action to block unwanted bot traffic as part of your WAF configuration, or you can customize the configuration. For example, you can use the custom response capability to return a tailored response according to bot identification, or flag the request by inserting a new header. Integration with <span title=\"\">AWS WAF</span> allows you to visualize the extent of bot traffic to your applications and control this traffic via <a href=\"https://aws.amazon.com/fr/blogs/aws/announcing-aws-managed-rules-for-aws-waf/\">WAF rules</a>.</p> \n<p><span title=\"Bot Control\">Bot Control</span> uses two new functionalities that we are adding to <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS WAF</a> Managed Rule Groups today: labeling and scope down statements. <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS WAF</a> labels are metadata added to the request as the result of a matching rule statement. These labels can be used in future rule statements. You can think of WAF labels like a variable in which you can temporarily store the result of a rule action and use it in a subsequent rule. In addition, <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS WAF</a> labels emit <a href=\"https://aws.amazon.com/cloudwatch/\" title=\"\">CloudWatch</a> metrics and show up in <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS WAF</a> logs. <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS WAF</a> labels can be useful for evaluating multiple statements with a <code>Count</code> action and then taking action based on the labels, or reusing logic across multiple rules, among other examples. <span title=\"AWS WAF Bot Control\">AWS WAF Bot Control</span> uses labels to emit various bot-related signals, allowing you to customize the behavior that suits your need.</p> \n<p>Some application resources are less likely to be subject to bot traffic or to need protection. Today, we are also introducing the concept of scope down statements. Scope down statements allow you to define under which conditions the managed rule group will execute. This is similar to the <a href=\"https://docs.aws.amazon.com/waf/latest/APIReference/API_RateBasedStatement.html\">scope down functionality provided for rate based rules</a> in <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS WAF</a> today. You may want to include a <code>ScopeDownStatement</code> to reduce costs on paid managed rule groups to limit evaluation to specific parts of your application, to avoid false positives, or to avoid latency impact for specific paths, among other use cases.</p> \n<p>Using a combination of managed rule group conﬁguration, labels and scope down statements, you can customize how you process requests that originated from bots.</p> \n<p><span style=\"text-decoration: underline;\"><strong><span title=\"AWS WAF Bot Control\">AWS WAF Bot Control</span> Benefits<br /> </strong></span>Using <span title=\"AWS WAF Bot Control\">AWS WAF Bot Control</span> brings you three key benefits:</p> \n<ol> \n <li><span title=\"Bot Control\">Bot Control</span> gives you free visibility into bot traffic activities. When you are using <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS WAF</a>, you get pre-built dashboards showing which applications have high levels of bot activity based on sampled data.</li> \n <li><span title=\"Bot Control\">Bot Control</span> reduces operational and infrastructure costs by reducing the traffic generated by scrapers, scanners, and crawlers. <span title=\"Bot Control\">Bot Control</span> blocks unwanted bot traffic at the edge before it can increase your application processing costs or negatively impact application performance.</li> \n <li><span title=\"Bot Control\">Bot Control</span> is easy to deploy. You can easily add bot protection to <a href=\"https://aws.amazon.com/cloudfront/\" title=\"\">Amazon CloudFront</a>, <a href=\"https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html\" title=\"alb\">Application Load Balancer</a>, <a href=\"http://aws.amazon.com/apigateway\" title=\"\">Amazon API Gateway</a>, or <a href=\"https://aws.amazon.com/appsync/\" title=\"\">AWS AppSync</a> just by adding an AWS managed rule group to a web access control list (web ACL).</li> \n</ol> \n<p><span style=\"text-decoration: underline;\"><strong>Let’s See How <span title=\"AWS WAF Bot Control\">AWS WAF Bot Control</span> Works<br /> </strong></span>Adding <span title=\"AWS WAF Bot Control\">AWS WAF Bot Control</span> works the same <a href=\"https://aws.amazon.com/blogs/aws/announcing-aws-managed-rules-for-aws-waf/\">as adding an <span title=\"\">AWS WAF</span> Managed Rule;</a> you can start with just a few clicks. Let’s see an example and connect to the <span title=\"\">AWS WAF</span> <a href=\"https://console.aws.amazon.com/wafv2/homev2/start?region=global\">console</a>.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/31/2021-03-31_20-38-37.png\"><img class=\"aligncenter size-large wp-image-51478\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/31/2021-03-31_20-38-37-1024x614.png\" alt=\"AWS WAF Console\" width=\"1024\" height=\"614\" /></a></p> \n<p>On the left part of the screen, you notice a new <strong>Bot Control</strong> menu&nbsp;that provides an overview of bot-related traffic seen on your web ACL, as well as a summary of which web ACL has Bot Control enabled. All AWS customers get these bot activity metrics as part of the <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS WAF</a> free tier: the split between bot and non-bot requests, the number of blocked bot requests and the categories of bots.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/30/2021-03-30_21-30-42.png\"><img class=\"aligncenter size-large wp-image-51428\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/30/2021-03-30_21-30-42-1024x856.png\" alt=\"Bot Control - Free Dashboard\" width=\"1024\" height=\"856\" /></a></p> \n<p>For this walkthrough, I decide to protect one of my endpoints. I select <strong>Web ACLs</strong> on the left menu and click <strong>Create web ACL</strong>:</p> \n<p>I enter the detail of my Web ACL and click <strong>Next</strong> at the bottom of the page:</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/31/2021-03-30_21-04-42-1.png\"><img class=\"aligncenter wp-image-51445 size-large\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/31/2021-03-30_21-04-42-1-1024x619.png\" alt=\"Web ACL Details\" width=\"1024\" height=\"619\" /></a></p> \n<p>Under <strong>Add rules and rule groups</strong>, I open <strong>Add rules</strong> and select <strong>Add managed rule groups</strong>:</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/30/2021-03-30_21-05-10.png\"><img class=\"aligncenter size-large wp-image-51425\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/30/2021-03-30_21-05-10-1024x458.png\" alt=\"Web ACL Add Rule\" width=\"1024\" height=\"458\" /></a></p> \n<p>On the <strong>Add managed rule groups</strong> screen, I expand <strong>AWS Managed rule groups</strong> and turn on <strong>Bot Control, Add to web ACL. </strong>At the bottom of the page (not shown below), I click <strong>Add rules</strong>.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/31/2021-03-30_21-05-55-1.png\"><img class=\"aligncenter wp-image-51446 size-large\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/31/2021-03-30_21-05-55-1-1024x426.png\" alt=\"Web ACL add bot control\" width=\"1024\" height=\"426\" /></a></p> \n<p>Finally, I choose the default action for requests that do not match rules and click <strong>Next</strong>.<a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/30/2021-03-30_21-22-58.png\"><img class=\"aligncenter size-large wp-image-51427\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/30/2021-03-30_21-22-58-1024x350.png\" alt=\"Web ACL default action\" width=\"1024\" height=\"350\" /></a>I keep all the default values on subsequent screens, I click <strong>Next</strong> three times and, finally, I click <strong>Create web ACL</strong>.</p> \n<p>Bot Control is similar to the Web ACL you already used: when selecting a specific set of rules, I can see the number of matching requests and a group of samples.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/31/2021-03-30_21-29-56-2.png\"><img class=\"aligncenter wp-image-51447 size-large\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/31/2021-03-30_21-29-56-2-1024x570.png\" alt=\"Web ACl dashboard\" width=\"1024\" height=\"570\" /></a></p> \n<p>When I select the <strong>Bot Control</strong> tab on the top, I now have access to bot-specific data.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/30/2021-03-30_21-47-02.png\"><img class=\"aligncenter size-large wp-image-51430\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/03/30/2021-03-30_21-47-02-1024x840.png\" alt=\"Bot Control Paid dashboard\" width=\"1024\" height=\"840\" /></a></p> \n<p><strong><span style=\"text-decoration: underline;\">Pricing and Availability<br /> </span></strong><a href=\"https://aws.amazon.com/waf/features/bot-control/\" title=\"AWS WAF Bot Control\">AWS WAF Bot Control</a> is available today in all AWS Regions where <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS WAF</a> is available. Just like other <span title=\"\">AWS WAF</span> rules, <span title=\"AWS WAF Bot Control\">AWS WAF Bot Control</span> can filter traffic hitting your <a href=\"https://aws.amazon.com/cloudfront/\" title=\"\">Amazon CloudFront</a> distributions, your <a href=\"https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html\" title=\"alb\">Application Load Balancer</a>, <a href=\"http://aws.amazon.com/apigateway\" title=\"\">Amazon API Gateway</a>, and <a href=\"https://aws.amazon.com/appsync/\" title=\"\">AWS AppSync</a>.</p> \n<p><span title=\"Bot Control\">Bot Control</span> is a paid AWS Managed Rule that can be added to your web ACL. You will be charged $10 / month (prorated by the hour) for each time <span title=\"Bot Control\">Bot Control</span> is added to your web ACL. In addition, you will be charged $1 per million requests processed by <span title=\"Bot Control\">Bot Control</span>. <span title=\"Bot Control\">Bot Control</span> charges are in addition to the <a href=\"https://aws.amazon.com/waf\" title=\"\">AWS WAF</a> <a href=\"https://aws.amazon.com/waf/pricing/\">fees</a>.</p> \n<p><span title=\"Bot Control\">Bot Control</span> free usage tier includes 10M free requests processed by <span title=\"Bot Control\">Bot Control</span> per month.</p> \n<p><a href=\"https://aws.amazon.com/waf/\">Learn more</a> about <a href=\"https://aws.amazon.com/waf/features/bot-control/\" title=\"AWS WAF Bot Control\">AWS WAF Bot Control</a> and <strong><a href=\"https://console.aws.amazon.com/wafv2/homev2/start?region=global\">add it</a> to your <span title=\"\">AWS WAF</span> today</strong>.</p> \n<p>&nbsp;</p>","author":"Sébastien Stormacq","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"ea3669580d8b9a3640cc1679ce172d92b6d46c877e95c8f3076090907832530f","category":"Tech"}