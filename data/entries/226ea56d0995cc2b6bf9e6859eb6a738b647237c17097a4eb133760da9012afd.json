{"title":"Announcing HashiCorp Waypoint 0.3","link":"https://www.hashicorp.com/blog/announcing-hashicorp-waypoint-0-3-0","date":1617910200000,"content":"<p>We are happy to announce version 0.3 of <a href=\"https://www.waypointproject.io/\">HashiCorp Waypoint</a>, an open source project that gives developers a consistent workflow to build, deploy, and release applications across any platform. Waypoint enables developers to get their applications from development to production in a single file and deploy using a single command: <code>waypoint up</code>.</p>\n<p>Waypoint 0.3 features many major new features that enable GitOps workflows, deployment to AWS Lambda, remote runners for operations such as builds and deploys, and more. Here are brief descriptions of the major features and improvements:</p>\n<ul>\n<li><strong>GitOps:</strong> Projects can be configured to watch a Git repository and trigger a <code>waypoint up</code> whenever a change is detected. The Git commit is now recorded alongside any operation, so you can know exactly which commit a deployment, artifact, or other operations are associated with.</li>\n<li><strong>AWS Lambda:</strong> Waypoint can now build and deploy AWS Lambda workloads. Deployments to Lambda support all the same advanced features of Waypoint, such as application configuration, <code>waypoint exec</code>, log streaming, etc.</li>\n<li><strong>Runners:</strong> Waypoint utilizes runners to execute Waypoint operations remotely. Runners are responsible for performing builds and deploys, polling projects for changes, and more.</li>\n</ul>\n<p>Download and try Waypoint 0.3 now from the <a href=\"https://www.waypointproject.io/\">Waypoint project website</a>. Continue reading to learn more about the new features and improvements in this release.</p>\n<h2><a href=\"#gitops\">»</a><a></a>GitOps</h2>\n<p>Waypoint now supports the fundamentals for a GitOps workflow where <code>waypoint up</code> operations are triggered automatically when changes are detected in a Git repository. You can create a project, configure Git repository settings, and watch Waypoint polling for changes entirely in the web UI.</p>\n<p>In the short video below, we create a new project that points to a Git repository. After the project is created, Waypoint automatically detects that we haven't yet deployed the latest commit and runs a <code>waypoint up</code>.</p><p>One of the goals for Waypoint is to support a diverse set of workflows. When Waypoint first launched, we supported only a CLI-based workflow. This new GitOps functionality enables Git-oriented workflows. Further, these can both be used interchangeably, so if one team prefers GitOps, another team prefers the CLI, and another team likes doing both situationally, they can all use Waypoint the way they want to.</p>\n<h2><a href=\"#aws-lambda\">»</a><a></a>AWS Lambda</h2>\n<p>This release of Waypoint adds support for building and deploying applications to AWS Lambda. The example <code>waypoint.hcl</code> file below shows a configuration to deploy to Lambda:</p><pre><code>project = \"waypoint-lambda\"\n\napp \"waypoint-lambda\" {\n  build {\n    use \"docker\" {}\n\n    registry {\n      use \"aws-ecr\" {\n        region     = \"us-west-2\"\n        repository = \"waypoint-lambda\"\n        tag        = \"waypoint-lambda\"\n      }\n    }\n  }\n\n  deploy {\n    use \"aws-lambda\" {\n      region = \"us-west-2\"\n    }\n  }\n\n  release {\n    use \"aws-alb\" {}\n  }\n}</code></pre><p>Some challenges while developing with AWS Lambda are viewing logs, opening a shell for debugging, etc. Waypoint makes the entire deploy-to-debug workflow a consistent experience; <code>waypoint exec</code> and <code>waypoint logs</code> work for Lambda workloads in the same way they work for containerized workloads:</p><pre><code>$ waypoint exec bash\nConnected to deployment v1\nbash-4.2#\n\n$ waypoint logs\nVersion: 1\n2021-04-06T22:32:32.230Z ZFHDQ6: Handling ALB request for unknown user\n2021-04-06T22:32:32.230Z ZFHDQ6: END RequestId: 1547f54c-5578-45d3-96d3-2c02f75c5f33\n2021-04-06T22:32:32.230Z ZFHDQ6: REPORT RequestId: 1547f54c-5578-45d3-96d3-2c02f75c5f33\nDuration: 13.39 ms\tBilled Duration: 14 ms\tMemory Size: 256 MB\tMax Memory Used: 105 MB</code></pre><p>Waypoint was designed from the beginning to support multiple paradigms: containers, VMs, serverless. For the initial launch, we focused on container-based workloads on top of platforms such as HashiCorp Nomad, Kubernetes, Amazon ECS, etc. The AWS Lambda support in Waypoint 0.3 shows the flexibility of Waypoint to support other paradigms such as serverless, and future versions of Waypoint will continue to build on this flexibility.</p>\n<p>The HashiCorp Learn team has published a new <a href=\"https://learn.hashicorp.com/tutorials/waypoint/aws-lambda?in=waypoint/deploy-aws\">AWS Lambda Tutorial</a> that shows you how you can start using this new feature in Waypoint.</p>\n<h2><a href=\"#remote-runners\">»</a><a></a>Remote Runners</h2>\n<p>Waypoint can now perform operations such as build and deploy remotely using a new process called a \"runner.” Runners can run anywhere they have connectivity to the Waypoint Server, and clients of the server such as the CLI can invoke operations remotely.</p>\n<p>Runners are one of the main components that enable the <a href=\"https://www.waypointproject.io/docs/projects/git\">GitOps functionality</a>. When a change in Git is detected, Waypoint queues a <code>waypoint up</code> to run on any available runner.</p>\n<p>To run a runner, use the <code>waypoint runner agent</code> command:</p><pre><code>$ WAYPOINT_SERVER_ADDR= \\\n  WAYPOINT_SERVER_TLS=true \\\n  WAYPOINT_SERVER_TOKEN= \\\n  waypoint runner agent\n\n» Runner configuration:\n  Server address: waypoint.example.com:9701\n\n» Runner logs:\n\n...</code></pre><p>Remote runners also enable necessary security functionality, since users of the CLI no longer need direct access to the targets they're deploying to or credentials to access those targets. The CLI needs only access to the Waypoint server, and the runner processes can be the only thing that has the credentials necessary to deploy.</p>\n<h2><a href=\"#other-improvements\">»</a><a></a>Other Improvements</h2>\n<p>Waypoint 0.3 contains <a href=\"https://github.com/hashicorp/waypoint/blob/v0.3.0/CHANGELOG.md\">many other improvements</a>. To highlight a few:</p>\n<ul>\n<li>A <a href=\"https://waypointproject.io/plugins/terraform-cloud\">Terraform Cloud config sourcer</a> was added, which lets Waypoint deployments use outputs from Terraform state. For example, this is a beneficial way to reference an RDS endpoint or other resources managed by Terraform. If the output value changes — such as from another Terraform apply — Waypoint will automatically restart running applications with the new value.</li>\n<li>Waypoint now supports building Docker images in unprivileged environments without a Docker daemon. This enables remote runners to do Docker builds in hosted environments such as GKE or ECS.</li>\n<li>The Kubernetes deployment platform now attempts in-cluster auth if available, allowing deployments within a remote runner running within a pod to authenticate automatically with Kubernetes.</li>\n<li>When creating a project, you can now store the <code>waypoint.hcl</code> file contents on the Waypoint server rather than alongside your project source code. This makes it easy to manage existing applications.</li>\n</ul>\n<h2><a href=\"#what-s-next-for-waypoint\">»</a><a></a>What's Next for Waypoint</h2>\n<p>We're already hard at work on the next major release of Waypoint, focusing on building significant foundational features for the project. We expect the next version of Waypoint to support variables within the <code>waypoint.hcl</code> file that support \"mutable\" deployment patterns such as Helm, raw Nomad job files, and more.</p>\n<p>You can also see what we are currently working on in the project’s milestones in GitHub. Please check out the <a href=\"https://github.com/hashicorp/waypoint/milestone/12\">0.4.0 milestone</a> for an up-to-date list of what we're working on. If you have any questions or suggestions about how we can continue to improve the Waypoint project, please let us know in the <a href=\"https://discuss.hashicorp.com/c/waypoint/51\">Waypoint Discuss forums</a>.</p>\n<h2><a href=\"#learn-more\">»</a><a></a>Learn More</h2>\n<ul>\n<li>Get started using Waypoint with <a href=\"https://learn.hashicorp.com/tutorials/waypoint/get-started-intro?in=waypoint/get-started-docker\">tutorials on HashiCorp Learn</a></li>\n<li>Learn how to use <a href=\"https://waypointproject.io/docs/projects/git\">Git integration</a>, <a href=\"https://waypointproject.io/docs/runner\">runners</a>, and <a href=\"https://learn.hashicorp.com/tutorials/waypoint/aws-lambda?in=waypoint/deploy-aws\">Lambda</a></li>\n<li>Read the 0.3.0 release notes on the <a href=\"https://discuss.hashicorp.com/t/waypoint-0-3-0-released/\">Waypoint Discuss forum</a></li>\n<li><a href=\"https://www.waypointproject.io/community\">Contribute to the Waypoint project</a> and participate in its community</li>\n<li><a href=\"https://www.waypointproject.io/docs/extending-waypoint\">Extend Waypoint</a> by creating a plugin</li>\n</ul>","author":"Taylor Dolezal","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"226ea56d0995cc2b6bf9e6859eb6a738b647237c17097a4eb133760da9012afd","category":"Tech"}