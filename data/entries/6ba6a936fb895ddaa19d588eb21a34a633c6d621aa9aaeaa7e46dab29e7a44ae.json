{"title":"สรุปจาก NodeJS Docker Cheatsheet ของ OWASP","link":"https://www.somkiat.cc/nodejs-docker-cheatsheet-from-owasp/","date":1622195479000,"content":"<p><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/docker-nodejs-150x150.jpeg\" /></p>\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/docker-nodejs-1024x457.jpeg\" /></figure>\n\n\n\n<p>อ่านเอกสาร <strong><a href=\"https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/NodeJS_Docker_Cheat_Sheet.md\" target=\"_blank\">NodeJS Docker Cheatsheet จาก OWASP</a></strong> <br />ทำการอธิบายถึงการใช้งาน Docker กับระบบที่พัฒนาด้วย NodeJS <br />ไว้ว่าควรต้องทำอย่างไรบ้าง<br />เพื่อให้ปลอดภัยมากยิ่งขึ้น</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>1. ในการใช้งาน Image ให้ระบุชื่อ tag และ version ด้วย SHA256 ไปเลย (Digest)</strong><br />ยกตัวอย่างเช่น <em>node@sha256:b2da3316acdc2bec442190a1fe10dc094e7ba4121d029cb32075ff59bb27390a</em></p>\n\n\n\n<p><strong>2.  Install dependency เฉพาะ production เท่านั้น</strong><br />นั่นคือ ตอน install ไม่สนใจ devDependenies</p>\n\n\n\n<p><strong>3.  กำหนด NODE_ENV ไว้เสมอ </strong><br />โดยกำหนดไว้ที่ productionกำหนด production เป็นค่า default ไว้เลย<br />เพราะว่าอาจจะลืม รวมทั้ง library หลาย ๆ ตัวก็อาจจะใช้ค่านี้ด้วย</p>\n\n\n\n<p><strong>4.  ห้าม run container ด้วย user root อันตรายมาก ๆ</strong></p>\n\n\n\n<p><strong>5.  ระบบงานที่พัฒนาต้องจัดการเรื่อง การ terminate ที่ถูกต้องรวมทั้ง Graceful shutdown ด้วย</strong></p>\n\n\n\n<p><strong>6.  ต้องทำการ <a href=\"https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-9-use-static-analysis-tools\" target=\"_blank\">scan  image</a> ด้วยเสมอ ในตอนนี้ buildin มาใน docker แล้ว</strong></p>\n\n\n\n<p><strong>7.  ในการ build image ให้ใช้ <a href=\"https://docs.docker.com/develop/develop-images/multistage-build/\" target=\"_blank\">multi-stage build</a> เพื่อให้เหลือเฉพาะสิ่งที่จำเป็นเท่านั้น</strong></p>\n\n\n\n<p><strong>8.  ไฟล์อะไรที่ไม่จำเป็น ก็ไม่ต้องเอาเข้ามาในการ build </strong><br />ด้วยการกำหนดในไฟล์  .dockerignore<br />แต่ถ้ามีบางไฟล์ต้องใช้จริง ๆ <br />แนะนำให้ใช้ผ่านการ <strong><a href=\"https://docs.docker.com/develop/develop-images/build_enhancements/\" target=\"_blank\">mount แบบ secret </a></strong>เพิ่มเข้ามา</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"6ba6a936fb895ddaa19d588eb21a34a633c6d621aa9aaeaa7e46dab29e7a44ae","category":"Thai"}