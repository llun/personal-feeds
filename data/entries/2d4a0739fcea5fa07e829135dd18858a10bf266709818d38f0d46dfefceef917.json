{"title":"Announcing HashiCorp Waypoint 0.4","link":"https://www.hashicorp.com/blog/announcing-waypoint-0-4","date":1622746800000,"content":"<p>We are happy to announce version 0.4 of <a href=\"https://www.waypointproject.io/\">HashiCorp Waypoint</a>, an open source project that gives developers a consistent workflow to build, deploy, and release applications across any platform. Waypoint enables developers to build, deploy, and release their applications with a single file and a single command: <code>waypoint up</code>.</p>\n<p>Waypoint 0.4 adds significant new functionality, most notably <strong><a href=\"https://github.com/hashicorp/waypoint/issues/1298\">\"mutable\" deployments</a></strong>, where a deployment updates an existing resource rather than creating something new, and <strong>status reports,</strong> a new feature for <a href=\"https://github.com/hashicorp/waypoint/issues/1488\">reporting on the health</a> of deployments or releases, among others.</p>\n<p>Here are descriptions of the significant enhancements:</p>\n<h2><a href=\"#mutable-deploys\">»</a><a></a>Mutable Deploys</h2>\n<p>Waypoint URLs, the UI, and the project state depend on each deployment creating new resources. In Waypoint 0.4, you can use existing HashiCorp Nomad jobfiles, Kubernetes YAML, and other application configuration files instead of having to recreate or duplicate your entire build, deploy, or release process in a <code>waypoint.hcl</code>. The core Waypoint data model is now \"mutable-aware,\" employing a new \"generation ID.\" Plugins can opt-in to generating their generation IDs. By default, Waypoint will generate a unique generation ID per operation:</p><pre><code>// The waypoint.hcl file\n\ndeploy {\n  use \"kubernetes-apply\" {\n    // Templated to perhaps bring in the artifact from a previous\n    // build/registry, entrypoint env vars, etc.\n    path        = templatedir(\"${path.app}/k8s\")\n    prune_label = \"app=myapp\"\n  }\n}</code></pre><pre><code># ./k8s/deployment.yaml\n\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-deployment\n  labels:\n    app: myapp\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      containers:\n      - name: myapp\n        image: ${artifact.image}:${artifact.tag}\n        env:\n          %{ for k,v in entrypoint.env ~}\n          - name: ${k}\n            value: \"${v}\"\n          %{ endfor ~}\n\n          # Ensure we set PORT for the URL service. This is only necessary\n          # if we want the URL service to function.\n          - name: PORT\n            value: \"3000\"</code></pre><h2><a href=\"#status-reports\">»</a><a></a>Status Reports</h2>\n<p>Waypoint 0.4 introduces a new feature for reporting on the health of deployments or releases. Waypoint surfaces a deployment and or releases status by relying on an existing platform for health checks. A status is responsible for reporting the health of a deployed service by representing its states as Ready, Alive, Partial, Down, or Unknown. Platform health reporting lets teams take action quickly depending on the health of their applications. Currently, the Kubernetes, Nomad, AWS ALB, and Docker built-in plugins support the new status reporting, with more support on the way.</p><img src=\"https://www.datocms-assets.com/2885/1622731823-waypoint-health-status.png\" /><h2><a href=\"#other-waypoint-0-4-improvements\">»</a><a></a>Other Waypoint 0.4 Improvements</h2>\n<p>Waypoint 0.4 contains <a href=\"https://github.com/hashicorp/waypoint/blob/v0.4.0/CHANGELOG.md\">many other </a>enhancements. To highlight a few:</p>\n<h3><a href=\"#features\">»</a><a></a>Features:</h3>\n<ul>\n<li><a href=\"https://github.com/hashicorp/waypoint/issues/1382\">Define internal variables</a> and compose variables together via templating.</li>\n<li><a href=\"https://github.com/hashicorp/waypoint/issues/1395\">Write configuration values as files</a> rather than environment variables.</li>\n<li>Add <a href=\"https://github.com/hashicorp/waypoint/pull/1360\">jsonnetfile and jsonnetdir</a> functions for processing Jsonnet files and converting them to JSON.</li>\n<li><a href=\"https://github.com/hashicorp/waypoint/issues/1567\">Report on status</a> of releases with <code>aws-alb</code> plugin.</li>\n<li>Add reporting on the <a href=\"https://github.com/hashicorp/waypoint/issues/1487\">status of a Docker deployment</a>.</li>\n<li>Add a new plugin called <a href=\"https://github.com/hashicorp/waypoint/issues/1357\">kubernetes-apply</a> for deploying any typical directory of YAML or JSON files to Kubernetes.</li>\n<li>Add reporting on status of a <a href=\"https://github.com/hashicorp/waypoint/issues/1547\">Kubernetes deployment and release</a>.</li>\n<li>Add a new plugin called <a href=\"https://github.com/hashicorp/waypoint/issues/1299\">nomad-jobspec</a> for directly deploying a Nomad job specification.</li>\n<li>Add reporting on status of a <a href=\"https://github.com/hashicorp/waypoint/issues/1554\">Nomad deployment</a>.</li>\n<li>Use <code>--platform=ecs</code> to install Waypoint server to <a href=\"https://github.com/hashicorp/waypoint/issues/1564\">Amazon ECS using Fargate</a>.</li>\n<li>Add <a href=\"https://github.com/hashicorp/waypoint/issues/1559\">reporting on status</a> in the Waypoint UI.</li>\n<li>Mutable deployments support on the <a href=\"https://github.com/hashicorp/waypoint/issues/1549\">web dashboard</a>.</li>\n</ul>\n<h3><a href=\"#improvements\">»</a><a></a>Improvements:</h3>\n<ul>\n<li>Add ability to add a <a href=\"https://github.com/hashicorp/waypoint/issues/1419\">${workspace} configuration</a> variable.</li>\n<li>Support for <a href=\"https://github.com/hashicorp/waypoint/pull/1475\">non-default Buildpack process types</a>.</li>\n<li>Add support to the Docker plugin for <a href=\"https://github.com/hashicorp/waypoint/issues/1490\">setting the build context. </a></li>\n</ul>\n<h3><a href=\"#bug-fixes\">»</a><a></a>Bug Fixes:</h3>\n<ul>\n<li><a href=\"https://github.com/hashicorp/waypoint/issues/1528\">Destroy Kubernetes deployments on error</a>.</li>\n<li><a href=\"https://github.com/hashicorp/waypoint/issues/1452\">Upgrade pack package</a> to fix downloading remote buildpacks.</li>\n<li>Fix a Waypoint server bug that sometimes sends <a href=\"https://github.com/hashicorp/waypoint/issues/1538\">duplicate cancellation messages</a>.</li>\n<li>Fix server log order while showing <a href=\"https://github.com/hashicorp/waypoint/issues/1441\">logs from multiple instances</a>.</li>\n<li>Custom inputs in the <a href=\"https://github.com/hashicorp/waypoint/issues/1312\">browser UI</a> now render correctly on all supported browsers.</li>\n<li>Unread <a href=\"https://github.com/hashicorp/waypoint/issues/1373\">log count resets in UI</a> after scrolling.</li>\n</ul>\n<h3><a href=\"#breaking-changes\">»</a><a></a>Breaking Changes:</h3>\n<ul>\n<li><a href=\"https://github.com/hashicorp/waypoint/issues/1525\">Removed the netlify plugin</a></li>\n</ul>\n<h2><a href=\"#what-s-next-for-waypoint\">»</a><a></a>What's Next for Waypoint</h2>\n<p>You can see work on the <a href=\"https://github.com/hashicorp/waypoint/milestone/15\">Waypoint project's milestones</a> in GitHub. If you have any questions or suggestions about improving the Waypoint project, please let us know in the <a href=\"https://discuss.hashicorp.com/c/waypoint/51\">Waypoint Discuss forums</a>.</p>\n<h2><a href=\"#learn-more-and-get-started\">»</a><a></a>Learn More and Get Started</h2>\n<p>Download and try Waypoint 0.4 now from the <a href=\"https://www.waypointproject.io/\">Waypoint project website</a>.</p>\n<p>For more information, check out these resources:</p>\n<ul>\n<li>Get started using Waypoint with <a href=\"https://learn.hashicorp.com/tutorials/waypoint/get-started-intro?in=waypoint/get-started-docker\">tutorials on HashiCorp Learn</a>.</li>\n<li>Check out what we have planned for our <a href=\"https://github.com/hashicorp/waypoint/milestone/15\">0.5.0 milestone</a>.</li>\n<li>Discover how Waypoint Runners enable <a href=\"https://www.hashicorp.com/blog/using-waypoint-runners-to-enable-gitops-workflows\">GitOps workflows</a>.</li>\n<li>Watch the new <a href=\"https://www.youtube.com/watch?v=1e66lek596E\">kubectl-apply plugin</a> in this Waypoint deep dive.</li>\n<li>Read the 0.4.0 release notes on the <a href=\"https://discuss.hashicorp.com/t/waypoint-0-4-released/\">Waypoint Discuss forum</a>.</li>\n<li><a href=\"https://www.waypointproject.io/community\">Contribute to the Waypoint project</a> and participate in its community.</li>\n<li><a href=\"https://www.waypointproject.io/docs/extending-waypoint\">Extend Waypoint</a> by creating a plugin.</li>\n</ul>","author":"Taylor Dolezal","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"2d4a0739fcea5fa07e829135dd18858a10bf266709818d38f0d46dfefceef917","category":"Tech"}