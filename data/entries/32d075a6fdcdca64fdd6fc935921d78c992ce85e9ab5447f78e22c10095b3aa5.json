{"title":"[Dart] สรุปจาก session เรื่อง Why null safety ?","link":"https://www.somkiat.cc/dart-why-null-safety/","date":1621586753000,"content":"<p><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/dart00-150x150.jpg\" /></p>\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/dart00.jpg\" /></figure>\n\n\n\n<p>ใน Flutter 2.2 นั้น <strong><a href=\"https://dart.dev/null-safety/understanding-null-safety\" target=\"_blank\">Null Safety</a></strong> จากภาษา Dart จะเป็นค่า default ให้เลย<br />เนื่องจากก่อนหน้านี้จะต้องทำการ migrate project ตามความต้องการ<br />ดังนั้นเรามาทำความเข้าใจกันว่า <br />ทำไมต้อง Null Safty ด้วย<br />มาจาก VDO ในงาน Google I/O 2021 เรื่อง <strong><a href=\"https://www.youtube.com/watch?v=tP9TcrUZoIs\" target=\"_blank\">Why null safety ?</a></strong><br />เป็นอีก session ที่ชอบมาก ๆ<br />จึงสรุปไว้นิดหน่อย</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>เริ่มจาก code ของ Dart จะมีตัวแปร 2 แบบคือ</strong></p>\n\n\n\n<ul><li>Nullable</li><li>Non Nullable</li></ul>\n\n\n\n<p>ตัวอย่างเช่น<br />ถ้าเป็น Non Nullable แต่ดันส่งค่า null เข้าไป<br />จะมี error ดังนี้ ซึ่งเป็น compile time error</p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/dart01.jpg\" /></figure>\n\n\n\n<p><strong>ในทางกลับกัน ถ้ากำหนดให้เป็น Nullable แล้ว พยายามเข้าถึงค่านั้นตรง ๆ</strong></p>\n\n\n\n<p>ก็จะเกิด compile error เช่นกัน เพราว่า อาจจะเกิดปัญหาได้ เพราะว่ามีโอกาสเป็น nullดังนั้นมีโอกาสเกิด NullPointer Exception (NPE) ได้<br /><strong><em>ปล. nullable คือการใส่ ? หลังชื่อ type นั่นเอง</em></strong></p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/dart02.jpg\" /></figure>\n\n\n\n<p><strong>การทำงานนั้น ต้องการ feedback loop ที่รวดเร็ว</strong></p>\n\n\n\n<p>จึงทำการ compile change หลังจากที่แก้ไข<br />หรือเปลี่ยงแปลง code เลยแสดงการทำงานดังรูป</p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/dart03.jpg\" /></figure>\n\n\n\n<p><strong>เปลี่ยนมาให้เร็วขึ้น</strong></p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/dart04.jpg\" /></figure>\n\n\n\n<p><strong>ส่วนพวก Type checking ยิ่งเร็วมาก ๆ</strong><br />เพราะว่า Dart เป็น static type อยู่แล้ว<br />ทำให้การตรวจสอบง่ายและเร็วขึ้น</p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/dart05.jpg\" /></figure>\n\n\n\n<p><strong>หลังจากมี Null Safety ขึ้นมาแล้ว</strong></p>\n\n\n\n<p>การทำงานของ compiler จะลดน้อยลง<br />นั่นคือการทำงานเร็วขึ้นนั่นเอง</p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/05/Screen-Shot-2564-05-21-at-15.05.14-1024x501.png\" /></figure>\n\n\n\n<p><strong>แต่การใช้งานก็ต้องระวังด้วยเช่นกัน เพราะว่า ถ้าใช้ผิดก็เกิดปัญหาได้เช่นกัน</strong></p>\n\n\n\n<p>ยกตัวอย่างการ force cast แบบนี้</p>\n\n\n\n[gist id=\"f40f70f6cd988b559383d10823a68963\" file=\"demo02.dart\"]\n\n\n\n<p><strong>ดังนั้นถ้าใครยังไม่ใช้ ก็ใช้ได้แล้วนะ</strong></p>\n\n\n\n<p>จะเจอสัญลักษณะเพิ่มมาอีก 2 ตัวคือ ? และ !<br />รวมทั้งตัวแปรประกาศขึ้นมา แต่ไม่ทำการ initial ค่าให้ ก็ error ด้วย<br />ดังนั้นลอง migrate หรือเปลี่ยนกันดูครับ<br />ผมเพิ่งเปลี่ยนไป 1 project สนุกสนานมาก ๆ</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"32d075a6fdcdca64fdd6fc935921d78c992ce85e9ab5447f78e22c10095b3aa5","category":"Thai"}